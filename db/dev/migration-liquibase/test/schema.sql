-- liquibase formatted sql

-- changeset angelchang:1
CREATE TABLE IF NOT EXISTS "admin_role" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "role_name" TEXT NOT NULL, "user_id" INTEGER, CONSTRAINT "admin_role_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE admin_role;

-- changeset angelchang:2
CREATE TABLE IF NOT EXISTS "affiliate" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "identify_rule" TEXT, "message" TEXT, "endpoint" TEXT, "status" TEXT NOT NULL, "belongs" VARCHAR, "translations" TEXT DEFAULT '{}' NOT NULL, CONSTRAINT "affiliate_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE affiliate;

-- changeset angelchang:3
CREATE TABLE IF NOT EXISTS "affiliate_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "invite_code" TEXT NOT NULL, "affiliate_id" INTEGER NOT NULL, CONSTRAINT "affiliate_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE affiliate_code;

-- changeset angelchang:4
CREATE TABLE IF NOT EXISTS "affiliate_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "identify" TEXT, "user_id" INTEGER, "affiliate_id" INTEGER NOT NULL, "role" TEXT NOT NULL, "status" TEXT NOT NULL, "affiliate_code_id" INTEGER, CONSTRAINT "affiliate_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE affiliate_connect;

-- changeset angelchang:5
CREATE TABLE IF NOT EXISTS "alert_setting" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "notify_single_extremely_low" BOOLEAN, "notify_single_extremely_high" BOOLEAN, "notify_consecutive_high" BOOLEAN, "notify_frequent_low" BOOLEAN, "notify_consistent_low_time_of_day" BOOLEAN, "notify_consistent_high_time_of_day" BOOLEAN, "notify_high_blood_variability_multi" BOOLEAN, "notify_high_blood_variability" BOOLEAN, "single_extremely_low_threshold" numeric, "single_extremely_high_threshold" numeric, "consecutive_high_threshold" INTEGER, "frequent_low_threshold" INTEGER, "care_connect_id" INTEGER NOT NULL, CONSTRAINT "alert_setting_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE alert_setting;

-- changeset angelchang:6
CREATE TABLE IF NOT EXISTS "android_device_pattern" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "get_pattern" INTEGER, "send_pattern" INTEGER, "send_stop_bit_len" INTEGER, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "brand" TEXT NOT NULL, "model" TEXT NOT NULL, "status" TEXT NOT NULL, "filename" TEXT, "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "android_device_pattern_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE android_device_pattern;

-- changeset angelchang:7
CREATE TABLE IF NOT EXISTS "antz" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "task" TEXT NOT NULL, "fired_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "args" TEXT DEFAULT '{}', "subscribed_id" INTEGER, CONSTRAINT "antz_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE antz;

-- changeset angelchang:8
CREATE TABLE IF NOT EXISTS "api_log" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER, "endpoint" TEXT, "ip" TEXT, "method" TEXT, "params" TEXT, "user_agent" TEXT, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "take_time" numeric, "app_version" TEXT, "response_code" INTEGER, CONSTRAINT "api_log_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE api_log;

-- changeset angelchang:9
CREATE TABLE IF NOT EXISTS "app_alert_setting" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "medication" TEXT DEFAULT '{}' NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "app_alert_setting_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE app_alert_setting;

-- changeset angelchang:10
CREATE TABLE IF NOT EXISTS "app_log" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "log" TEXT NOT NULL, "category" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "app_log_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE app_log;

-- changeset angelchang:11
CREATE TABLE IF NOT EXISTS "app_version" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "os_name" TEXT, "latest" TEXT DEFAULT '1.0.0', "lowest" TEXT DEFAULT '1.0.0', CONSTRAINT "app_version_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE app_version;

-- changeset angelchang:12
CREATE TABLE IF NOT EXISTS "auth_apple" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "email" VARCHAR(255), "user_identifier" VARCHAR(255) NOT NULL, "access_token" TEXT NOT NULL, "id_token" TEXT NOT NULL, "refresh_token" TEXT NOT NULL, "user_id" INTEGER, CONSTRAINT "auth_apple_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE auth_apple;

-- changeset angelchang:13
CREATE TABLE IF NOT EXISTS "care_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "identify" TEXT, "role" TEXT NOT NULL, "user_id" INTEGER, "clinic_id" INTEGER NOT NULL, "status" TEXT NOT NULL, "educator_id" INTEGER, "clinic_code_id" INTEGER, "last_login" TIMESTAMP WITHOUT TIME ZONE, "last_viewed_at" TIMESTAMP WITHOUT TIME ZONE, "last_viewed_user_id" INTEGER, "accepted_tos_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "care_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE care_connect;

-- changeset angelchang:14
CREATE TABLE IF NOT EXISTS "care_viewed_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "active" BOOLEAN DEFAULT TRUE NOT NULL, "care_connect_id" INTEGER NOT NULL, "user_id" INTEGER, "section" VARCHAR DEFAULT 'data' NOT NULL, "user_stream_id" INTEGER, CONSTRAINT "care_viewed_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE care_viewed_connect;

-- changeset angelchang:15
CREATE TABLE IF NOT EXISTS "cgm_sync_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "serial_number" TEXT NOT NULL, "records" TEXT DEFAULT '{}' NOT NULL, "exported" BOOLEAN DEFAULT FALSE, "count" INTEGER DEFAULT 0 NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "updated_by" INTEGER NOT NULL, "refer_number" INTEGER, "record_from" TIMESTAMP WITHOUT TIME ZONE, "record_to" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "cgm_sync_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE cgm_sync_history;

-- changeset angelchang:16
CREATE TABLE IF NOT EXISTS "clinic" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "address" TEXT, "phone_number" TEXT, "status" TEXT NOT NULL, "identify_rule" TEXT, "message" TEXT, "endpoint" TEXT, "measurement_timing" TEXT, "allow_view_all" BOOLEAN, "lang" TEXT DEFAULT 'en-us' NOT NULL, "hide_manually" BOOLEAN DEFAULT FALSE NOT NULL, "picture_url" TEXT, "payment_required" BOOLEAN DEFAULT FALSE, "category" TEXT DEFAULT 'clinic' NOT NULL, "identify_label" TEXT DEFAULT 'Social Security number' NOT NULL, "pricing" VARCHAR DEFAULT 'paid', "belongs" VARCHAR, "first_message" TEXT, "translations" TEXT DEFAULT '{}' NOT NULL, "auto_reply_message" TEXT, "msd_created_at" TIMESTAMP WITHOUT TIME ZONE, "medical_institution_code" VARCHAR, "allow_auto_reply" BOOLEAN DEFAULT FALSE, "auto_reply_activated" BOOLEAN DEFAULT FALSE, "auto_reply_frequency" TEXT, "account_manager_id" INTEGER, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "is_demo" BOOLEAN DEFAULT FALSE, "assign_patient_by_invitation_code" BOOLEAN DEFAULT FALSE, "features" TEXT[], "emr_type" TEXT, "show_medical_record_number" BOOLEAN DEFAULT TRUE, "allowed_ip_addresses" TEXT, "allow_librelink" BOOLEAN DEFAULT FALSE, "country_id" INTEGER, "limit_email_reminder_to_assignees" BOOLEAN DEFAULT FALSE, "allow_prior_lab_data" BOOLEAN DEFAULT FALSE, CONSTRAINT "clinic_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic;

-- changeset angelchang:17
CREATE TABLE IF NOT EXISTS "clinic_chart" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "care_connect_id" INTEGER NOT NULL, "diabetes_type" TEXT DEFAULT 'N/A' NOT NULL, "phone_number" TEXT, "emergency_contact_phone" TEXT, "language" TEXT, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "emergency_contact" TEXT, "waist" numeric, "body_fat" numeric, "height" numeric, "weight" numeric, "diagnosed_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "waist_unit" TEXT, "height_unit" TEXT, "weight_unit" TEXT, "birthday" date, "gender" TEXT, "status" TEXT DEFAULT 'active' NOT NULL, "created_by" INTEGER, "diabetes_duration" TEXT, "diabetes_medication" TEXT, "medical_record_number" VARCHAR, "cell_phone_number" VARCHAR, "city_code" VARCHAR, "address" TEXT, "first_name" VARCHAR DEFAULT '' NOT NULL, "last_name" VARCHAR DEFAULT '' NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "furigana_first_name" TEXT, "furigana_last_name" TEXT, CONSTRAINT "clinic_chart_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_chart;

-- changeset angelchang:18
CREATE TABLE IF NOT EXISTS "clinic_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "invite_code" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, "care_connect_id" INTEGER, CONSTRAINT "clinic_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_code;

-- changeset angelchang:19
CREATE TABLE IF NOT EXISTS "clinic_config" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "height_unit" TEXT NOT NULL, "weight_unit" TEXT NOT NULL, "waist_unit" TEXT NOT NULL, "cholesterol_tg" TEXT NOT NULL, "urine_acr_pcr" TEXT NOT NULL, "creatinine_bun" TEXT NOT NULL, "alb" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, "glucose_unit" TEXT DEFAULT 'mg/dL' NOT NULL, "marker" TEXT DEFAULT '{}' NOT NULL, "hide_input_bar" BOOLEAN DEFAULT FALSE, "reminder_data" TEXT DEFAULT '{}' NOT NULL, "show_upload_photo_bar" BOOLEAN DEFAULT FALSE, "hide_payment_tos" BOOLEAN DEFAULT FALSE, "fbg_reminder_activated" BOOLEAN DEFAULT TRUE, "allow_view_exam" BOOLEAN DEFAULT TRUE, CONSTRAINT "clinic_config_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_config;

-- changeset angelchang:20
CREATE TABLE IF NOT EXISTS "clinic_daily_comment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "date" date NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "comment" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "created_by" INTEGER, CONSTRAINT "clinic_daily_comment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_daily_comment;

-- changeset angelchang:21
CREATE TABLE IF NOT EXISTS "clinic_default_analytics_monthly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "country_iso_2" TEXT NOT NULL, "is_pseudo_included" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "month" INTEGER NOT NULL, "patient" TEXT DEFAULT '{}' NOT NULL, "a1c" TEXT DEFAULT '{}' NOT NULL, "ldlc" TEXT DEFAULT '{}' NOT NULL, "egfr" TEXT DEFAULT '{}' NOT NULL, "uacr" TEXT DEFAULT '{}' NOT NULL, "fbg" TEXT DEFAULT '{}' NOT NULL, "pre_meal_bg" TEXT DEFAULT '{}' NOT NULL, "post_meal_bg" TEXT DEFAULT '{}' NOT NULL, "bp" TEXT DEFAULT '{}' NOT NULL, "oral_medicine" TEXT DEFAULT '[]' NOT NULL, "injectable_insulin" TEXT DEFAULT '[]' NOT NULL, "diabetes_medication_combination" TEXT DEFAULT '[]' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "clinic_default_analytics_monthly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_default_analytics_monthly_stats;

-- changeset angelchang:22
CREATE TABLE IF NOT EXISTS "clinic_default_analytics_quarterly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "country_iso_2" TEXT NOT NULL, "is_pseudo_included" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "quarter" INTEGER NOT NULL, "patient" TEXT DEFAULT '{}' NOT NULL, "a1c" TEXT DEFAULT '{}' NOT NULL, "ldlc" TEXT DEFAULT '{}' NOT NULL, "egfr" TEXT DEFAULT '{}' NOT NULL, "uacr" TEXT DEFAULT '{}' NOT NULL, "fbg" TEXT DEFAULT '{}' NOT NULL, "pre_meal_bg" TEXT DEFAULT '{}' NOT NULL, "post_meal_bg" TEXT DEFAULT '{}' NOT NULL, "bp" TEXT DEFAULT '{}' NOT NULL, "oral_medicine" TEXT DEFAULT '[]' NOT NULL, "injectable_insulin" TEXT DEFAULT '[]' NOT NULL, "diabetes_medication_combination" TEXT DEFAULT '[]' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "clinic_default_analytics_quarterly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_default_analytics_quarterly_stats;

-- changeset angelchang:23
CREATE TABLE IF NOT EXISTS "clinic_default_analytics_yearly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "country_iso_2" TEXT NOT NULL, "is_pseudo_included" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "patient" TEXT DEFAULT '{}' NOT NULL, "a1c" TEXT DEFAULT '{}' NOT NULL, "ldlc" TEXT DEFAULT '{}' NOT NULL, "egfr" TEXT DEFAULT '{}' NOT NULL, "uacr" TEXT DEFAULT '{}' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "clinic_default_analytics_yearly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_default_analytics_yearly_stats;

-- changeset angelchang:24
CREATE TABLE IF NOT EXISTS "clinic_discount" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "sponsor" TEXT, "program" TEXT, "status" TEXT NOT NULL, "price" INTEGER DEFAULT 0 NOT NULL, "cycle" INTEGER DEFAULT 1 NOT NULL, "duration" INTEGER DEFAULT 1 NOT NULL, "clinic_id" INTEGER, "plan_id" INTEGER, "cycle_unit" TEXT DEFAULT 'Month', CONSTRAINT "clinic_discount_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_discount;

-- changeset angelchang:25
CREATE TABLE IF NOT EXISTS "clinic_discount_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "code" TEXT NOT NULL, "status" TEXT NOT NULL, "discount_id" INTEGER NOT NULL, "subscription_id" INTEGER, "user_id" INTEGER, CONSTRAINT "clinic_discount_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_discount_code;

-- changeset angelchang:26
CREATE TABLE IF NOT EXISTS "clinic_exam_chart" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "item_keys" TEXT[] NOT NULL, "type" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "clinic_exam_chart_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_exam_chart;

-- changeset angelchang:27
CREATE TABLE IF NOT EXISTS "clinic_exam_unit" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "hba1c" TEXT DEFAULT '%' NOT NULL, "total_cholesterol" TEXT DEFAULT 'mg/dL' NOT NULL, "ldl_c" TEXT DEFAULT 'mg/dL' NOT NULL, "hdl_c" TEXT DEFAULT 'mg/dL' NOT NULL, "tg" TEXT DEFAULT 'mg/dL' NOT NULL, "creatinine" TEXT DEFAULT 'mg/dL' NOT NULL, "urine_acr" TEXT DEFAULT 'mg/g' NOT NULL, "urine_pcr" TEXT DEFAULT 'mg/g' NOT NULL, "bun" TEXT DEFAULT 'mg/dL' NOT NULL, "glucose_ac" TEXT DEFAULT 'mg/dL' NOT NULL, "glucose_2hr_pc" TEXT DEFAULT 'mg/dL' NOT NULL, "hemoglobin" TEXT DEFAULT 'g/dL' NOT NULL, "mchc" TEXT DEFAULT 'g/dL' NOT NULL, "uric_acid" TEXT DEFAULT 'mg/dL' NOT NULL, "microalbumin" TEXT DEFAULT 'mg/L' NOT NULL, "creatinine_urine" TEXT DEFAULT 'mg/dL' NOT NULL, "ast" TEXT DEFAULT 'U/L' NOT NULL, "alt" TEXT DEFAULT 'U/L' NOT NULL, "ggt" TEXT DEFAULT 'U/L' NOT NULL, "total_protein" TEXT DEFAULT 'g/dL' NOT NULL, "albumin" TEXT DEFAULT 'g/dL' NOT NULL, "globulin" TEXT DEFAULT 'g/dL' NOT NULL, "total_bilirubin" TEXT DEFAULT 'mg/dL' NOT NULL, "direct_bilirubin" TEXT DEFAULT 'mg/dL' NOT NULL, "alp" TEXT DEFAULT 'U/L' NOT NULL, "amylase" TEXT DEFAULT 'U/L' NOT NULL, "ck" TEXT DEFAULT 'U/L' NOT NULL, "ldh" TEXT DEFAULT 'U/L' NOT NULL, "cortisol" TEXT DEFAULT 'µg/dL' NOT NULL, "tsh" TEXT DEFAULT 'µIU/mL' NOT NULL, "t3_triiodothyronine" TEXT DEFAULT 'ng/dL' NOT NULL, "t4_thyroxine" TEXT DEFAULT 'µg/dL' NOT NULL, "free_t4" TEXT DEFAULT 'ng/dL' NOT NULL, "pth" TEXT DEFAULT 'pg/mL' NOT NULL, "sodium" TEXT DEFAULT 'mmol/L' NOT NULL, "potassium" TEXT DEFAULT 'mmol/L' NOT NULL, "calcium" TEXT DEFAULT 'mmol/L' NOT NULL, "magnesium" TEXT DEFAULT 'mmol/L' NOT NULL, "phosphate" TEXT DEFAULT 'mg/dL' NOT NULL, "iron" TEXT DEFAULT 'µg/dL' NOT NULL, "tibc" TEXT DEFAULT 'µg/dL' NOT NULL, "ferritin" TEXT DEFAULT 'ng/mL' NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "clinic_exam_unit_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_exam_unit;

-- changeset angelchang:28
CREATE TABLE IF NOT EXISTS "clinic_feature" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "name" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "clinic_feature_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_feature;

-- changeset angelchang:29
CREATE TABLE IF NOT EXISTS "clinic_group" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "status" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, "category" VARCHAR DEFAULT 'custom_group', CONSTRAINT "clinic_group_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_group;

-- changeset angelchang:30
CREATE TABLE IF NOT EXISTS "clinic_group_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "clinic_group_id" INTEGER NOT NULL, CONSTRAINT "clinic_group_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_group_connect;

-- changeset angelchang:31
CREATE TABLE IF NOT EXISTS "clinic_loyalty_rule" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "name" TEXT NOT NULL, "points" INTEGER DEFAULT 0 NOT NULL, "picture_url" TEXT, "translations" TEXT DEFAULT '{}' NOT NULL, "action" TEXT, "description" TEXT, "brand" TEXT, "medfirst_qrcode" TEXT, "wellcare_qrcode" TEXT, "comment" TEXT, "remark" TEXT, "factor" INTEGER NOT NULL, "allow_store_code_categories" TEXT[] DEFAULT ARRAY[]::character varying[], "clinic_id" INTEGER NOT NULL, "dingding_qrcode" TEXT, "other_stores_qrcode" TEXT, CONSTRAINT "clinic_loyalty_rule_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_loyalty_rule;

-- changeset angelchang:32
CREATE TABLE IF NOT EXISTS "clinic_loyalty_transaction" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "points" INTEGER DEFAULT 0 NOT NULL, "store_code" TEXT, "remark" TEXT, "user_id" INTEGER NOT NULL, "diary_id" INTEGER, "clinic_loyalty_rule_id" INTEGER, "clinic_id" INTEGER NOT NULL, "care_connect_id" INTEGER, "redemption_id" INTEGER, "comment" TEXT, CONSTRAINT "clinic_loyalty_transaction_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_loyalty_transaction;

-- changeset angelchang:33
CREATE TABLE IF NOT EXISTS "clinic_mark" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "updated_by_id" INTEGER NOT NULL, CONSTRAINT "clinic_mark_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_mark;

-- changeset angelchang:34
CREATE TABLE IF NOT EXISTS "clinic_medicine" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "app_display_name" VARCHAR NOT NULL, "pm_display_name" VARCHAR, "medicine_type" VARCHAR NOT NULL, "schedule" TEXT DEFAULT '{}' NOT NULL, "unit" VARCHAR NOT NULL, "clinic_id" INTEGER NOT NULL, "updated_by" INTEGER, "oral_medicine_id" INTEGER, "insulin_id" INTEGER, "uid" INTEGER, "medicine_code" VARCHAR, "emr_record_id" INTEGER, "user_prescription_qr_code_id" INTEGER, "custom_medicine_code" VARCHAR, "deprecated" BOOLEAN DEFAULT FALSE, CONSTRAINT "clinic_medicine_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_medicine;

-- changeset angelchang:35
CREATE TABLE IF NOT EXISTS "clinic_message_images" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "url" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "checksum" TEXT NOT NULL, CONSTRAINT "clinic_message_images_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_message_images;

-- changeset angelchang:36
CREATE TABLE IF NOT EXISTS "clinic_message_pdf" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "filename" TEXT NOT NULL, "url" TEXT NOT NULL, "checksum" TEXT NOT NULL, CONSTRAINT "clinic_message_pdf_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_message_pdf;

-- changeset angelchang:37
CREATE TABLE IF NOT EXISTS "clinic_message_templates" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message" TEXT NOT NULL, "clinic_id" INTEGER, "status" TEXT, "user_id" INTEGER NOT NULL, CONSTRAINT "clinic_message_templates_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_message_templates;

-- changeset angelchang:38
CREATE TABLE IF NOT EXISTS "clinic_meter_program" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "vendor" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "clinic_meter_program_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_meter_program;

-- changeset angelchang:39
CREATE TABLE IF NOT EXISTS "clinic_meter_program_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "date" date NOT NULL, "patient_redeem_times" INTEGER DEFAULT 0 NOT NULL, "new_joined_balance" INTEGER DEFAULT 0 NOT NULL, "new_joined_redeem" INTEGER DEFAULT 0 NOT NULL, "points_balance" INTEGER DEFAULT 0 NOT NULL, "points_redeem" INTEGER DEFAULT 0 NOT NULL, "clinic_id" INTEGER NOT NULL, "clinic_meter_program_id" INTEGER NOT NULL, CONSTRAINT "clinic_meter_program_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_meter_program_history;

-- changeset angelchang:40
CREATE TABLE IF NOT EXISTS "clinic_meter_program_transaction" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "points" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "clinic_meter_program_id" INTEGER NOT NULL, "clinic_loyalty_transaction_id" INTEGER, CONSTRAINT "clinic_meter_program_transaction_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_meter_program_transaction;

-- changeset angelchang:41
CREATE TABLE IF NOT EXISTS "clinic_note" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "comment" TEXT NOT NULL, "status" VARCHAR NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "created_by" INTEGER NOT NULL, CONSTRAINT "clinic_note_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_note;

-- changeset angelchang:42
CREATE TABLE IF NOT EXISTS "clinic_note_tag" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "value" INTEGER NOT NULL, "clinic_note_id" INTEGER NOT NULL, CONSTRAINT "clinic_note_tag_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_note_tag;

-- changeset angelchang:43
CREATE TABLE IF NOT EXISTS "clinic_notification_setting" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "notification_enabled" BOOLEAN, "automated_analysis_enabled" BOOLEAN, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "medication_reminder_enabled" BOOLEAN DEFAULT TRUE, CONSTRAINT "clinic_notification_setting_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_notification_setting;

-- changeset angelchang:44
CREATE TABLE IF NOT EXISTS "clinic_plan" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "price" INTEGER DEFAULT 0 NOT NULL, "status" TEXT NOT NULL, "details" TEXT DEFAULT '[]' NOT NULL, "clinic_id" INTEGER NOT NULL, "special_offer" INTEGER DEFAULT 0 NOT NULL, "cycle" INTEGER DEFAULT 1 NOT NULL, "description" TEXT, "slug" VARCHAR, "coordinates" TEXT DEFAULT '[]' NOT NULL, "only_once" BOOLEAN DEFAULT FALSE, "state" VARCHAR DEFAULT 'open', "video_url" VARCHAR, "syllabus" TEXT, "suits" TEXT DEFAULT '[]' NOT NULL, "expired_message" TEXT, "cover_url" VARCHAR, "key_points" TEXT DEFAULT '[]' NOT NULL, "currency_code" TEXT, "cycle_unit" TEXT DEFAULT 'Month', "hide_price" BOOLEAN DEFAULT FALSE, CONSTRAINT "clinic_plan_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_plan;

-- changeset angelchang:45
CREATE TABLE IF NOT EXISTS "clinic_plan_waiting" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "plan_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "clinic_plan_waiting_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_plan_waiting;

-- changeset angelchang:46
CREATE TABLE IF NOT EXISTS "clinic_point" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "points" INTEGER DEFAULT 0 NOT NULL, "store_code" VARCHAR, "status" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "diary_id" INTEGER, "reward_id" INTEGER, "care_connect_id" INTEGER, "clinic_id" INTEGER NOT NULL, "remark" VARCHAR, "redemption_id" INTEGER, "a1c_id" INTEGER, CONSTRAINT "clinic_point_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_point;

-- changeset angelchang:47
CREATE TABLE IF NOT EXISTS "clinic_prescription" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "start_date" date NOT NULL, "expire_days" INTEGER NOT NULL, "days_per_fill" INTEGER, "medicines_data" TEXT DEFAULT '[]' NOT NULL, "clinic_id" INTEGER NOT NULL, "updated_by" INTEGER, "user_id" INTEGER NOT NULL, "parent_clinic_prescription_id" INTEGER, "outcome" TEXT DEFAULT '{}' NOT NULL, "clinic_note_id" INTEGER, "emr_record_id" INTEGER, "user_prescription_qr_code_id" INTEGER, CONSTRAINT "clinic_prescription_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_prescription;

-- changeset angelchang:48
CREATE TABLE IF NOT EXISTS "clinic_program" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" VARCHAR NOT NULL, "start_date" date NOT NULL, "months" INTEGER DEFAULT 0 NOT NULL, "reason" TEXT, "clinic_id" INTEGER NOT NULL, "updated_by" INTEGER, "sponsor_id" INTEGER, "join_date" date, CONSTRAINT "clinic_program_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_program;

-- changeset angelchang:49
CREATE TABLE IF NOT EXISTS "clinic_promotion_image" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "order_id" INTEGER, "image_name" TEXT, "home_page" BOOLEAN DEFAULT FALSE, "temporary_flag" BOOLEAN DEFAULT TRUE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "clinic_promotion_image_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_promotion_image;

-- changeset angelchang:50
CREATE TABLE IF NOT EXISTS "clinic_promotion_message_queue" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "content" TEXT NOT NULL, "send_type" TEXT, "status" TEXT, "retry_number" INTEGER, "send_date" TIMESTAMP WITHOUT TIME ZONE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "clinic_promotion_message_queue_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_promotion_message_queue;

-- changeset angelchang:51
CREATE TABLE IF NOT EXISTS "clinic_promotion_rating" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "rating" INTEGER, "content" TEXT, "anonymous" BOOLEAN DEFAULT TRUE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "clinic_promotion_rating_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_promotion_rating;

-- changeset angelchang:52
CREATE TABLE IF NOT EXISTS "clinic_redemption" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "data" TEXT DEFAULT '{}', CONSTRAINT "clinic_redemption_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_redemption;

-- changeset angelchang:53
CREATE TABLE IF NOT EXISTS "clinic_reminder" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "examine_at" date, "status" VARCHAR NOT NULL, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "educator_id" INTEGER, "data" TEXT DEFAULT '{}', "emr_record_id" INTEGER, "category" VARCHAR, CONSTRAINT "clinic_reminder_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_reminder;

-- changeset angelchang:54
CREATE TABLE IF NOT EXISTS "clinic_reminder_config" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "category" VARCHAR NOT NULL, "message" VARCHAR NOT NULL, "status" VARCHAR NOT NULL, "alert_day" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "clinic_reminder_config_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_reminder_config;

-- changeset angelchang:55
CREATE TABLE IF NOT EXISTS "clinic_reward" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "points" INTEGER DEFAULT 0 NOT NULL, "status" TEXT NOT NULL, "description" TEXT, "clinic_id" INTEGER NOT NULL, "medfirst_qrcode" TEXT, "wellcare_qrcode" TEXT, "action" TEXT, "picture_url" TEXT, "translations" TEXT DEFAULT '{}' NOT NULL, "brand" TEXT, "comment" TEXT, "allow_store_code_categories" TEXT[] DEFAULT ARRAY[]::character varying[], "dingding_qrcode" TEXT, "other_stores_qrcode" TEXT, CONSTRAINT "clinic_reward_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_reward;

-- changeset angelchang:56
CREATE TABLE IF NOT EXISTS "clinic_rich_content_image" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "sequence" INTEGER DEFAULT 0 NOT NULL, "slug" TEXT NOT NULL, "type" TEXT, "clinic_rich_content_message_id" INTEGER NOT NULL, CONSTRAINT "clinic_rich_content_image_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_rich_content_image;

-- changeset angelchang:57
CREATE TABLE IF NOT EXISTS "clinic_rich_content_message" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "sequence" INTEGER DEFAULT 0 NOT NULL, "title" TEXT NOT NULL, "short_content" TEXT, "content" TEXT, "data" TEXT DEFAULT '{}' NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "clinic_rich_content_message_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_rich_content_message;

-- changeset angelchang:58
CREATE TABLE IF NOT EXISTS "clinic_rich_content_receive" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "clinic_rich_content_message_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "clinic_rich_content_receive_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_rich_content_receive;

-- changeset angelchang:59
CREATE TABLE IF NOT EXISTS "clinic_sponsor" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" VARCHAR NOT NULL, "key" VARCHAR, "months" INTEGER DEFAULT 0 NOT NULL, "status" TEXT NOT NULL, "updated_by" INTEGER, CONSTRAINT "clinic_sponsor_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_sponsor;

-- changeset angelchang:60
CREATE TABLE IF NOT EXISTS "clinic_subscription" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "start_date" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "due_date" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "status" TEXT NOT NULL, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "plan_id" INTEGER NOT NULL, "reason" VARCHAR DEFAULT '', "feedback" TEXT, "paid_price" INTEGER DEFAULT 0, "remark" VARCHAR, CONSTRAINT "clinic_subscription_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_subscription;

-- changeset angelchang:61
CREATE TABLE IF NOT EXISTS "coach_feedback" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "plan_id" INTEGER, "user_id" INTEGER, "type" VARCHAR NOT NULL, "comment" TEXT, "value" INTEGER, CONSTRAINT "coach_feedback_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE coach_feedback;

-- changeset angelchang:62
CREATE TABLE IF NOT EXISTS "collaboration_content" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "clinic_id" INTEGER NOT NULL, "message_content" TEXT, "content_menu" TEXT, CONSTRAINT "collaboration_content_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE collaboration_content;

-- changeset angelchang:63
CREATE TABLE IF NOT EXISTS "contacts" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER, "affiliation" TEXT NOT NULL, "email" TEXT NOT NULL, "name" TEXT NOT NULL, "subject" TEXT NOT NULL, "comment" TEXT NOT NULL, "is_pr" BOOLEAN DEFAULT FALSE, "lang" VARCHAR, CONSTRAINT "contacts_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE contacts;

-- changeset angelchang:64
CREATE TABLE IF NOT EXISTS "country_analytics_monthly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "country_iso_2" TEXT NOT NULL, "is_pseudo_included" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "month" INTEGER NOT NULL, "a1c" TEXT DEFAULT '{}' NOT NULL, "ldlc" TEXT DEFAULT '{}' NOT NULL, "egfr" TEXT DEFAULT '{}' NOT NULL, "uacr" TEXT DEFAULT '{}' NOT NULL, "fbg" TEXT DEFAULT '{}' NOT NULL, "pre_meal_bg" TEXT DEFAULT '{}' NOT NULL, "post_meal_bg" TEXT DEFAULT '{}' NOT NULL, "bp" TEXT DEFAULT '{}' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "country_analytics_monthly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE country_analytics_monthly_stats;

-- changeset angelchang:65
CREATE TABLE IF NOT EXISTS "country_analytics_quarterly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "country_iso_2" TEXT NOT NULL, "is_pseudo_included" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "quarter" INTEGER NOT NULL, "a1c" TEXT DEFAULT '{}' NOT NULL, "ldlc" TEXT DEFAULT '{}' NOT NULL, "egfr" TEXT DEFAULT '{}' NOT NULL, "uacr" TEXT DEFAULT '{}' NOT NULL, "fbg" TEXT DEFAULT '{}' NOT NULL, "pre_meal_bg" TEXT DEFAULT '{}' NOT NULL, "post_meal_bg" TEXT DEFAULT '{}' NOT NULL, "bp" TEXT DEFAULT '{}' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "country_analytics_quarterly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE country_analytics_quarterly_stats;

-- changeset angelchang:66
CREATE TABLE IF NOT EXISTS "country_analytics_yearly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "country_iso_2" TEXT NOT NULL, "is_pseudo_included" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "a1c" TEXT DEFAULT '{}' NOT NULL, "ldlc" TEXT DEFAULT '{}' NOT NULL, "egfr" TEXT DEFAULT '{}' NOT NULL, "uacr" TEXT DEFAULT '{}' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "country_analytics_yearly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE country_analytics_yearly_stats;

-- changeset angelchang:67
CREATE TABLE IF NOT EXISTS "custom_diary_tag" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "type" VARCHAR NOT NULL, "status" VARCHAR NOT NULL, "data" TEXT DEFAULT '{}', "filename" TEXT, "user_id" INTEGER NOT NULL, CONSTRAINT "custom_diary_tag_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE custom_diary_tag;

-- changeset angelchang:68
CREATE TABLE IF NOT EXISTS "custom_medicine" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "medicine_type" VARCHAR NOT NULL, "unit" VARCHAR NOT NULL, "custom_unit" VARCHAR, "user_id" INTEGER NOT NULL, "is_preference" BOOLEAN DEFAULT TRUE, "status" VARCHAR DEFAULT 'active', "clinic_medicine_id" INTEGER, "medicine_code" TEXT, "medicine_code_type" TEXT, "nhi_record_id" INTEGER, CONSTRAINT "custom_medicine_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE custom_medicine;

-- changeset angelchang:69
CREATE TABLE IF NOT EXISTS "daily_step" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "recorded_date" date NOT NULL, "user_id" INTEGER NOT NULL, "data" TEXT DEFAULT '{}', CONSTRAINT "daily_step_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE daily_step;

-- changeset angelchang:70
CREATE TABLE IF NOT EXISTS "dashboard_cache" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER NOT NULL, "ctype" INTEGER NOT NULL, "hypos" INTEGER, "hypers" INTEGER, "hypo_ratio" numeric, "hyper_ratio" numeric, "lowest_glucose_value" numeric, "lowest_glucose_value_threshold" numeric, "highest_glucose_value" numeric, "highest_glucose_value_threshold" numeric, "count" INTEGER DEFAULT 0, "before_meal_count" INTEGER, "before_meal_average" numeric, "after_meal_count" INTEGER, "after_meal_average" numeric, "bedtime_count" INTEGER, "bedtime_average" numeric, CONSTRAINT "dashboard_cache_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE dashboard_cache;

-- changeset angelchang:71
CREATE TABLE IF NOT EXISTS "dashboard_setting" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "min_hypo_count_red" INTEGER NOT NULL, "min_hyper_count_red" INTEGER NOT NULL, "lower_limit_red" numeric NOT NULL, "higher_limit_red" numeric NOT NULL, "min_hypo_count_yellow" INTEGER NOT NULL, "min_hyper_count_yellow" INTEGER NOT NULL, "lower_limit_yellow" numeric NOT NULL, "higher_limit_yellow" numeric NOT NULL, "readingless_period_grey" INTEGER NOT NULL, "period" INTEGER NOT NULL, "sort" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, "unit" VARCHAR DEFAULT 'mg/dL' NOT NULL, "show_insulin" BOOLEAN DEFAULT FALSE, "alert_view_all" BOOLEAN DEFAULT TRUE, "below_70_bg_cgm_percent_red" INTEGER, "below_54_bg_cgm_percent_red" INTEGER, "above_250_bg_cgm_percent_red" INTEGER, "above_180_bg_cgm_percent_red" INTEGER, "below_70_bg_cgm_percent_yellow" INTEGER, "below_54_bg_cgm_percent_yellow" INTEGER, "above_250_bg_cgm_percent_yellow" INTEGER, "above_180_bg_cgm_percent_yellow" INTEGER, CONSTRAINT "dashboard_setting_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE dashboard_setting;

-- changeset angelchang:72
CREATE TABLE IF NOT EXISTS "dashboard_status" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "care_connect_id" INTEGER, CONSTRAINT "dashboard_status_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE dashboard_status;

-- changeset angelchang:73
CREATE TABLE IF NOT EXISTS "diary" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "recorded_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "glucose_value" numeric NOT NULL, "unit" VARCHAR DEFAULT '' NOT NULL, "status" TEXT NOT NULL, "sport_duration" INTEGER DEFAULT 0, "detail" TEXT, "user_id" INTEGER NOT NULL, "user_meter_id" INTEGER, "medication" BOOLEAN DEFAULT FALSE, "setting_id" INTEGER, "sync_time" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "product_id" INTEGER, "meter_diff_time" INTEGER DEFAULT 0, "carbs" numeric DEFAULT 0, "tzoffset" INTEGER DEFAULT 0, "is_manually" BOOLEAN DEFAULT FALSE, "state" TEXT DEFAULT 'other' NOT NULL, "meal_type" TEXT NOT NULL, "systolic" INTEGER DEFAULT -1, "diastolic" INTEGER DEFAULT -1, "pulse" INTEGER DEFAULT -1, "weight" numeric DEFAULT -1, "body_fat" numeric DEFAULT -1, "height" numeric, "custom_medicines" TEXT DEFAULT '{}', "is_healthkit" BOOLEAN DEFAULT FALSE, "custom_sports" TEXT DEFAULT '{}', "custom_foods" TEXT DEFAULT '{}', "latest_weight" numeric, "synced" VARCHAR DEFAULT '[]' NOT NULL, "modern_foods" TEXT DEFAULT '[]', "ihb" BOOLEAN DEFAULT FALSE, "afib" BOOLEAN DEFAULT FALSE, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "wearable_type" TEXT, "glucose_value_in_mg_dl" INTEGER, "batch_uuid" VARCHAR, "batch_position" INTEGER, CONSTRAINT "diary_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE diary;

-- changeset angelchang:74
CREATE TABLE IF NOT EXISTS "diary_attachment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "url" TEXT, "diary_id" INTEGER NOT NULL, "status" TEXT DEFAULT 'active' NOT NULL, "filename" TEXT NOT NULL, "predict_is_food" BOOLEAN, "probability" numeric, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "diary_attachment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE diary_attachment;

-- changeset angelchang:75
CREATE TABLE IF NOT EXISTS "diary_batch_record" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "batch_uuid" VARCHAR NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "diary_batch_record_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE diary_batch_record;

-- changeset angelchang:76
CREATE TABLE IF NOT EXISTS "diary_logged_data_cache" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "recorded_date" date NOT NULL, "user_id" INTEGER NOT NULL, "data_types" TEXT DEFAULT '[]', CONSTRAINT "diary_logged_data_cache_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE diary_logged_data_cache;

-- changeset angelchang:77
CREATE TABLE IF NOT EXISTS "diary_modification" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "active" BOOLEAN NOT NULL, "type" TEXT NOT NULL, "state" TEXT, "meal_type" TEXT, "diary_id" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, CONSTRAINT "diary_modification_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE diary_modification;

-- changeset angelchang:78
CREATE TABLE IF NOT EXISTS "diary_tag" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "type" TEXT, "diary_id" INTEGER NOT NULL, "tag_value" INTEGER NOT NULL, "serving" numeric DEFAULT 0 NOT NULL, "intensity" VARCHAR, CONSTRAINT "diary_tag_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE diary_tag;

-- changeset angelchang:79
CREATE TABLE IF NOT EXISTS "disease" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" VARCHAR NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "disease_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE disease;

-- changeset angelchang:80
CREATE TABLE IF NOT EXISTS "email_reminder_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "email_reminder_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE email_reminder_event;

-- changeset angelchang:81
CREATE TABLE IF NOT EXISTS "emr_record" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "medical_institution_code" VARCHAR NOT NULL, "patient_national_id" VARCHAR NOT NULL, "category" VARCHAR NOT NULL, "vendor" VARCHAR NOT NULL, "date" date NOT NULL, "data" TEXT DEFAULT '{}' NOT NULL, "exported" BOOLEAN DEFAULT FALSE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "patient_chart_number" VARCHAR, "uid" VARCHAR, CONSTRAINT "emr_record_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE emr_record;

-- changeset angelchang:82
CREATE TABLE IF NOT EXISTS "examination" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "hba1c" numeric, "total_cholesterol" numeric, "ldl_c" numeric, "hdl_c" numeric, "tg" numeric, "creatinine" numeric, "egfr" numeric, "gpt" VARCHAR(128), "urine_acr" numeric, "urine_pcr" numeric, "ckd_stage" TEXT, "alb" numeric, "bun" numeric, "type" TEXT, "diagnosed_at" date DEFAULT NOW(), "care_connect_id" INTEGER NOT NULL, "created_by" INTEGER, "fpg" numeric, "ppg" numeric, "got" numeric, "lab_result_id" INTEGER, "units" TEXT DEFAULT '{}', "source_id" INTEGER, "lab_id" INTEGER, "object_id" VARCHAR(255) DEFAULT 'NULL::character varying', "hemoglobin" numeric, "hematocrit" numeric, "mcv" numeric, "mch" numeric, "mchc" numeric, "rdw_cv" numeric, "rdw_sd" numeric, "plt_count" numeric, "neutrophil_pct" numeric, "lymphocyte_pct" numeric, "monocyte_pct" numeric, "eosinophil_pct" numeric, "uric_acid" numeric, "microalbumin" numeric, "specific_gravity" numeric, "glucose_urine" VARCHAR(255) DEFAULT 'NULL::character varying', "protein_urine" VARCHAR(255) DEFAULT 'NULL::character varying', "bilirubin_urine" VARCHAR(255) DEFAULT 'NULL::character varying', "urobilinogen" VARCHAR(255) DEFAULT 'NULL::character varying', "creatinine_urine" numeric, "wbc_urine" VARCHAR(255) DEFAULT 'NULL::character varying', "rbc_urine" VARCHAR(255) DEFAULT 'NULL::character varying', "ggt" numeric, "total_protein" numeric, "globulin" numeric, "total_bilirubin" numeric, "direct_bilirubin" numeric, "anti_hbs" VARCHAR(255) DEFAULT 'NULL::character varying', "hbsag" VARCHAR(255) DEFAULT 'NULL::character varying', "hbeag" VARCHAR(255) DEFAULT 'NULL::character varying', "anti_hcv" VARCHAR(255) DEFAULT 'NULL::character varying', "alp" numeric, "amylase" numeric, "ck" numeric, "ldh" numeric, "cortisol" numeric, "tsh" numeric, "t3_triiodothyronine" numeric, "t4_thyroxine" numeric, "free_t4" numeric, "pth" numeric, "sodium" numeric, "potassium" numeric, "calcium" numeric, "magnesium" numeric, "phosphate" numeric, "iron" numeric, "tibc" numeric, "ferritin" numeric, "wbc_count" numeric, "rbc_count" numeric, "basophil_pct" numeric, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "note" TEXT, CONSTRAINT "examination_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE examination;

-- changeset angelchang:83
CREATE TABLE IF NOT EXISTS "feature_toggle" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "name" TEXT NOT NULL, "description" TEXT NOT NULL, CONSTRAINT "feature_toggle_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE feature_toggle;

-- changeset angelchang:84
CREATE TABLE IF NOT EXISTS "food_classification" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "is_food" BOOLEAN, "tags" TEXT DEFAULT '[]', "user_id" INTEGER NOT NULL, "diary_attachment_id" INTEGER NOT NULL, "is_meter" BOOLEAN, "custom_tags" TEXT DEFAULT '[]', "food_names" TEXT DEFAULT '[]', "rating" TEXT DEFAULT '{}', "dish" VARCHAR, CONSTRAINT "food_classification_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE food_classification;

-- changeset angelchang:85
CREATE TABLE IF NOT EXISTS "food_database" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "vendor" VARCHAR, "status" VARCHAR NOT NULL, "source_id" INTEGER, "food_name" VARCHAR NOT NULL, "brand_name" VARCHAR, "locale" VARCHAR, "default_unit" VARCHAR, "nutritions" TEXT DEFAULT '{}', "food_groups" TEXT DEFAULT '{}', "ingredients" TEXT DEFAULT '[]', "filenames" TEXT DEFAULT '[]', "shared" BOOLEAN DEFAULT FALSE, "external_link" VARCHAR DEFAULT '', "user_id" INTEGER, "barcode" VARCHAR DEFAULT '', CONSTRAINT "food_database_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE food_database;

-- changeset angelchang:86
CREATE TABLE IF NOT EXISTS "food_database_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER NOT NULL, "diary_id" INTEGER NOT NULL, "food_database_id" INTEGER NOT NULL, "active" BOOLEAN DEFAULT TRUE, CONSTRAINT "food_database_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE food_database_connect;

-- changeset angelchang:87
CREATE TABLE IF NOT EXISTS "food_database_favorited" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "favorited" BOOLEAN DEFAULT FALSE, "user_id" INTEGER NOT NULL, "food_database_id" INTEGER NOT NULL, CONSTRAINT "food_database_favorited_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE food_database_favorited;

-- changeset angelchang:88
CREATE TABLE IF NOT EXISTS "friend_notification_setting" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "from_id" INTEGER NOT NULL, "to_id" INTEGER NOT NULL, "beyond_target_range" TEXT DEFAULT 'on' NOT NULL, "not_updated_for_days" INTEGER DEFAULT 3 NOT NULL, "beyond_target_range_via_email" BOOLEAN DEFAULT FALSE, "not_updated_for_days_via_email" INTEGER DEFAULT 0, "new_data_synced" BOOLEAN DEFAULT TRUE, "new_data_synced_via_email" BOOLEAN DEFAULT FALSE, "bp_beyond_target_range" VARCHAR DEFAULT 'on' NOT NULL, "bp_not_updated_for_days" INTEGER DEFAULT 3 NOT NULL, CONSTRAINT "friend_notification_setting_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE friend_notification_setting;

-- changeset angelchang:89
CREATE TABLE IF NOT EXISTS "friends" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "from_id" INTEGER NOT NULL, "to_id" INTEGER NOT NULL, CONSTRAINT "friends_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE friends;

-- changeset angelchang:90
CREATE TABLE IF NOT EXISTS "fubon_insurance_promotion" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "user_identity" VARCHAR NOT NULL, "is_uat" BOOLEAN NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "fubon_insurance_promotion_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE fubon_insurance_promotion;

-- changeset angelchang:91
CREATE TABLE IF NOT EXISTS "h2c_activation_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "code" VARCHAR NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "h2c_activation_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE h2c_activation_code;

-- changeset angelchang:92
CREATE TABLE IF NOT EXISTS "h2c_cache_sync_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "sync_history_id" INTEGER NOT NULL, "records" TEXT DEFAULT '{}' NOT NULL, "cache_data" TEXT DEFAULT '{}' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "h2c_cache_sync_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE h2c_cache_sync_history;

-- changeset angelchang:93
CREATE TABLE IF NOT EXISTS "h2c_device_sync_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "record_from" TIMESTAMP WITHOUT TIME ZONE, "record_to" TIMESTAMP WITHOUT TIME ZONE, "serial_number" TEXT NOT NULL, "refer_number" INTEGER, "count" INTEGER DEFAULT 0 NOT NULL, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "updated_by" INTEGER NOT NULL, "status" TEXT DEFAULT 'pending' NOT NULL, CONSTRAINT "h2c_device_sync_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE h2c_device_sync_history;

-- changeset angelchang:94
CREATE TABLE IF NOT EXISTS "h2c_patient_consent" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "phone_number" TEXT, "consent_slug" TEXT, "code" TEXT, "clinic_id" INTEGER NOT NULL, "user_id" INTEGER, "type" TEXT NOT NULL, "status" TEXT NOT NULL, "consented_at" TIMESTAMP WITHOUT TIME ZONE, "fingerprint" TEXT, "user_type" TEXT, CONSTRAINT "h2c_patient_consent_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE h2c_patient_consent;

-- changeset angelchang:95
CREATE TABLE IF NOT EXISTS "h2c_sync_log" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER NOT NULL, "log" TEXT NOT NULL, "category" TEXT NOT NULL, "serial_number" TEXT, "refer_number" INTEGER, CONSTRAINT "h2c_sync_log_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE h2c_sync_log;

-- changeset angelchang:96
CREATE TABLE IF NOT EXISTS "h2c_user_token" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "device_id" TEXT NOT NULL, "access_token" TEXT NOT NULL, "user_id" INTEGER, CONSTRAINT "h2c_user_token_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE h2c_user_token;

-- changeset angelchang:97
CREATE TABLE IF NOT EXISTS "health_user" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "first_name" TEXT NOT NULL, "last_name" TEXT, "email" TEXT, "phone_number" TEXT, "gender" TEXT, "birthday" date, "diabetes_type" TEXT DEFAULT 'N/A' NOT NULL, "avatar_id" INTEGER, "weight" numeric, "height" numeric, "weight_unit" TEXT, "height_unit" TEXT, "lang" TEXT, "last_login" TIMESTAMP WITHOUT TIME ZONE, "is_tester" BOOLEAN DEFAULT FALSE, "locale" TEXT, "tzoffset" INTEGER DEFAULT 0, "device_info" TEXT DEFAULT '{}', "onboard_at" TIMESTAMP WITHOUT TIME ZONE, "birthyear" date, "diabetes_duration" TEXT, "diabetes_medication" TEXT, "status" VARCHAR DEFAULT 'active' NOT NULL, "reason_to_use" TEXT DEFAULT '[]', "identity" TEXT, "email_verify" BOOLEAN DEFAULT FALSE NOT NULL, "phone_number_verify" BOOLEAN DEFAULT FALSE NOT NULL, "disease" INT4[], "is_pseudo" BOOLEAN, "country" VARCHAR, CONSTRAINT "health_user_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE health_user;

-- changeset angelchang:98
CREATE TABLE IF NOT EXISTS "heartbeat" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "recorded_at" TIMESTAMP WITHOUT TIME ZONE, "sync_time" TIMESTAMP WITHOUT TIME ZONE, "value" INTEGER NOT NULL, "source" VARCHAR NOT NULL, "user_id" INTEGER, CONSTRAINT "heartbeat_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE heartbeat;

-- changeset angelchang:99
CREATE TABLE IF NOT EXISTS "heartbeat_raw" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "sync_time" TIMESTAMP WITHOUT TIME ZONE, "data" TEXT DEFAULT '{}' NOT NULL, "user_id" INTEGER, CONSTRAINT "heartbeat_raw_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE heartbeat_raw;

-- changeset angelchang:100
CREATE TABLE IF NOT EXISTS "hl_account_link" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "is_revoked" BOOLEAN DEFAULT FALSE, "has_contract" BOOLEAN DEFAULT FALSE, "access_token" TEXT NOT NULL, "refresh_token" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "mylinkx_id" TEXT NOT NULL, CONSTRAINT "hl_account_link_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_account_link;

-- changeset angelchang:101
CREATE TABLE IF NOT EXISTS "hl_cgm_1m_message_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message_type" TEXT NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "hl_cgm_1m_message_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_cgm_1m_message_event;

-- changeset angelchang:102
CREATE TABLE IF NOT EXISTS "hl_cgm_1m_v2_message_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message_type" TEXT NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "hl_cgm_1m_v2_message_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_cgm_1m_v2_message_event;

-- changeset angelchang:103
CREATE TABLE IF NOT EXISTS "hl_cgm_2m_message_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message_type" TEXT NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "hl_cgm_2m_message_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_cgm_2m_message_event;

-- changeset angelchang:104
CREATE TABLE IF NOT EXISTS "hl_cgm_3m_message_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message_type" TEXT NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "hl_cgm_3m_message_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_cgm_3m_message_event;

-- changeset angelchang:105
CREATE TABLE IF NOT EXISTS "hl_cgm_message_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message_type" TEXT NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "hl_cgm_message_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_cgm_message_event;

-- changeset angelchang:106
CREATE TABLE IF NOT EXISTS "hl_cgm_policyholder_account_link" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "is_revoked" BOOLEAN DEFAULT FALSE, "has_contract" BOOLEAN DEFAULT FALSE, "access_token" TEXT NOT NULL, "refresh_token" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "mylinkx_id" TEXT NOT NULL, CONSTRAINT "hl_cgm_policyholder_account_link_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_cgm_policyholder_account_link;

-- changeset angelchang:107
CREATE TABLE IF NOT EXISTS "hl_cgm_policyholder_message_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message_type" TEXT NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "hl_cgm_policyholder_message_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_cgm_policyholder_message_event;

-- changeset angelchang:108
CREATE TABLE IF NOT EXISTS "hl_distributor_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "type" TEXT, "value" TEXT, "user_id" INTEGER NOT NULL, CONSTRAINT "hl_distributor_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hl_distributor_code;

-- changeset angelchang:109
CREATE TABLE IF NOT EXISTS "hourly_steps" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "value" INTEGER NOT NULL, "source" VARCHAR NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "recorded_at" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "hourly_steps_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hourly_steps;

-- changeset angelchang:110
CREATE TABLE IF NOT EXISTS "hub_role" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER, "section" VARCHAR, "permission" VARCHAR, "status" VARCHAR DEFAULT 'active' NOT NULL, "admin_user_id" INTEGER, CONSTRAINT "hub_role_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE hub_role;

-- changeset angelchang:111
CREATE TABLE IF NOT EXISTS "icd_codes" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "icd_code" TEXT NOT NULL, "icd_key" TEXT NOT NULL, "use" BOOLEAN DEFAULT FALSE NOT NULL, "ref_code" TEXT DEFAULT '[]' NOT NULL, "description" TEXT, CONSTRAINT "icd_codes_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE icd_codes;

-- changeset angelchang:112
CREATE TABLE IF NOT EXISTS "insulin" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "type" TEXT NOT NULL, "name" TEXT NOT NULL, "uid" INTEGER DEFAULT 0 NOT NULL, "languages" VARCHAR DEFAULT '[]' NOT NULL, "unit" VARCHAR, "deprecated" BOOLEAN DEFAULT FALSE, "manufacturer" VARCHAR, CONSTRAINT "insulin_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE insulin;

-- changeset angelchang:113
CREATE TABLE IF NOT EXISTS "insulin_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "role" TEXT NOT NULL, "status" TEXT NOT NULL, "serving" numeric, "user_id" INTEGER NOT NULL, "insulin_id" INTEGER NOT NULL, "diary_id" INTEGER, "priming" BOOLEAN DEFAULT FALSE, "is_manually" BOOLEAN DEFAULT TRUE, CONSTRAINT "insulin_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE insulin_connect;

-- changeset angelchang:114
CREATE TABLE IF NOT EXISTS "insurance_customer" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "policy_no" VARCHAR NOT NULL, "belongs" VARCHAR NOT NULL, "effective_date" date, "care_connect_id" INTEGER, "expiry_date" date, "termination_date" date, "transction_type" VARCHAR, CONSTRAINT "insurance_customer_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE insurance_customer;

-- changeset angelchang:115
CREATE TABLE IF NOT EXISTS "insurance_form" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_name" TEXT NOT NULL, "vendor" VARCHAR NOT NULL, "gender" VARCHAR NOT NULL, "age" INTEGER NOT NULL, "phone_number" VARCHAR NOT NULL, "city" TEXT NOT NULL, "district" TEXT, "comment" TEXT, "is_agreed" BOOLEAN DEFAULT FALSE NOT NULL, "source" VARCHAR, "clinic_id" INTEGER, CONSTRAINT "insurance_form_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE insurance_form;

-- changeset angelchang:116
CREATE TABLE IF NOT EXISTS "interactive_answer" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "content" TEXT NOT NULL, "position" INTEGER NOT NULL, "interactive_answer_connect_id" INTEGER NOT NULL, "interactive_question_id" INTEGER NOT NULL, CONSTRAINT "interactive_answer_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_answer;

-- changeset angelchang:117
CREATE TABLE IF NOT EXISTS "interactive_answer_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "interactive_form_connect_id" INTEGER NOT NULL, CONSTRAINT "interactive_answer_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_answer_connect;

-- changeset angelchang:118
CREATE TABLE IF NOT EXISTS "interactive_article" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT, "status" TEXT NOT NULL, "content" TEXT, "language" VARCHAR DEFAULT 'en-us' NOT NULL, CONSTRAINT "interactive_article_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_article;

-- changeset angelchang:119
CREATE TABLE IF NOT EXISTS "interactive_article_attachment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "url" TEXT NOT NULL, "interactive_article_id" INTEGER NOT NULL, CONSTRAINT "interactive_article_attachment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_article_attachment;

-- changeset angelchang:120
CREATE TABLE IF NOT EXISTS "interactive_article_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "interactive_form_id" INTEGER NOT NULL, "interactive_article_id" INTEGER NOT NULL, CONSTRAINT "interactive_article_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_article_connect;

-- changeset angelchang:121
CREATE TABLE IF NOT EXISTS "interactive_form" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT, "status" TEXT NOT NULL, "message" TEXT, "clinic_id" INTEGER NOT NULL, "follow_up_form_id" INTEGER, "title" TEXT, "language" TEXT DEFAULT 'en-us' NOT NULL, "trigger_condition" TEXT, "count_sent" INTEGER DEFAULT 0, "count_completed" INTEGER DEFAULT 0, "mask" BOOLEAN DEFAULT TRUE, "plan_id" INTEGER, "trigger_day" INTEGER, "category" VARCHAR, "can_save" BOOLEAN DEFAULT FALSE, "is_premium" BOOLEAN DEFAULT FALSE, "sequence" INTEGER, "ignore_lang_check" BOOLEAN DEFAULT FALSE, CONSTRAINT "interactive_form_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_form;

-- changeset angelchang:122
CREATE TABLE IF NOT EXISTS "interactive_form_analysis" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "content" TEXT NOT NULL, "interactive_form_id" INTEGER NOT NULL, CONSTRAINT "interactive_form_analysis_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_form_analysis;

-- changeset angelchang:123
CREATE TABLE IF NOT EXISTS "interactive_form_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "scheduled_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "send_by" INTEGER, "send_to" INTEGER NOT NULL, "interactive_form_id" INTEGER NOT NULL, "detail" TEXT DEFAULT '{}' NOT NULL, CONSTRAINT "interactive_form_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_form_connect;

-- changeset angelchang:124
CREATE TABLE IF NOT EXISTS "interactive_question" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "type" TEXT NOT NULL, "title" TEXT, "summary" TEXT NOT NULL, "position" INTEGER, "interactive_form_id" INTEGER NOT NULL, "default_routing_id" INTEGER, "required" BOOLEAN DEFAULT FALSE, "answer_position" INTEGER, CONSTRAINT "interactive_question_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE interactive_question;

-- changeset angelchang:125
CREATE TABLE IF NOT EXISTS "invitation" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "invitee_email" TEXT, "invitee_phone" TEXT, "invite_code" TEXT, "status" TEXT, "inviter_id" INTEGER NOT NULL, "invitee_id" INTEGER, CONSTRAINT "invitation_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE invitation;

-- changeset angelchang:126
CREATE TABLE IF NOT EXISTS "lab" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "status" VARCHAR DEFAULT 'active' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" VARCHAR NOT NULL, "parser" VARCHAR, CONSTRAINT "lab_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE lab;

-- changeset angelchang:127
CREATE TABLE IF NOT EXISTS "lab_clinic_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "status" VARCHAR DEFAULT 'active' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "clinic_id" INTEGER NOT NULL, "lab_id" INTEGER NOT NULL, "identify_field" VARCHAR, "enable_promote_healthpass" BOOLEAN DEFAULT FALSE, "ucl_codes" TEXT[] DEFAULT ARRAY[]::character varying[], "ucl_authenticate_type" TEXT, CONSTRAINT "lab_clinic_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE lab_clinic_connect;

-- changeset angelchang:128
CREATE TABLE IF NOT EXISTS "lab_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "status" VARCHAR DEFAULT 'active' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER NOT NULL, "lab_id" INTEGER NOT NULL, "auth_clinic" INTEGER, CONSTRAINT "lab_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE lab_connect;

-- changeset angelchang:129
CREATE TABLE IF NOT EXISTS "lab_report" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "filename" VARCHAR, "save_name" VARCHAR, "lab_connect_id" INTEGER, "parsed" BOOLEAN DEFAULT FALSE, "lab_id" INTEGER NOT NULL, "data" TEXT, "data_type" VARCHAR, "data_date" date, "lab_clinic_connect_id" INTEGER, "data_params" TEXT DEFAULT '{}', "user_id" INTEGER, CONSTRAINT "lab_report_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE lab_report;

-- changeset angelchang:130
CREATE TABLE IF NOT EXISTS "lab_result" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "data" TEXT, "exported" BOOLEAN DEFAULT FALSE, "lab_report_id" INTEGER NOT NULL, "identify" VARCHAR, "medical_record_number" VARCHAR, "clinic_id" INTEGER, CONSTRAINT "lab_result_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE lab_result;

-- changeset angelchang:131
CREATE TABLE IF NOT EXISTS "libreview_subscription" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "plan_id" INTEGER NOT NULL, "os" VARCHAR(32) NOT NULL, "order_id" VARCHAR(255) NOT NULL, "start_date" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "due_date" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "purchase_date" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "currency" VARCHAR(32) NOT NULL, "amount" FLOAT4 DEFAULT '0' NOT NULL, "reason" TEXT, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "libreview_subscription_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE libreview_subscription;

-- changeset angelchang:132
CREATE TABLE IF NOT EXISTS "libreview_subscription_plan" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "product_id" VARCHAR(255) NOT NULL, "days" INTEGER NOT NULL, "is_active" BOOLEAN DEFAULT FALSE NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "libreview_subscription_plan_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE libreview_subscription_plan;

-- changeset angelchang:133
CREATE TABLE IF NOT EXISTS "magic_qrcode" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" TEXT, "link_code" TEXT NOT NULL, "type" TEXT NOT NULL, "redirect_to" TEXT, "image_url" TEXT, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "count_opens" INTEGER DEFAULT 0 NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER, CONSTRAINT "magic_qrcode_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE magic_qrcode;

-- changeset angelchang:134
CREATE TABLE IF NOT EXISTS "measurement_plan" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "plan" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "clinic_id" INTEGER NOT NULL, "user_id" INTEGER, "name" TEXT NOT NULL, "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "measurement_plan_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE measurement_plan;

-- changeset angelchang:135
CREATE TABLE IF NOT EXISTS "medicine_attachment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "url" TEXT, "filename" VARCHAR, "medicine_type" VARCHAR, "uid" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "medicine_attachment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE medicine_attachment;

-- changeset angelchang:136
CREATE TABLE IF NOT EXISTS "medicine_reminder" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "medicine_type" VARCHAR, "uid" INTEGER NOT NULL, "enabled" BOOLEAN DEFAULT FALSE, "frequency" VARCHAR, "take_time" TEXT DEFAULT '{}', "user_id" INTEGER NOT NULL, CONSTRAINT "medicine_reminder_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE medicine_reminder;

-- changeset angelchang:137
CREATE TABLE IF NOT EXISTS "meter" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "brand" TEXT NOT NULL, "model" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "refer_number" INTEGER NOT NULL, "data_types" VARCHAR DEFAULT '[]' NOT NULL, "max_users" INTEGER DEFAULT 1 NOT NULL, CONSTRAINT "meter_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE meter;

-- changeset angelchang:138
CREATE TABLE IF NOT EXISTS "metlife_customer" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "policy_no" VARCHAR NOT NULL, "premium_enabled" BOOLEAN DEFAULT FALSE, "care_connect_id" INTEGER, CONSTRAINT "metlife_customer_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE metlife_customer;

-- changeset angelchang:139
CREATE TABLE IF NOT EXISTS "moh_log" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "clinic_id" INTEGER, "endpoint" VARCHAR, "params" TEXT, "response" TEXT, "user_id" INTEGER NOT NULL, CONSTRAINT "moh_log_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE moh_log;

-- changeset angelchang:140
CREATE TABLE IF NOT EXISTS "moshi" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "content" TEXT NOT NULL, "attribute" TEXT NOT NULL, "status" TEXT NOT NULL, "sender_id" INTEGER, "receiver_id" INTEGER, "type" TEXT DEFAULT 'friend' NOT NULL, "clinic_id" INTEGER, "action" TEXT DEFAULT '{}', "data" TEXT DEFAULT '{}', "postback" VARCHAR, "moshi_campaign_id" INTEGER, CONSTRAINT "moshi_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE moshi;

-- changeset angelchang:141
CREATE TABLE IF NOT EXISTS "moshi_archive" ("id" INTEGER NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "content" TEXT NOT NULL, "attribute" TEXT NOT NULL, "status" TEXT NOT NULL, "sender_id" INTEGER, "receiver_id" INTEGER, "type" TEXT DEFAULT 'friend' NOT NULL, "clinic_id" INTEGER, "action" TEXT DEFAULT '{}', "data" TEXT DEFAULT '{}', "postback" VARCHAR, "moshi_campaign_id" INTEGER, CONSTRAINT "idx_moshi_archive_id" PRIMARY KEY ("id"));
-- rollback: DROP TABLE moshi_archive;

-- changeset angelchang:142
CREATE TABLE IF NOT EXISTS "moshi_attachment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "url" TEXT, "moshi_id" INTEGER NOT NULL, "checksum" TEXT NOT NULL, "numbers" INTEGER DEFAULT 0, CONSTRAINT "moshi_attachment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE moshi_attachment;

-- changeset angelchang:143
CREATE TABLE IF NOT EXISTS "moshi_attachment_archive" ("id" INTEGER NOT NULL, "url" TEXT, "moshi_id" INTEGER NOT NULL, "checksum" TEXT NOT NULL, "numbers" INTEGER DEFAULT 0, CONSTRAINT "idx_moshi_attachment_archive" PRIMARY KEY ("id"));
-- rollback: DROP TABLE moshi_attachment_archive;

-- changeset angelchang:144
CREATE TABLE IF NOT EXISTS "moshi_campaign" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "query" TEXT, "content" TEXT NOT NULL, "status" TEXT NOT NULL, "is_mask" BOOLEAN DEFAULT FALSE, "action" TEXT DEFAULT '{}', "count_sent" INTEGER DEFAULT 0, "count_read" INTEGER DEFAULT 0, "user_id" INTEGER, "name" VARCHAR, "language" VARCHAR, "category" VARCHAR, "scheduled_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "antz_task" VARCHAR, "producer_id" INTEGER, "clinic_id" INTEGER, "toolbox_message_id" INTEGER, "target_user_source" VARCHAR, "filter_user_language" TEXT[], "filter_user_country" TEXT[], "filter_user_below_age" INTEGER, "filter_user_above_age" INTEGER, "filter_user_disease" INT4[], "filter_user_diabetes_type" TEXT[], "filter_user_past_days" INTEGER, "user_list_file_name" VARCHAR, "user_list_display_name" VARCHAR, "current_progress" INTEGER DEFAULT 0, "total_progress" INTEGER DEFAULT 0, "toolbox_message_cache_id" INTEGER, CONSTRAINT "moshi_campaign_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE moshi_campaign;

-- changeset angelchang:145
CREATE TABLE IF NOT EXISTS "moshi_classification" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "category" VARCHAR, "user_id" INTEGER NOT NULL, "moshi_id" INTEGER NOT NULL, CONSTRAINT "moshi_classification_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE moshi_classification;

-- changeset angelchang:146
CREATE TABLE IF NOT EXISTS "nhi_record" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "data" TEXT DEFAULT '{}' NOT NULL, "exported" BOOLEAN DEFAULT FALSE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "nhi_record_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE nhi_record;

-- changeset angelchang:147
CREATE TABLE IF NOT EXISTS "niigata_dm_message_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "message_type" TEXT NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "niigata_dm_message_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE niigata_dm_message_event;

-- changeset angelchang:148
CREATE TABLE IF NOT EXISTS "oral_medicine_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "role" TEXT NOT NULL, "status" TEXT NOT NULL, "serving" numeric, "user_id" INTEGER NOT NULL, "oral_medicine_id" INTEGER NOT NULL, "diary_id" INTEGER, CONSTRAINT "oral_medicine_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE oral_medicine_connect;

-- changeset angelchang:149
CREATE TABLE IF NOT EXISTS "origin_medical_data_monthly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, "is_pseudo" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "month" INTEGER NOT NULL, "a1c_count" INTEGER DEFAULT 0 NOT NULL, "a1c_avg" FLOAT8 DEFAULT '0' NOT NULL, "ldlc_count" INTEGER DEFAULT 0 NOT NULL, "ldlc_avg" FLOAT8 DEFAULT '0' NOT NULL, "egfr_count" INTEGER DEFAULT 0 NOT NULL, "egfr_avg" FLOAT8 DEFAULT '0' NOT NULL, "uacr_count" INTEGER DEFAULT 0 NOT NULL, "uacr_avg" FLOAT8 DEFAULT '0' NOT NULL, "oral_medicine_classes" TEXT DEFAULT '[]' NOT NULL, "insulin_classes" TEXT DEFAULT '[]' NOT NULL, "combination_classes" TEXT DEFAULT '[]' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "origin_medical_data_monthly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE origin_medical_data_monthly_stats;

-- changeset angelchang:150
CREATE TABLE IF NOT EXISTS "origin_medical_data_quarterly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, "is_pseudo" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "quarter" INTEGER NOT NULL, "a1c_count" INTEGER DEFAULT 0 NOT NULL, "a1c_avg" FLOAT8 DEFAULT '0' NOT NULL, "ldlc_count" INTEGER DEFAULT 0 NOT NULL, "ldlc_avg" FLOAT8 DEFAULT '0' NOT NULL, "egfr_count" INTEGER DEFAULT 0 NOT NULL, "egfr_avg" FLOAT8 DEFAULT '0' NOT NULL, "uacr_count" INTEGER DEFAULT 0 NOT NULL, "uacr_avg" FLOAT8 DEFAULT '0' NOT NULL, "oral_medicine_classes" TEXT DEFAULT '[]' NOT NULL, "insulin_classes" TEXT DEFAULT '[]' NOT NULL, "combination_classes" TEXT DEFAULT '[]' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "origin_medical_data_quarterly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE origin_medical_data_quarterly_stats;

-- changeset angelchang:151
CREATE TABLE IF NOT EXISTS "origin_medical_data_yearly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, "is_pseudo" BOOLEAN DEFAULT FALSE NOT NULL, "year" INTEGER NOT NULL, "a1c_count" INTEGER DEFAULT 0 NOT NULL, "a1c_avg" FLOAT8 DEFAULT '0' NOT NULL, "ldlc_count" INTEGER DEFAULT 0 NOT NULL, "ldlc_avg" FLOAT8 DEFAULT '0' NOT NULL, "egfr_count" INTEGER DEFAULT 0 NOT NULL, "egfr_avg" FLOAT8 DEFAULT '0' NOT NULL, "uacr_count" INTEGER DEFAULT 0 NOT NULL, "uacr_avg" FLOAT8 DEFAULT '0' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "origin_medical_data_yearly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE origin_medical_data_yearly_stats;

-- changeset angelchang:152
CREATE TABLE IF NOT EXISTS "origin_self_measured_monthly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "year" INTEGER NOT NULL, "month" INTEGER NOT NULL, "fbg_count" INTEGER DEFAULT 0 NOT NULL, "fbg_avg" FLOAT8 DEFAULT '0' NOT NULL, "pre_meal_bg_count" INTEGER DEFAULT 0 NOT NULL, "pre_meal_bg_avg" FLOAT8 DEFAULT '0' NOT NULL, "post_meal_bg_count" INTEGER DEFAULT 0 NOT NULL, "post_meal_bg_avg" FLOAT8 DEFAULT '0' NOT NULL, "bp_count" INTEGER DEFAULT 0 NOT NULL, "systolic_avg" FLOAT8 DEFAULT '0' NOT NULL, "diastolic_avg" FLOAT8 DEFAULT '0' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "origin_self_measured_monthly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE origin_self_measured_monthly_stats;

-- changeset angelchang:153
CREATE TABLE IF NOT EXISTS "origin_self_measured_quarterly_stats" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "year" INTEGER NOT NULL, "quarter" INTEGER NOT NULL, "fbg_count" INTEGER DEFAULT 0 NOT NULL, "fbg_avg" FLOAT8 DEFAULT '0' NOT NULL, "pre_meal_bg_count" INTEGER DEFAULT 0 NOT NULL, "pre_meal_bg_avg" FLOAT8 DEFAULT '0' NOT NULL, "post_meal_bg_count" INTEGER DEFAULT 0 NOT NULL, "post_meal_bg_avg" FLOAT8 DEFAULT '0' NOT NULL, "bp_count" INTEGER DEFAULT 0 NOT NULL, "systolic_avg" FLOAT8 DEFAULT '0' NOT NULL, "diastolic_avg" FLOAT8 DEFAULT '0' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "origin_self_measured_quarterly_stats_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE origin_self_measured_quarterly_stats;

-- changeset angelchang:154
CREATE TABLE IF NOT EXISTS "partner_nanshan_policy_score" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "policy_no" VARCHAR(255) NOT NULL, "policy_effective_date" date, "total_score" INTEGER NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "partner_nanshan_policy_score_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE partner_nanshan_policy_score;

-- changeset angelchang:155
CREATE TABLE IF NOT EXISTS "partner_quaker_reward" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_info_id" INTEGER NOT NULL, CONSTRAINT "partner_quaker_reward_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE partner_quaker_reward;

-- changeset angelchang:156
CREATE TABLE IF NOT EXISTS "partner_quaker_user_info" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "name" VARCHAR(255) NOT NULL, "phone_number" VARCHAR(32) NOT NULL, "address" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "msg_no" INTEGER DEFAULT 0 NOT NULL, CONSTRAINT "partner_quaker_user_info_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE partner_quaker_user_info;

-- changeset angelchang:157
CREATE TABLE IF NOT EXISTS "password_reset" ("code" TEXT NOT NULL, "avatar_id" INTEGER NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW());
-- rollback: DROP TABLE password_reset;

-- changeset angelchang:158
CREATE TABLE IF NOT EXISTS "peer_bells" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "type" VARCHAR NOT NULL, "status" VARCHAR DEFAULT 'unread' NOT NULL, "data" TEXT DEFAULT '{}' NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "peer_bells_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_bells;

-- changeset angelchang:159
CREATE TABLE IF NOT EXISTS "peer_comment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "content" TEXT, "status" VARCHAR, "owner_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "mention_id" INTEGER, "parent_id" INTEGER, "attribute" VARCHAR, CONSTRAINT "peer_comment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_comment;

-- changeset angelchang:160
CREATE TABLE IF NOT EXISTS "peer_profile" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "nickname" TEXT, "experience_story" TEXT, "experience_food" TEXT, "experience_sport" TEXT, "experience_medication" TEXT, "enabled" BOOLEAN DEFAULT FALSE, "user_id" INTEGER, "identify" VARCHAR DEFAULT '' NOT NULL, "new_recommendation" BOOLEAN DEFAULT FALSE, "new_notification" BOOLEAN DEFAULT FALSE, "new_updated" BOOLEAN DEFAULT FALSE, "lang" VARCHAR, "banned" BOOLEAN DEFAULT FALSE, CONSTRAINT "peer_profile_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_profile;

-- changeset angelchang:161
CREATE TABLE IF NOT EXISTS "peer_recommend" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "bucket" INTEGER DEFAULT 0, "score" numeric DEFAULT 0, "user_id" INTEGER NOT NULL, CONSTRAINT "peer_recommend_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_recommend;

-- changeset angelchang:162
CREATE TABLE IF NOT EXISTS "peer_recommend_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "recommended_at" TIMESTAMP WITHOUT TIME ZONE, "similarity_score" INTEGER DEFAULT 0, "owner_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "peer_recommend_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_recommend_connect;

-- changeset angelchang:163
CREATE TABLE IF NOT EXISTS "peer_relationship" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" VARCHAR, "followed_id" INTEGER NOT NULL, "follower_id" INTEGER NOT NULL, CONSTRAINT "peer_relationship_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_relationship;

-- changeset angelchang:164
CREATE TABLE IF NOT EXISTS "peer_setting" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "notification" TEXT DEFAULT '{}' NOT NULL, "preference" TEXT DEFAULT '{}' NOT NULL, "privacy" TEXT DEFAULT '{}' NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "peer_setting_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_setting;

-- changeset angelchang:165
CREATE TABLE IF NOT EXISTS "peer_status" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "type" VARCHAR NOT NULL, "data" TEXT, "user_id" INTEGER NOT NULL, CONSTRAINT "peer_status_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE peer_status;

-- changeset angelchang:166
CREATE TABLE IF NOT EXISTS "photo_classification" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "is_food" BOOLEAN, "rating" TEXT DEFAULT '{}', "dish" VARCHAR, "user_id" INTEGER NOT NULL, "diary_attachment_id" INTEGER, "moshi_attachment_id" INTEGER, CONSTRAINT "photo_classification_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE photo_classification;

-- changeset angelchang:167
CREATE TABLE IF NOT EXISTS "photo_classification_tag" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "category" VARCHAR NOT NULL, "value" VARCHAR NOT NULL, "user_id" INTEGER NOT NULL, "photo_classification_id" INTEGER NOT NULL, CONSTRAINT "photo_classification_tag_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE photo_classification_tag;

-- changeset angelchang:168
CREATE TABLE IF NOT EXISTS "pm_alert" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "category" TEXT NOT NULL, "data" TEXT DEFAULT '{}', "viewed_at" TIMESTAMP WITHOUT TIME ZONE, "care_connect_id" INTEGER NOT NULL, "patient_id" INTEGER NOT NULL, "scheduled_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT DEFAULT 'unread' NOT NULL, CONSTRAINT "pm_alert_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE pm_alert;

-- changeset angelchang:169
CREATE TABLE IF NOT EXISTS "pm_application_form" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "email" TEXT NOT NULL, "user_name" TEXT NOT NULL, "lang" VARCHAR NOT NULL, "institution_name" TEXT NOT NULL, "institution_type" TEXT NOT NULL, "is_agreed" BOOLEAN DEFAULT FALSE NOT NULL, "division" TEXT, "position" TEXT, "information_come_from" TEXT, "reservations" TEXT DEFAULT '[]', "phone_number" VARCHAR, "address" TEXT, "comment" TEXT, "intermediary" TEXT, "is_needed_demo" BOOLEAN DEFAULT FALSE, CONSTRAINT "pm_application_form_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE pm_application_form;

-- changeset angelchang:170
CREATE TABLE IF NOT EXISTS "pm_broadcast" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "delivered_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "content" TEXT NOT NULL, "status" TEXT, "delivery_type" TEXT, "clinic_id" INTEGER NOT NULL, "sender_id" INTEGER NOT NULL, "attribute" TEXT DEFAULT 'raw_message' NOT NULL, "group_id" INTEGER, CONSTRAINT "pm_broadcast_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE pm_broadcast;

-- changeset angelchang:171
CREATE TABLE IF NOT EXISTS "premium_food" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" VARCHAR NOT NULL, "tips" TEXT NOT NULL, "nutritional" TEXT NOT NULL, "categorizes" TEXT DEFAULT '[]' NOT NULL, "gi" VARCHAR DEFAULT '0' NOT NULL, "slug" VARCHAR NOT NULL, "active" BOOLEAN DEFAULT FALSE, "lang" VARCHAR NOT NULL, CONSTRAINT "premium_food_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE premium_food;

-- changeset angelchang:172
CREATE TABLE IF NOT EXISTS "premium_plan" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "months" INTEGER NOT NULL, "os" VARCHAR NOT NULL, "product_id" VARCHAR NOT NULL, "active" BOOLEAN DEFAULT FALSE, CONSTRAINT "premium_plan_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE premium_plan;

-- changeset angelchang:173
CREATE TABLE IF NOT EXISTS "premium_record" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "type" VARCHAR NOT NULL, "source_id" INTEGER, "user_id" INTEGER, "saved" BOOLEAN DEFAULT FALSE, "data" TEXT DEFAULT '{}', "slug" VARCHAR NOT NULL, CONSTRAINT "premium_record_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE premium_record;

-- changeset angelchang:174
CREATE TABLE IF NOT EXISTS "premium_report_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "date" date NOT NULL, "data" TEXT DEFAULT '{}' NOT NULL, "user_id" INTEGER NOT NULL, "sent" BOOLEAN DEFAULT FALSE, "filename" VARCHAR, CONSTRAINT "premium_report_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE premium_report_history;

-- changeset angelchang:175
CREATE TABLE IF NOT EXISTS "premium_subscription" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "start_date" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "due_date" TIMESTAMP WITHOUT TIME ZONE NOT NULL, "os" VARCHAR, "status" TEXT NOT NULL, "reason" VARCHAR DEFAULT '', "feedback" TEXT, "price" INTEGER DEFAULT 0, "currency_code" VARCHAR, "title" VARCHAR, "transaction_token" VARCHAR, "receipt" TEXT, "user_id" INTEGER NOT NULL, "plan_id" INTEGER, "affiliate_id" INTEGER, "clinic_id" INTEGER, "clinic_subscription_id" INTEGER, CONSTRAINT "premium_subscription_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE premium_subscription;

-- changeset angelchang:176
CREATE TABLE IF NOT EXISTS "premium_tip" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "content" TEXT NOT NULL, "active" BOOLEAN DEFAULT FALSE, "lang" VARCHAR NOT NULL, CONSTRAINT "premium_tip_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE premium_tip;

-- changeset angelchang:177
CREATE TABLE IF NOT EXISTS "prescription_attachment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "url" TEXT, "filename" TEXT, "user_prescription_id" INTEGER, CONSTRAINT "prescription_attachment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE prescription_attachment;

-- changeset angelchang:178
CREATE TABLE IF NOT EXISTS "product" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "serial_number" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT DEFAULT 'active' NOT NULL, "firmware" TEXT, "mac_address" TEXT, "name" TEXT, CONSTRAINT "product_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE product;

-- changeset angelchang:179
CREATE TABLE IF NOT EXISTS "program_lifecycle_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "event_name" TEXT NOT NULL, CONSTRAINT "program_lifecycle_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE program_lifecycle_event;

-- changeset angelchang:180
CREATE TABLE IF NOT EXISTS "pseudo_account_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER, "created_by_clinic" INTEGER, "converted_at" TIMESTAMP WITHOUT TIME ZONE, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "pseudo_account_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE pseudo_account_history;

-- changeset angelchang:181
CREATE TABLE IF NOT EXISTS "pseudo_account_task_queue" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "status" TEXT DEFAULT 'pending' NOT NULL, "reason" TEXT, "estimated_completion_at" TIMESTAMP WITHOUT TIME ZONE, "actual_completion_at" TIMESTAMP WITHOUT TIME ZONE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "pseudo_account_task_queue_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE pseudo_account_task_queue;

-- changeset angelchang:182
CREATE TABLE IF NOT EXISTS "realsun_record" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "medical_institution_code" VARCHAR NOT NULL, "patient_national_id" VARCHAR NOT NULL, "category" VARCHAR NOT NULL, "date" date NOT NULL, "data" TEXT DEFAULT '{}' NOT NULL, "exported" BOOLEAN DEFAULT FALSE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "realsun_record_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE realsun_record;

-- changeset angelchang:183
CREATE TABLE IF NOT EXISTS "report_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deliveried_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "to_email" TEXT, "owner_id" INTEGER NOT NULL, "file_type" VARCHAR, "use_quota" BOOLEAN DEFAULT FALSE, "data_type" TEXT[] DEFAULT ARRAY[]::character varying[], CONSTRAINT "report_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE report_history;

-- changeset angelchang:184
CREATE TABLE IF NOT EXISTS "schemup_tables" ("table_name" VARCHAR NOT NULL, "version" VARCHAR NOT NULL, "is_current" BOOLEAN DEFAULT FALSE NOT NULL, "schema" TEXT, "id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, CONSTRAINT "schemup_tables_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE schemup_tables;

-- changeset angelchang:185
CREATE TABLE IF NOT EXISTS "sdm_report" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "date" date NOT NULL, "data" TEXT DEFAULT '{}' NOT NULL, "user_id" INTEGER NOT NULL, "care_connect_id" INTEGER, CONSTRAINT "sdm_report_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE sdm_report;

-- changeset angelchang:186
CREATE TABLE IF NOT EXISTS "si_access_token" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "revoked_at" TIMESTAMP WITHOUT TIME ZONE, "system_integrator_id" INTEGER NOT NULL, "token" TEXT NOT NULL, "scope" TEXT, CONSTRAINT "si_access_token_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE si_access_token;

-- changeset angelchang:187
CREATE TABLE IF NOT EXISTS "si_clinic_assignment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "system_integrator_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, CONSTRAINT "si_clinic_assignment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE si_clinic_assignment;

-- changeset angelchang:188
CREATE TABLE IF NOT EXISTS "slider_event" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "key" VARCHAR NOT NULL, "param" TEXT DEFAULT '{}', "status" VARCHAR, "expiration_date" TIMESTAMP WITHOUT TIME ZONE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "slider_event_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE slider_event;

-- changeset angelchang:189
CREATE TABLE IF NOT EXISTS "slider_record" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "category" VARCHAR NOT NULL, "key" VARCHAR NOT NULL, "param" TEXT, "status" VARCHAR, "has_acted" BOOLEAN DEFAULT FALSE, "priority" INTEGER, "expiration_date" TIMESTAMP WITHOUT TIME ZONE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "slider_record_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE slider_record;

-- changeset angelchang:190
CREATE TABLE IF NOT EXISTS "sms" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "code" TEXT NOT NULL, "phone_number" TEXT NOT NULL, "status" TEXT NOT NULL, "device_id" TEXT NOT NULL, CONSTRAINT "sms_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE sms;

-- changeset angelchang:191
CREATE TABLE IF NOT EXISTS "soap_sync" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "care_connect_id" INTEGER NOT NULL, "log" TEXT, CONSTRAINT "soap_sync_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE soap_sync;

-- changeset angelchang:192
CREATE TABLE IF NOT EXISTS "social_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "token" TEXT NOT NULL, "type" TEXT NOT NULL, "status" TEXT NOT NULL, "user_id" INTEGER, "data" TEXT DEFAULT '{}', "revoke" BOOLEAN DEFAULT FALSE, CONSTRAINT "social_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE social_connect;

-- changeset angelchang:193
CREATE TABLE IF NOT EXISTS "statistics" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "tag" VARCHAR NOT NULL, "value" INTEGER NOT NULL, "data" TEXT, "meta_name" VARCHAR, CONSTRAINT "statistics_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE statistics;

-- changeset angelchang:194
CREATE TABLE IF NOT EXISTS "step" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "start_time" TIMESTAMP WITHOUT TIME ZONE, "end_time" TIMESTAMP WITHOUT TIME ZONE, "sync_time" TIMESTAMP WITHOUT TIME ZONE, "value" INTEGER NOT NULL, "source" VARCHAR NOT NULL, "user_id" INTEGER, "run_script" BOOLEAN DEFAULT FALSE NOT NULL, CONSTRAINT "step_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE step;

-- changeset angelchang:195
CREATE TABLE IF NOT EXISTS "system_integrator" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "status" TEXT NOT NULL, "name" TEXT NOT NULL, "email" TEXT NOT NULL, "lang" TEXT NOT NULL, "client_id" TEXT NOT NULL, "client_secret" TEXT NOT NULL, "scope" TEXT, CONSTRAINT "system_integrator_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE system_integrator;

-- changeset angelchang:196
CREATE TABLE IF NOT EXISTS "toolbox_answer" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "moshi_campaign_id" INTEGER, "toolbox_form_id" INTEGER NOT NULL, "toolbox_program_id" INTEGER, "user_id" INTEGER NOT NULL, "answers" JSONB NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_answer_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_answer;

-- changeset angelchang:197
CREATE TABLE IF NOT EXISTS "toolbox_article" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "producer_id" INTEGER NOT NULL, "name" TEXT NOT NULL, "filename" TEXT NOT NULL, "estimated_reading_time_in_min" INTEGER, "display_name" TEXT NOT NULL, "content" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "activated_at" TIMESTAMP WITHOUT TIME ZONE, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "status" TEXT DEFAULT 'CASE
    WHEN (deleted_at IS NOT NULL) THEN ''''deleted''''::text
    WHEN (activated_at IS NOT NULL) THEN ''''activated''''::text
    ELSE ''''draft''''::text
END' NOT NULL, "view_users" INTEGER DEFAULT 0 NOT NULL, CONSTRAINT "toolbox_article_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_article;

-- changeset angelchang:198
CREATE TABLE IF NOT EXISTS "toolbox_attachment" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "producer_id" INTEGER NOT NULL, "filename" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_attachment_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_attachment;

-- changeset angelchang:199
CREATE TABLE IF NOT EXISTS "toolbox_form" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "producer_id" INTEGER NOT NULL, "name" TEXT NOT NULL, "display_name" TEXT, "filename" TEXT, "completion_time_in_min" INTEGER, "questions" JSONB, "opened_users" INTEGER DEFAULT 0 NOT NULL, "completed_users" INTEGER DEFAULT 0 NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "activated_at" TIMESTAMP WITHOUT TIME ZONE, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "status" TEXT DEFAULT 'CASE
    WHEN (deleted_at IS NOT NULL) THEN ''''deleted''''::text
    WHEN (activated_at IS NOT NULL) THEN ''''activated''''::text
    ELSE ''''draft''''::text
END' NOT NULL, CONSTRAINT "toolbox_form_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_form;

-- changeset angelchang:200
CREATE TABLE IF NOT EXISTS "toolbox_form_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "toolbox_form_id" INTEGER NOT NULL, "toolbox_program_id" INTEGER, "moshi_campaign_id" INTEGER, "user_id" INTEGER NOT NULL, "status" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_form_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_form_connect;

-- changeset angelchang:201
CREATE TABLE IF NOT EXISTS "toolbox_message" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" TEXT NOT NULL, "producer_id" INTEGER NOT NULL, "status" TEXT NOT NULL, "message_type_id" INTEGER NOT NULL, "image_display_name" TEXT, "image_file_name" TEXT, "content" TEXT, "button_text" TEXT, "button_action_type" TEXT, "button_url" TEXT, "button_share_subject" TEXT, "button_share_body" TEXT, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "activated_at" TIMESTAMP WITHOUT TIME ZONE, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "article_id" INTEGER, "content_type" TEXT, "page" TEXT, "resource" TEXT, "sub_resource" TEXT, "form_id" INTEGER, CONSTRAINT "toolbox_message_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_message;

-- changeset angelchang:202
CREATE TABLE IF NOT EXISTS "toolbox_message_cache" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" TEXT NOT NULL, "parent_toolbox_message_id" INTEGER NOT NULL, "message_type_id" INTEGER NOT NULL, "image_display_name" TEXT, "image_file_name" TEXT, "content" TEXT, "button_text" TEXT, "button_action_type" TEXT, "button_url" TEXT, "button_share_subject" TEXT, "button_share_body" TEXT, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "toolbox_message_cache_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_message_cache;

-- changeset angelchang:203
CREATE TABLE IF NOT EXISTS "toolbox_message_group" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "producer_id" INTEGER NOT NULL, "name" TEXT NOT NULL, "utilization_method" TEXT, "notification_description" TEXT, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "activated_at" TIMESTAMP WITHOUT TIME ZONE, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "status" TEXT DEFAULT 'CASE
    WHEN (deleted_at IS NOT NULL) THEN ''''deleted''''::text
    WHEN (activated_at IS NOT NULL) THEN ''''activated''''::text
    ELSE ''''draft''''::text
END' NOT NULL, CONSTRAINT "toolbox_message_group_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_message_group;

-- changeset angelchang:204
CREATE TABLE IF NOT EXISTS "toolbox_message_group_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "toolbox_message_id" INTEGER, "toolbox_message_group_id" INTEGER, "seq" INTEGER, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_message_group_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_message_group_connect;

-- changeset angelchang:205
CREATE TABLE IF NOT EXISTS "toolbox_message_type" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "toolbox_message_type_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_message_type;

-- changeset angelchang:206
CREATE TABLE IF NOT EXISTS "toolbox_producer" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" TEXT NOT NULL, "is_access" BOOLEAN DEFAULT FALSE NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "producer_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_producer;

-- changeset angelchang:207
CREATE TABLE IF NOT EXISTS "toolbox_producer_clinic_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "producer_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "producer_clinic_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_producer_clinic_connect;

-- changeset angelchang:208
CREATE TABLE IF NOT EXISTS "toolbox_producer_user_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "producer_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "role" TEXT NOT NULL, "first_name" TEXT NOT NULL, "last_name" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "producer_user_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_producer_user_connect;

-- changeset angelchang:209
CREATE TABLE IF NOT EXISTS "toolbox_program" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER, "producer_id" INTEGER NOT NULL, "name" TEXT NOT NULL, "display_name" TEXT, "duration_unit" TEXT, "duration_quantity" INTEGER, "start_condition" TEXT, "lang" TEXT, "plan_id" INTEGER, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "activated_at" TIMESTAMP WITHOUT TIME ZONE, "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "archived_at" TIMESTAMP WITHOUT TIME ZONE, "requested_at" TIMESTAMP WITHOUT TIME ZONE, "active_participants" INTEGER DEFAULT 0 NOT NULL, "total_participants" INTEGER DEFAULT 0 NOT NULL, "status" TEXT DEFAULT 'CASE
    WHEN (deleted_at IS NOT NULL) THEN ''''deleted''''::text
    WHEN (archived_at IS NOT NULL) THEN ''''archived''''::text
    WHEN (activated_at IS NOT NULL) THEN ''''activated''''::text
    WHEN (requested_at IS NOT NULL) THEN ''''requested''''::text
    ELSE ''''draft''''::text
END' NOT NULL, CONSTRAINT "toolbox_program_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_program;

-- changeset angelchang:210
CREATE TABLE IF NOT EXISTS "toolbox_program_article_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "toolbox_article_id" INTEGER NOT NULL, "toolbox_program_user_connect_id" INTEGER NOT NULL, "status" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_program_article_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_program_article_connect;

-- changeset angelchang:211
CREATE TABLE IF NOT EXISTS "toolbox_program_moshi_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "toolbox_program_user_connect_id" INTEGER NOT NULL, "toolbox_message_group_id" INTEGER, "toolbox_message_id" INTEGER, "moshi_id" INTEGER, "status" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_program_moshi_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_program_moshi_connect;

-- changeset angelchang:212
CREATE TABLE IF NOT EXISTS "toolbox_program_user_connect" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "toolbox_program_id" INTEGER NOT NULL, "clinic_subscription_id" INTEGER, "libre_connected_at" TIMESTAMP WITHOUT TIME ZONE, "status" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_program_user_connect_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_program_user_connect;

-- changeset angelchang:213
CREATE TABLE IF NOT EXISTS "toolbox_schedule" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "toolbox_message_id" INTEGER, "toolbox_message_group_id" INTEGER, "toolbox_program_id" INTEGER, "type" TEXT, "period" TEXT, "start_time" time(6) WITHOUT TIME ZONE, "end_time" time(6) WITHOUT TIME ZONE, "start_by_type" TEXT, "start_by_day" INTEGER, "start_by_weekday" TEXT, "start_by_monthday" INTEGER, "rr_count" INTEGER, "rr_frequency" TEXT, "rr_interval" INTEGER, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbox_schedule_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_schedule;

-- changeset angelchang:214
CREATE TABLE IF NOT EXISTS "toolbox_toolbars" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbars_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_toolbars;

-- changeset angelchang:215
CREATE TABLE IF NOT EXISTS "toolbox_toolbars_permission" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "producer_id" INTEGER NOT NULL, "toolbar_id" INTEGER NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "toolbars_permission_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE toolbox_toolbars_permission;

-- changeset angelchang:216
CREATE TABLE IF NOT EXISTS "user_a1c" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "value" numeric NOT NULL, "unit" TEXT NOT NULL, "status" TEXT NOT NULL, "recorded_at" date DEFAULT NOW(), "user_id" INTEGER NOT NULL, "note" TEXT, "medical_institution_name" TEXT, "source" TEXT DEFAULT 'manually' NOT NULL, "source_id" TEXT, CONSTRAINT "user_a1c_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_a1c;

-- changeset angelchang:217
CREATE TABLE IF NOT EXISTS "user_analysis" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "analysed_at" date NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "user_id" INTEGER NOT NULL, "data" TEXT DEFAULT '{}', CONSTRAINT "user_analysis_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_analysis;

-- changeset angelchang:218
CREATE TABLE IF NOT EXISTS "user_cache" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "bmi" numeric, "user_id" INTEGER NOT NULL, "last_two_weeks_average_bg" numeric, "bg_unit" VARCHAR, "step_start_time" TIMESTAMP WITHOUT TIME ZONE, "last_api_access_at" TIMESTAMP WITHOUT TIME ZONE, "last_bg_recorded_at" TIMESTAMP WITHOUT TIME ZONE, "accepted_term_of_service_at" TIMESTAMP WITHOUT TIME ZONE, "last_glucose_value_recorded_at" TIMESTAMP WITHOUT TIME ZONE, "last_cgm_uploaded_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "user_cache_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_cache;

-- changeset angelchang:219
CREATE TABLE IF NOT EXISTS "user_consent_document" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "category" TEXT NOT NULL, "content" TEXT NOT NULL, "language" TEXT DEFAULT 'en-us' NOT NULL, "clinic_id" INTEGER, "fingerprint" TEXT NOT NULL, "country_id" INTEGER, "version" VARCHAR(32), CONSTRAINT "user_consent_document_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_consent_document;

-- changeset angelchang:220
CREATE TABLE IF NOT EXISTS "user_consent_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "category" TEXT NOT NULL, "accepted_tos_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "fingerprint" TEXT NOT NULL, "guardian_info" TEXT, "is_underage" BOOLEAN, "status" VARCHAR(32), "country_iso_2" TEXT, "external_id" VARCHAR(64), "birthday" date, CONSTRAINT "user_consent_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_consent_history;

-- changeset angelchang:221
CREATE TABLE IF NOT EXISTS "user_daily_routine" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "status" TEXT NOT NULL, "wakeup" VARCHAR NOT NULL, "breakfast" VARCHAR NOT NULL, "lunch" VARCHAR NOT NULL, "dinner" VARCHAR NOT NULL, "bedtime" VARCHAR NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "care_connect_id" INTEGER, "created_by" INTEGER, CONSTRAINT "user_daily_routine_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_daily_routine;

-- changeset angelchang:222
CREATE TABLE IF NOT EXISTS "user_exam_unit" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "hba1c" TEXT DEFAULT '%' NOT NULL, "total_cholesterol" TEXT DEFAULT 'mg/dL' NOT NULL, "ldl_c" TEXT DEFAULT 'mg/dL' NOT NULL, "hdl_c" TEXT DEFAULT 'mg/dL' NOT NULL, "tg" TEXT DEFAULT 'mg/dL' NOT NULL, "creatinine" TEXT DEFAULT 'mg/dL' NOT NULL, "urine_acr" TEXT DEFAULT 'mg/g' NOT NULL, "urine_pcr" TEXT DEFAULT 'mg/g' NOT NULL, "bun" TEXT DEFAULT 'mg/dL' NOT NULL, "glucose_ac" TEXT DEFAULT 'mg/dL' NOT NULL, "glucose_2hr_pc" TEXT DEFAULT 'mg/dL' NOT NULL, "hemoglobin" TEXT DEFAULT 'g/dL' NOT NULL, "mchc" TEXT DEFAULT 'g/dL' NOT NULL, "uric_acid" TEXT DEFAULT 'mg/dL' NOT NULL, "microalbumin" TEXT DEFAULT 'mg/L' NOT NULL, "creatinine_urine" TEXT DEFAULT 'mg/dL' NOT NULL, "ast" TEXT DEFAULT 'U/L' NOT NULL, "alt" TEXT DEFAULT 'U/L' NOT NULL, "ggt" TEXT DEFAULT 'U/L' NOT NULL, "total_protein" TEXT DEFAULT 'g/dL' NOT NULL, "albumin" TEXT DEFAULT 'g/dL' NOT NULL, "globulin" TEXT DEFAULT 'g/dL' NOT NULL, "total_bilirubin" TEXT DEFAULT 'mg/dL' NOT NULL, "direct_bilirubin" TEXT DEFAULT 'mg/dL' NOT NULL, "alp" TEXT DEFAULT 'U/L' NOT NULL, "amylase" TEXT DEFAULT 'U/L' NOT NULL, "ck" TEXT DEFAULT 'U/L' NOT NULL, "ldh" TEXT DEFAULT 'U/L' NOT NULL, "cortisol" TEXT DEFAULT 'µg/dL' NOT NULL, "tsh" TEXT DEFAULT 'µIU/mL' NOT NULL, "t3_triiodothyronine" TEXT DEFAULT 'ng/dL' NOT NULL, "t4_thyroxine" TEXT DEFAULT 'µg/dL' NOT NULL, "free_t4" TEXT DEFAULT 'ng/dL' NOT NULL, "pth" TEXT DEFAULT 'pg/mL' NOT NULL, "sodium" TEXT DEFAULT 'mmol/L' NOT NULL, "potassium" TEXT DEFAULT 'mmol/L' NOT NULL, "calcium" TEXT DEFAULT 'mmol/L' NOT NULL, "magnesium" TEXT DEFAULT 'mmol/L' NOT NULL, "phosphate" TEXT DEFAULT 'mg/dL' NOT NULL, "iron" TEXT DEFAULT 'µg/dL' NOT NULL, "tibc" TEXT DEFAULT 'µg/dL' NOT NULL, "ferritin" TEXT DEFAULT 'ng/mL' NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "user_exam_unit_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_exam_unit;

-- changeset angelchang:223
CREATE TABLE IF NOT EXISTS "user_icd_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, "emr_record_id" INTEGER NOT NULL, "diagnosed_at" date NOT NULL, "icd_code" VARCHAR NOT NULL, CONSTRAINT "user_icd_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_icd_code;

-- changeset angelchang:224
CREATE TABLE IF NOT EXISTS "user_icd_codes_aggregation" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, "past_year_icd_codes" TEXT DEFAULT '[]' NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "user_icd_codes_aggregation_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_icd_codes_aggregation;

-- changeset angelchang:225
CREATE TABLE IF NOT EXISTS "user_measurement_plan" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "status" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "plan" TEXT DEFAULT '[]' NOT NULL, "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "care_connect_id" INTEGER, "created_by" INTEGER, CONSTRAINT "user_measurement_plan_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_measurement_plan;

-- changeset angelchang:226
CREATE TABLE IF NOT EXISTS "user_meter" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "status" BOOLEAN DEFAULT FALSE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "meter_id" INTEGER NOT NULL, "serial_number" TEXT, "last_date_time" TIMESTAMP WITHOUT TIME ZONE, "model" TEXT, "mac_address" TEXT, "name" TEXT, "user_tag_id" INTEGER DEFAULT 1, "last_date_times" TEXT DEFAULT '{}', "last_index_of_records" TEXT DEFAULT '{}', "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "sync_method" TEXT, "data_types_of_settings" VARCHAR, "h2_product_id" INTEGER, "auto_sync" BOOLEAN DEFAULT TRUE, "insulin_id" INTEGER, "software_version" VARCHAR, "firmware_version" VARCHAR, "insulin_injector_id" INTEGER, CONSTRAINT "user_meter_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_meter;

-- changeset angelchang:227
CREATE TABLE IF NOT EXISTS "user_nhi_p_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "clinic_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "care_connect_id" INTEGER NOT NULL, "emr_record_id" INTEGER NOT NULL, "diagnosed_at" date NOT NULL, "p_code" VARCHAR NOT NULL, CONSTRAINT "user_nhi_p_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_nhi_p_code;

-- changeset angelchang:228
CREATE TABLE IF NOT EXISTS "user_notification_token" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "token" TEXT NOT NULL, "type" TEXT NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "arn" TEXT, "user_token_id" INTEGER, "enabled" BOOLEAN DEFAULT TRUE NOT NULL, CONSTRAINT "user_notification_token_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_notification_token;

-- changeset angelchang:229
CREATE TABLE IF NOT EXISTS "user_pref" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "meter_brand" TEXT, "meter_model" TEXT, "before_meal_from" numeric DEFAULT 0 NOT NULL, "before_meal_to" numeric DEFAULT 0 NOT NULL, "after_meal_from" numeric DEFAULT 0 NOT NULL, "after_meal_to" numeric DEFAULT 0 NOT NULL, "bedtime_from" numeric DEFAULT 0 NOT NULL, "bedtime_to" numeric DEFAULT 0 NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "meter_id" INTEGER, "care_connect_id" INTEGER, "created_by" INTEGER, "sync_method" VARCHAR, "systolic_from" INTEGER DEFAULT 90, "systolic_to" INTEGER DEFAULT 140, "diastolic_from" INTEGER DEFAULT 60, "diastolic_to" INTEGER DEFAULT 90, "pulse_from" INTEGER DEFAULT 50, "pulse_to" INTEGER DEFAULT 100, "weight_from" numeric, "weight_to" numeric, "body_fat_from" numeric DEFAULT 5, "body_fat_to" numeric DEFAULT 30, "weight_goal" numeric, "body_fat_goal" numeric, "weight_unit" VARCHAR DEFAULT 'kg' NOT NULL, "weight_goal_status" VARCHAR, "body_fat_goal_status" VARCHAR, "reached_weight_goal" BOOLEAN DEFAULT FALSE, "reached_body_fat_goal" BOOLEAN DEFAULT FALSE, "status" VARCHAR DEFAULT 'active' NOT NULL, "weekly_exercise_minutes" INTEGER, "daily_steps" INTEGER, "pressure_unit" VARCHAR DEFAULT 'mmHg' NOT NULL, "meters" TEXT DEFAULT '{}' NOT NULL, "glucose_unit" VARCHAR, CONSTRAINT "user_pref_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_pref;

-- changeset angelchang:230
CREATE TABLE IF NOT EXISTS "user_prescription" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "start_date" date NOT NULL, "expiration_date" date, "next_refill_date" date, "medicines_data" TEXT DEFAULT '{}' NOT NULL, "clinic_id" INTEGER, "user_id" INTEGER NOT NULL, "clinic_prescription_id" INTEGER, "user_prescription_qr_code_id" INTEGER, "clinic_name" TEXT, "nhi_record_id" INTEGER, CONSTRAINT "user_prescription_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_prescription;

-- changeset angelchang:231
CREATE TABLE IF NOT EXISTS "user_prescription_qr_code" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "content" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "hash" TEXT NOT NULL, "clinic_code" TEXT, "pharmacy_code" TEXT, CONSTRAINT "user_prescription_qr_code_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_prescription_qr_code;

-- changeset angelchang:232
CREATE TABLE IF NOT EXISTS "user_stream" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "category" VARCHAR NOT NULL, "active" BOOLEAN DEFAULT TRUE, "data" TEXT DEFAULT '{}' NOT NULL, "source_id" INTEGER NOT NULL, "user_id" INTEGER NOT NULL, "clinic_id" INTEGER, CONSTRAINT "user_stream_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_stream;

-- changeset angelchang:233
CREATE TABLE IF NOT EXISTS "user_stripe" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "customer_id" VARCHAR NOT NULL, "use_default_source" BOOLEAN DEFAULT FALSE NOT NULL, "lang" VARCHAR, CONSTRAINT "user_stripe_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_stripe;

-- changeset angelchang:234
CREATE TABLE IF NOT EXISTS "user_token" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "device_id" TEXT NOT NULL, "access_token" TEXT NOT NULL, "user_id" INTEGER, "is_valid" BOOLEAN DEFAULT TRUE NOT NULL, CONSTRAINT "user_token_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_token;

-- changeset angelchang:235
CREATE TABLE IF NOT EXISTS "warp_session" ("uid" BYTEA NOT NULL, "ispersistent" BOOLEAN DEFAULT FALSE NOT NULL, "touched" INTEGER, "avatar_id" INTEGER, "language" VARCHAR, "oidc" TEXT DEFAULT '{}', CONSTRAINT "warp_session_pkey" PRIMARY KEY ("uid"));
-- rollback: DROP TABLE warp_session;

-- changeset angelchang:236
CREATE TABLE IF NOT EXISTS "web_log" ("id" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "user_id" INTEGER, "clinic_id" INTEGER, "endpoint" TEXT, "ip" TEXT, "method" TEXT, "params" TEXT, "user_agent" TEXT, "take_time" numeric, "response_code" INTEGER, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), CONSTRAINT "web_log_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE web_log;

-- changeset angelchang:237
CREATE TABLE IF NOT EXISTS "web_session" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "uid" BYTEA NOT NULL, "is_persistent" BOOLEAN DEFAULT FALSE NOT NULL, "touched" INTEGER, "language" VARCHAR, "avatar_id" INTEGER, "oidc" TEXT DEFAULT '{}', CONSTRAINT "web_session_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE web_session;

-- changeset angelchang:238
CREATE TABLE IF NOT EXISTS "diary_tag_name" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "tag_value" INTEGER NOT NULL, "tag_name" VARCHAR NOT NULL, "type" VARCHAR NOT NULL, CONSTRAINT "diary_tag_name_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE diary_tag_name;

-- changeset angelchang:239
CREATE TABLE IF NOT EXISTS "country" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "name" TEXT NOT NULL, "iso_2" TEXT NOT NULL, "is_admin" BOOLEAN, "digital_consent_age" INTEGER, CONSTRAINT "country_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE country;

-- changeset angelchang:240
CREATE TABLE IF NOT EXISTS "warp_avatar" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "email" VARCHAR, "password" VARCHAR, "phone_number" VARCHAR, CONSTRAINT "warp_avatar_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE warp_avatar;

-- changeset angelchang:241
ALTER TABLE "android_device_pattern" ADD CONSTRAINT "pattern_unique_key" UNIQUE ("brand", "model", "get_pattern", "send_pattern", "send_stop_bit_len", "status");
-- rollback: ALTER TABLE android_device_pattern DROP CONSTRAINT pattern_unique_key;

-- changeset angelchang:242
CREATE INDEX IF NOT EXISTS idx_antz_fired_at ON public.antz USING btree (fired_at) WHERE (status = 'pending'::text);
-- rollback: DROP INDEX idx_antz_fired_at;

-- changeset angelchang:243
CREATE INDEX IF NOT EXISTS "idx_antz_task_created_at" ON "antz"("created_at", "task");
-- rollback: DROP INDEX idx_antz_task_created_at;

-- changeset angelchang:244
CREATE INDEX IF NOT EXISTS "idx_antz_user_id_task" ON "antz"("user_id", "task");
-- rollback: DROP INDEX idx_antz_user_id_task;

-- changeset angelchang:245
CREATE INDEX IF NOT EXISTS "api_log_user_id_created_at_idx" ON "api_log"("user_id", "created_at");
-- rollback: DROP INDEX api_log_user_id_created_at_idx;

-- changeset angelchang:246
CREATE INDEX IF NOT EXISTS "idx_api_log_app_version_idx" ON "api_log"("app_version");
-- rollback: DROP INDEX idx_api_log_app_version_idx;

-- changeset angelchang:247
CREATE INDEX IF NOT EXISTS "idx_api_log_created_at" ON "api_log"("created_at" DESC);
-- rollback: DROP INDEX idx_api_log_created_at;

-- changeset angelchang:248
CREATE INDEX IF NOT EXISTS "idx_api_log_endpoint_idx" ON "api_log"("endpoint");
-- rollback: DROP INDEX idx_api_log_endpoint_idx;

-- changeset angelchang:249
CREATE INDEX IF NOT EXISTS "idx_app_log_created_at" ON "app_log"("created_at");
-- rollback: DROP INDEX idx_app_log_created_at;

-- changeset angelchang:250
ALTER TABLE "auth_apple" ADD CONSTRAINT "auth_apple_user_identifier_key" UNIQUE ("user_identifier");
-- rollback: ALTER TABLE auth_apple DROP CONSTRAINT auth_apple_user_identifier_key;

-- changeset angelchang:251
CREATE INDEX IF NOT EXISTS "idx_care_connect_clinic_id_role_status" ON "care_connect"("clinic_id", "role", "status");
-- rollback: DROP INDEX idx_care_connect_clinic_id_role_status;

-- changeset angelchang:252
CREATE INDEX IF NOT EXISTS idx_care_connect_role_user_id ON public.care_connect USING btree (role, user_id) WHERE (status = 'active'::text);
-- rollback: DROP INDEX idx_care_connect_role_user_id;

-- changeset angelchang:253
CREATE INDEX IF NOT EXISTS idx_care_connect_user_clinic_role ON public.care_connect USING btree (user_id, clinic_id, role) WHERE (status = 'active'::text);
-- rollback: DROP INDEX idx_care_connect_user_clinic_role;

-- changeset angelchang:254
CREATE INDEX IF NOT EXISTS idx_cvc_care_connect_id_user_stream_id ON public.care_viewed_connect USING btree (care_connect_id, user_stream_id) WHERE (NOT active);
-- rollback: DROP INDEX idx_cvc_care_connect_id_user_stream_id;

-- changeset angelchang:255
CREATE INDEX IF NOT EXISTS "idx_cvc_ids" ON "care_viewed_connect"("user_id", "care_connect_id", "user_stream_id");
-- rollback: DROP INDEX idx_cvc_ids;

-- changeset angelchang:256
CREATE INDEX IF NOT EXISTS idx_cvc_section ON public.care_viewed_connect USING btree (section) WHERE (active = true);
-- rollback: DROP INDEX idx_cvc_section;

-- changeset angelchang:257
CREATE INDEX IF NOT EXISTS "idx_cvc_section_user_stream_id" ON "care_viewed_connect"("section", "user_stream_id");
-- rollback: DROP INDEX idx_cvc_section_user_stream_id;

-- changeset angelchang:258
CREATE INDEX IF NOT EXISTS "idx_user_stream_id" ON "care_viewed_connect"("user_stream_id");
-- rollback: DROP INDEX idx_user_stream_id;

-- changeset angelchang:259
CREATE TYPE bgunit AS enum ('mg_dl', 'mmol_l');
CREATE TABLE IF NOT EXISTS "cgm_config" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE, "deleted_at" TIMESTAMP WITH TIME ZONE, "updated_at" TIMESTAMP WITH TIME ZONE, "user_id" INTEGER NOT NULL, "carer_id" INTEGER NOT NULL, "upper_range" FLOAT8, "lower_range" FLOAT8, "unit" BGUNIT, CONSTRAINT "cgm_config_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE cgm_config;

-- changeset angelchang:260
CREATE INDEX IF NOT EXISTS idx_active_clinic_chart ON public.clinic_chart USING btree (care_connect_id, status) WHERE (status = 'active'::text);
-- rollback: DROP INDEX idx_active_clinic_chart;

-- changeset angelchang:261
CREATE INDEX IF NOT EXISTS "idx_clinic_chart_clinic_id_user_id" ON "clinic_chart"("clinic_id", "user_id");
-- rollback: DROP INDEX idx_clinic_chart_clinic_id_user_id;

-- changeset angelchang:262
CREATE TABLE IF NOT EXISTS "oral_medicine" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "name" TEXT NOT NULL, "uid" INTEGER DEFAULT 0 NOT NULL, "languages" VARCHAR DEFAULT '[]' NOT NULL, "deprecated" BOOLEAN DEFAULT FALSE, CONSTRAINT "oral_medicine_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE oral_medicine;

-- changeset angelchang:263
CREATE INDEX IF NOT EXISTS "idx_clinic_monthly_year_month_is_pseudo_included_country" ON "clinic_default_analytics_monthly_stats"("year", "month", "is_pseudo_included", "country_iso_2");
-- rollback: DROP INDEX idx_clinic_monthly_year_month_is_pseudo_included_country;

-- changeset angelchang:264
CREATE INDEX IF NOT EXISTS "idx_clinic_quarterly_year_quarter_is_pseudo_included_country" ON "clinic_default_analytics_quarterly_stats"("year", "quarter", "is_pseudo_included", "country_iso_2");
-- rollback: DROP INDEX idx_clinic_quarterly_year_quarter_is_pseudo_included_country;

-- changeset angelchang:265
CREATE INDEX IF NOT EXISTS "idx_clinic_yearly_year_is_pseudo_included_country" ON "clinic_default_analytics_yearly_stats"("year", "is_pseudo_included", "country_iso_2");
-- rollback: DROP INDEX idx_clinic_yearly_year_is_pseudo_included_country;

-- changeset angelchang:266
ALTER TABLE "clinic_discount_code" ADD CONSTRAINT "clinic_discount_code_code_key" UNIQUE ("code");
-- rollback: ALTER TABLE clinic_discount_code DROP CONSTRAINT clinic_discount_code_code_key;

-- changeset angelchang:267
CREATE INDEX IF NOT EXISTS "idx_clinic_exam_chart_clinic_id" ON "clinic_exam_chart"("clinic_id");
-- rollback: DROP INDEX idx_clinic_exam_chart_clinic_id;

-- changeset angelchang:268
CREATE INDEX IF NOT EXISTS "idx_clinic_exam_unit_clinic_id" ON "clinic_exam_unit"("clinic_id");
-- rollback: DROP INDEX idx_clinic_exam_unit_clinic_id;

-- changeset angelchang:269
ALTER TABLE "clinic_group_connect" ADD CONSTRAINT "clinic_group_connect_unique_key" UNIQUE ("user_id", "clinic_group_id");
-- rollback: ALTER TABLE clinic_group_connect DROP CONSTRAINT clinic_group_connect_unique_key;

-- changeset angelchang:270
CREATE INDEX IF NOT EXISTS "idx_clinic_loyalty_transaction_clinic_id_user_id" ON "clinic_loyalty_transaction"("clinic_id", "user_id");
-- rollback: DROP INDEX idx_clinic_loyalty_transaction_clinic_id_user_id;

-- changeset angelchang:271
CREATE INDEX IF NOT EXISTS "idx_clinic_loyalty_transaction_diary_id" ON "clinic_loyalty_transaction"("diary_id");
-- rollback: DROP INDEX idx_clinic_loyalty_transaction_diary_id;

-- changeset angelchang:272
CREATE INDEX IF NOT EXISTS "idx_clinic_id_deleted_at_pm_display_name" ON "clinic_medicine"("clinic_id", "deleted_at", "pm_display_name");
-- rollback: DROP INDEX idx_clinic_id_deleted_at_pm_display_name;

-- changeset angelchang:273
CREATE INDEX IF NOT EXISTS "idx_clinic_notification_setting_clinic_id_user_id" ON "clinic_notification_setting"("clinic_id", "user_id");
-- rollback: DROP INDEX idx_clinic_notification_setting_clinic_id_user_id;

-- changeset angelchang:274
CREATE INDEX IF NOT EXISTS "idx_clinic_prescription_clinic_id_user_id" ON "clinic_prescription"("clinic_id", "user_id");
-- rollback: DROP INDEX idx_clinic_prescription_clinic_id_user_id;

-- changeset angelchang:275
CREATE INDEX IF NOT EXISTS "idx_clinic_prescription_clinic_id_user_id_start_date_deleted_at" ON "clinic_prescription"("clinic_id", "user_id", "start_date", "deleted_at");
-- rollback: DROP INDEX idx_clinic_prescription_clinic_id_user_id_start_date_deleted_at;

-- changeset angelchang:276
CREATE INDEX IF NOT EXISTS "idx_clinic_prescription_parent_clinic_prescription_id" ON "clinic_prescription"("parent_clinic_prescription_id");
-- rollback: DROP INDEX idx_clinic_prescription_parent_clinic_prescription_id;

-- changeset angelchang:277
CREATE INDEX IF NOT EXISTS idx_clinic_reminder_cache ON public.clinic_reminder USING btree (clinic_id) WHERE (((status)::text = 'active'::text) AND ((category)::text = 'cache'::text));
-- rollback: DROP INDEX idx_clinic_reminder_cache;

-- changeset angelchang:278
CREATE INDEX IF NOT EXISTS "idx_clinic_reminder_examine_at_user_clinic_v2" ON "clinic_reminder"("user_id", "clinic_id", "examine_at");
-- rollback: DROP INDEX idx_clinic_reminder_examine_at_user_clinic_v2;

-- changeset angelchang:279
CREATE TABLE IF NOT EXISTS "feedback" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "type" VARCHAR NOT NULL, "values" TEXT DEFAULT '{}' NOT NULL, "user_id" INTEGER NOT NULL, CONSTRAINT "feedback_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE feedback;

-- changeset angelchang:280
CREATE INDEX IF NOT EXISTS idx_clinic_subscription_clinic_id_user_id_with_status_active ON public.clinic_subscription USING btree (clinic_id, user_id) WHERE (status = 'active'::text);
-- rollback: DROP INDEX idx_clinic_subscription_clinic_id_user_id_with_status_active;

-- changeset angelchang:281
ALTER TABLE "collaboration_content" ADD CONSTRAINT "collaboration_content_clinic_id_key" UNIQUE ("clinic_id");
-- rollback: ALTER TABLE collaboration_content DROP CONSTRAINT collaboration_content_clinic_id_key;

-- changeset angelchang:282
CREATE INDEX IF NOT EXISTS "idx_custom_diary_tag_user_id_type" ON "custom_diary_tag"("user_id", "type");
-- rollback: DROP INDEX idx_custom_diary_tag_user_id_type;

-- changeset angelchang:283
CREATE INDEX IF NOT EXISTS "idx_custom_medicine_user_id" ON "custom_medicine"("user_id");
-- rollback: DROP INDEX idx_custom_medicine_user_id;

-- changeset angelchang:284
CREATE INDEX IF NOT EXISTS "idx_daily_step_user_id_recorded_date" ON "daily_step"("user_id", "recorded_date");
-- rollback: DROP INDEX idx_daily_step_user_id_recorded_date;

-- changeset angelchang:285
CREATE UNIQUE INDEX IF NOT EXISTS "idx_unique_dashboard_cache_user_id_ctype" ON "dashboard_cache"("user_id", "ctype");
-- rollback: DROP INDEX idx_unique_dashboard_cache_user_id_ctype;

-- changeset angelchang:286
ALTER TABLE "dashboard_setting" ADD CONSTRAINT "dashboard_setting_care_connect_id_unique_key" UNIQUE ("care_connect_id");
-- rollback: ALTER TABLE dashboard_setting DROP CONSTRAINT dashboard_setting_care_connect_id_unique_key;

-- changeset angelchang:287
ALTER TABLE "dashboard_status" ADD CONSTRAINT "dashboard_status_user_id_care_connect_id_ukey" UNIQUE ("user_id", "care_connect_id");
-- rollback: ALTER TABLE dashboard_status DROP CONSTRAINT dashboard_status_user_id_care_connect_id_ukey;

-- changeset angelchang:288
CREATE INDEX IF NOT EXISTS "diary_user_id_recorded_at_idx" ON "diary"("user_id", "recorded_at");
-- rollback: DROP INDEX diary_user_id_recorded_at_idx;

-- changeset angelchang:289
CREATE INDEX IF NOT EXISTS "idx_diary_batch_uuid" ON "diary"("batch_uuid");
-- rollback: DROP INDEX idx_diary_batch_uuid;

-- changeset angelchang:290
CREATE INDEX IF NOT EXISTS "idx_diary_created_at" ON "diary"("created_at" DESC);
-- rollback: DROP INDEX idx_diary_created_at;

-- changeset angelchang:291
CREATE INDEX IF NOT EXISTS "idx_diary_glucose_value_in_mg_dl" ON "diary"("glucose_value_in_mg_dl");
-- rollback: DROP INDEX idx_diary_glucose_value_in_mg_dl;

-- changeset angelchang:292
CREATE INDEX IF NOT EXISTS "idx_diary_glucose_value_user_id" ON "diary"("glucose_value", "user_id");
-- rollback: DROP INDEX idx_diary_glucose_value_user_id;

-- changeset angelchang:293
CREATE INDEX IF NOT EXISTS "idx_diary_recorded_created_at" ON "diary"("recorded_at", "created_at");
-- rollback: DROP INDEX idx_diary_recorded_created_at;

-- changeset angelchang:294
CREATE INDEX IF NOT EXISTS "idx_diary_setting_id" ON "diary"("setting_id");
-- rollback: DROP INDEX idx_diary_setting_id;

-- changeset angelchang:295
CREATE INDEX IF NOT EXISTS "idx_diary_updated_at" ON "diary"("updated_at");
-- rollback: DROP INDEX idx_diary_updated_at;

-- changeset angelchang:296
CREATE INDEX IF NOT EXISTS "idx_diary_user_id_created_at_idx" ON "diary"("user_id", "created_at" DESC);
-- rollback: DROP INDEX idx_diary_user_id_created_at_idx;

-- changeset angelchang:297
CREATE INDEX IF NOT EXISTS "idx_diary_user_id_glucose_recorded_at" ON "diary"("user_id", "glucose_value", "recorded_at");
-- rollback: DROP INDEX idx_diary_user_id_glucose_recorded_at;

-- changeset angelchang:298
CREATE INDEX IF NOT EXISTS "idx_diary_user_id_glucose_value_in_mg_dl_recorded_at" ON "diary"("user_id", "glucose_value_in_mg_dl", "recorded_at");
-- rollback: DROP INDEX idx_diary_user_id_glucose_value_in_mg_dl_recorded_at;

-- changeset angelchang:299
CREATE INDEX IF NOT EXISTS "idx_diary_user_id_systolic_recorded_at" ON "diary"("user_id", "systolic", "recorded_at");
-- rollback: DROP INDEX idx_diary_user_id_systolic_recorded_at;

-- changeset angelchang:300
CREATE INDEX IF NOT EXISTS "idx_diary_user_id_updated_at" ON "diary"("user_id", "updated_at");
-- rollback: DROP INDEX idx_diary_user_id_updated_at;

-- changeset angelchang:301
CREATE INDEX IF NOT EXISTS "idx_diary_user_id_weight_recorded_at" ON "diary"("user_id", "weight", "recorded_at");
-- rollback: DROP INDEX idx_diary_user_id_weight_recorded_at;

-- changeset angelchang:302
CREATE INDEX IF NOT EXISTS "idx_diary_attachment_diary_id" ON "diary_attachment"("diary_id");
-- rollback: DROP INDEX idx_diary_attachment_diary_id;

-- changeset angelchang:303
ALTER TABLE "diary_batch_record" ADD CONSTRAINT "diary_batch_record_batch_uuid_key" UNIQUE ("batch_uuid");
-- rollback: ALTER TABLE diary_batch_record DROP CONSTRAINT diary_batch_record_batch_uuid_key;

-- changeset angelchang:304
CREATE INDEX IF NOT EXISTS idx_diary_logged_cache_user_id_recorded_date ON public.diary_logged_data_cache USING btree (user_id, recorded_date) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX idx_diary_logged_cache_user_id_recorded_date;

-- changeset angelchang:305
CREATE INDEX IF NOT EXISTS "diary_tag_diary_id_type" ON "diary_tag"("diary_id", "type");
-- rollback: DROP INDEX diary_tag_diary_id_type;

-- changeset angelchang:306
CREATE INDEX IF NOT EXISTS "idx_email_reminder_event_user_id" ON "email_reminder_event"("user_id");
-- rollback: DROP INDEX idx_email_reminder_event_user_id;

-- changeset angelchang:307
CREATE INDEX IF NOT EXISTS "idx_institution_patient_date" ON "emr_record"("medical_institution_code", "patient_chart_number", "date");
-- rollback: DROP INDEX idx_institution_patient_date;

-- changeset angelchang:308
CREATE INDEX IF NOT EXISTS "idx_examination_care_connect_id_source_id_diagnosed_at" ON "examination"("care_connect_id", "source_id", "diagnosed_at");
-- rollback: DROP INDEX idx_examination_care_connect_id_source_id_diagnosed_at;

-- changeset angelchang:309
CREATE INDEX IF NOT EXISTS "idx_examination_clinic_id_user_id_diagnosed_at" ON "examination"("clinic_id", "user_id", "diagnosed_at");
-- rollback: DROP INDEX idx_examination_clinic_id_user_id_diagnosed_at;

-- changeset angelchang:310
CREATE UNIQUE INDEX IF NOT EXISTS "name_ukey" ON "feature_toggle"("name");
-- rollback: DROP INDEX name_ukey;

-- changeset angelchang:311
CREATE INDEX IF NOT EXISTS "idx_food_database_source_id" ON "food_database"("source_id");
-- rollback: DROP INDEX idx_food_database_source_id;

-- changeset angelchang:312
CREATE INDEX IF NOT EXISTS "idx_food_db_user_id" ON "food_database"("user_id");
-- rollback: DROP INDEX idx_food_db_user_id;

-- changeset angelchang:313
CREATE INDEX IF NOT EXISTS "food_database_connect_diary_id_idx" ON "food_database_connect"("diary_id");
-- rollback: DROP INDEX food_database_connect_diary_id_idx;

-- changeset angelchang:314
CREATE INDEX IF NOT EXISTS "idx_food_db_connect_user_id" ON "food_database_connect"("user_id");
-- rollback: DROP INDEX idx_food_db_connect_user_id;

-- changeset angelchang:315
ALTER TABLE "food_database_favorited" ADD CONSTRAINT "user_food_database_favorite_unique_key" UNIQUE ("user_id", "food_database_id");
-- rollback: ALTER TABLE food_database_favorited DROP CONSTRAINT user_food_database_favorite_unique_key;

-- changeset angelchang:316
ALTER TABLE "friend_notification_setting" ADD CONSTRAINT "friend_notification_setting_from_id_to_id_key" UNIQUE ("from_id", "to_id");
-- rollback: ALTER TABLE friend_notification_setting DROP CONSTRAINT friend_notification_setting_from_id_to_id_key;

-- changeset angelchang:317
CREATE INDEX IF NOT EXISTS "idx_friends_from_id" ON "friends"("from_id");
-- rollback: DROP INDEX idx_friends_from_id;

-- changeset angelchang:318
CREATE INDEX IF NOT EXISTS "idx_friends_to_id" ON "friends"("to_id");
-- rollback: DROP INDEX idx_friends_to_id;

-- changeset angelchang:319
ALTER TABLE "friends" ADD CONSTRAINT "friends_from_id_to_id_key" UNIQUE ("from_id", "to_id");
-- rollback: ALTER TABLE friends DROP CONSTRAINT friends_from_id_to_id_key;

-- changeset angelchang:320
CREATE INDEX IF NOT EXISTS "idx_user_identity" ON "fubon_insurance_promotion"("user_identity");
-- rollback: DROP INDEX idx_user_identity;

-- changeset angelchang:321
CREATE TABLE IF NOT EXISTS "email_verify" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "email" TEXT NOT NULL, "code" TEXT NOT NULL, "user_id" INTEGER NOT NULL, "status" TEXT NOT NULL, CONSTRAINT "email_verify_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE email_verify;

-- changeset angelchang:322
CREATE INDEX IF NOT EXISTS "idx_health_user_avatar_id" ON "health_user"("avatar_id");
-- rollback: DROP INDEX idx_health_user_avatar_id;

-- changeset angelchang:323
CREATE INDEX IF NOT EXISTS "idx_health_user_created_at_country" ON "health_user"("created_at", "country");
-- rollback: DROP INDEX idx_health_user_created_at_country;

-- changeset angelchang:324
CREATE INDEX IF NOT EXISTS "idx_health_user_identity" ON "health_user"("identity");
-- rollback: DROP INDEX idx_health_user_identity;

-- changeset angelchang:325
CREATE INDEX IF NOT EXISTS "idx_health_user_tester_pseudo_status" ON "health_user"("is_tester", "is_pseudo", "status");
-- rollback: DROP INDEX idx_health_user_tester_pseudo_status;

-- changeset angelchang:326
ALTER TABLE "health_user" ADD CONSTRAINT "health_user_email_key" UNIQUE ("email");
-- rollback: ALTER TABLE health_user DROP CONSTRAINT health_user_email_key;

-- changeset angelchang:327
CREATE INDEX IF NOT EXISTS "idx_heartbeat_user_id_sync_time" ON "heartbeat"("user_id", "sync_time");
-- rollback: DROP INDEX idx_heartbeat_user_id_sync_time;

-- changeset angelchang:328
CREATE INDEX IF NOT EXISTS "idx_hl_cgm_1m_message_event_user_id" ON "hl_cgm_1m_message_event"("user_id");
-- rollback: DROP INDEX idx_hl_cgm_1m_message_event_user_id;

-- changeset angelchang:329
CREATE INDEX IF NOT EXISTS "idx_hl_cgm_1m_v2_message_event_user_id" ON "hl_cgm_1m_v2_message_event"("user_id");
-- rollback: DROP INDEX idx_hl_cgm_1m_v2_message_event_user_id;

-- changeset angelchang:330
CREATE INDEX IF NOT EXISTS "idx_hl_cgm_2m_message_event_user_id" ON "hl_cgm_2m_message_event"("user_id");
-- rollback: DROP INDEX idx_hl_cgm_2m_message_event_user_id;

-- changeset angelchang:331
CREATE INDEX IF NOT EXISTS "idx_hl_cgm_3m_message_event_user_id" ON "hl_cgm_3m_message_event"("user_id");
-- rollback: DROP INDEX idx_hl_cgm_3m_message_event_user_id;

-- changeset angelchang:332
CREATE INDEX IF NOT EXISTS "idx_hl_cgm_message_event_user_id" ON "hl_cgm_message_event"("user_id");
-- rollback: DROP INDEX idx_hl_cgm_message_event_user_id;

-- changeset angelchang:333
CREATE INDEX IF NOT EXISTS "idx_hl_cgm_policyholder_message_event_user_id" ON "hl_cgm_policyholder_message_event"("user_id");
-- rollback: DROP INDEX idx_hl_cgm_policyholder_message_event_user_id;

-- changeset angelchang:334
CREATE INDEX IF NOT EXISTS "idx_hourly_steps_created_at" ON "hourly_steps"("created_at");
-- rollback: DROP INDEX idx_hourly_steps_created_at;

-- changeset angelchang:335
CREATE INDEX IF NOT EXISTS "idx_hourly_steps_recorded_at" ON "hourly_steps"("recorded_at");
-- rollback: DROP INDEX idx_hourly_steps_recorded_at;

-- changeset angelchang:336
CREATE UNIQUE INDEX IF NOT EXISTS "idx_step_user_id_recorded_at_source" ON "hourly_steps"("user_id", "recorded_at", "source");
-- rollback: DROP INDEX idx_step_user_id_recorded_at_source;

-- changeset angelchang:337
CREATE INDEX IF NOT EXISTS "idx_insulin_conn_diary_ids" ON "insulin_connect"("diary_id");
-- rollback: DROP INDEX idx_insulin_conn_diary_ids;

-- changeset angelchang:338
ALTER TABLE "insulin_connect" ADD CONSTRAINT "insulin_connect_ukey" UNIQUE ("user_id", "role", "insulin_id", "diary_id");
-- rollback: ALTER TABLE insulin_connect DROP CONSTRAINT insulin_connect_ukey;

-- changeset angelchang:339
CREATE INDEX IF NOT EXISTS "idx_interactive_form_created_at_status" ON "interactive_form"("created_at" DESC, "status");
-- rollback: DROP INDEX idx_interactive_form_created_at_status;

-- changeset angelchang:340
CREATE INDEX IF NOT EXISTS "idx_interactive_form_connect_ifid_status" ON "interactive_form_connect"("interactive_form_id", "status");
-- rollback: DROP INDEX idx_interactive_form_connect_ifid_status;

-- changeset angelchang:341
CREATE INDEX IF NOT EXISTS "idx_interactive_form_connect_send_to" ON "interactive_form_connect"("send_to");
-- rollback: DROP INDEX idx_interactive_form_connect_send_to;

-- changeset angelchang:342
CREATE INDEX IF NOT EXISTS "idx_interactive_form_connect_status" ON "interactive_form_connect"("status");
-- rollback: DROP INDEX idx_interactive_form_connect_status;

-- changeset angelchang:343
CREATE INDEX IF NOT EXISTS "idx_invitation_invitee_id" ON "invitation"("invitee_id");
-- rollback: DROP INDEX idx_invitation_invitee_id;

-- changeset angelchang:344
CREATE UNIQUE INDEX IF NOT EXISTS unique_unused_invite_code ON public.invitation USING btree (invite_code) WHERE (invite_code IS NOT NULL);
-- rollback: DROP INDEX unique_unused_invite_code;

-- changeset angelchang:345
CREATE INDEX IF NOT EXISTS idx_lab_result_identify ON public.lab_result USING btree (identify) WHERE (NOT exported);
-- rollback: DROP INDEX idx_lab_result_identify;

-- changeset angelchang:346
ALTER TABLE "libreview_subscription_plan" ADD CONSTRAINT "libreview_subscription_plan_product_id_key" UNIQUE ("product_id");
-- rollback: ALTER TABLE libreview_subscription_plan DROP CONSTRAINT libreview_subscription_plan_product_id_key;

-- changeset angelchang:347
CREATE UNIQUE INDEX IF NOT EXISTS "unique_medicine_reminder_user_id_medicine_type_uid" ON "medicine_reminder"("user_id", "medicine_type", "uid");
-- rollback: DROP INDEX unique_medicine_reminder_user_id_medicine_type_uid;

-- changeset angelchang:348
ALTER TABLE "meter" ADD CONSTRAINT "meter_brand_model_unique_key" UNIQUE ("brand", "model");
-- rollback: ALTER TABLE meter DROP CONSTRAINT meter_brand_model_unique_key;

-- changeset angelchang:349
ALTER TABLE "meter" ADD CONSTRAINT "meter_refer_number_unique_key" UNIQUE ("refer_number");
-- rollback: ALTER TABLE meter DROP CONSTRAINT meter_refer_number_unique_key;

-- changeset angelchang:350
CREATE INDEX IF NOT EXISTS idx_moshi_campaign_id ON public.moshi USING btree (moshi_campaign_id, status) WHERE (moshi_campaign_id IS NOT NULL);
-- rollback: DROP INDEX idx_moshi_campaign_id;

-- changeset angelchang:351
CREATE INDEX IF NOT EXISTS "idx_moshi_clinic_receiver_status_created_at_sender" ON "moshi"("clinic_id", "receiver_id", "status", "created_at" DESC, "sender_id");
-- rollback: DROP INDEX idx_moshi_clinic_receiver_status_created_at_sender;

-- changeset angelchang:352
CREATE INDEX IF NOT EXISTS idx_moshi_receiver_created_at_status ON public.moshi USING btree (receiver_id, created_at DESC) WHERE (status <> ALL (ARRAY['deleted'::text, 'archived'::text]));
-- rollback: DROP INDEX idx_moshi_receiver_created_at_status;

-- changeset angelchang:353
CREATE INDEX IF NOT EXISTS "idx_moshi_receiver_sender_status" ON "moshi"("receiver_id", "sender_id", "status");
-- rollback: DROP INDEX idx_moshi_receiver_sender_status;

-- changeset angelchang:354
CREATE INDEX IF NOT EXISTS "idx_moshi_sender_created_at" ON "moshi"("created_at", "sender_id");
-- rollback: DROP INDEX idx_moshi_sender_created_at;

-- changeset angelchang:355
CREATE INDEX IF NOT EXISTS "idx_moshi_sender_receiver_clinic_created_at_status" ON "moshi"("sender_id", "receiver_id", "clinic_id", "status", "created_at");
-- rollback: DROP INDEX idx_moshi_sender_receiver_clinic_created_at_status;

-- changeset angelchang:356
CREATE INDEX IF NOT EXISTS "idx_moshi_attachment_moshi_id" ON "moshi_attachment"("moshi_id");
-- rollback: DROP INDEX idx_moshi_attachment_moshi_id;

-- changeset angelchang:357
CREATE INDEX IF NOT EXISTS "idx_niigata_dm_message_event_user_id" ON "niigata_dm_message_event"("user_id");
-- rollback: DROP INDEX idx_niigata_dm_message_event_user_id;

-- changeset angelchang:358
CREATE INDEX IF NOT EXISTS "idx_om_conn_diary_id" ON "oral_medicine_connect"("diary_id");
-- rollback: DROP INDEX idx_om_conn_diary_id;

-- changeset angelchang:359
ALTER TABLE "oral_medicine_connect" ADD CONSTRAINT "oral_medicine_connect_ukey" UNIQUE ("user_id", "role", "oral_medicine_id", "diary_id");
-- rollback: ALTER TABLE oral_medicine_connect DROP CONSTRAINT oral_medicine_connect_ukey;

-- changeset angelchang:360
CREATE INDEX IF NOT EXISTS "idx_data_monthly_stats_year_month_care_connect_id" ON "origin_medical_data_monthly_stats"("year", "month", "care_connect_id");
-- rollback: DROP INDEX idx_data_monthly_stats_year_month_care_connect_id;

-- changeset angelchang:361
CREATE INDEX IF NOT EXISTS "idx_data_monthly_stats_year_month_clinic_id_is_pseudo" ON "origin_medical_data_monthly_stats"("year", "month", "clinic_id", "is_pseudo");
-- rollback: DROP INDEX idx_data_monthly_stats_year_month_clinic_id_is_pseudo;

-- changeset angelchang:362
CREATE INDEX IF NOT EXISTS "idx_data_monthly_stats_year_month_clinic_id_user_id_is_pseudo" ON "origin_medical_data_monthly_stats"("year", "month", "clinic_id", "user_id", "is_pseudo");
-- rollback: DROP INDEX idx_data_monthly_stats_year_month_clinic_id_user_id_is_pseudo;

-- changeset angelchang:363
CREATE INDEX IF NOT EXISTS "idx_data_quarterly_stats_year_quarter_care_connect_id" ON "origin_medical_data_quarterly_stats"("year", "quarter", "care_connect_id");
-- rollback: DROP INDEX idx_data_quarterly_stats_year_quarter_care_connect_id;

-- changeset angelchang:364
CREATE INDEX IF NOT EXISTS "idx_data_quarterly_year_quarter_clinic_id_is_pseudo" ON "origin_medical_data_quarterly_stats"("year", "quarter", "clinic_id", "is_pseudo");
-- rollback: DROP INDEX idx_data_quarterly_year_quarter_clinic_id_is_pseudo;

-- changeset angelchang:365
CREATE INDEX IF NOT EXISTS "idx_data_quarterly_year_quarter_clinic_id_user_id_is_pseudo" ON "origin_medical_data_quarterly_stats"("year", "quarter", "clinic_id", "user_id", "is_pseudo");
-- rollback: DROP INDEX idx_data_quarterly_year_quarter_clinic_id_user_id_is_pseudo;

-- changeset angelchang:366
CREATE INDEX IF NOT EXISTS "idx_data_yearly_stats_year_care_connect_id" ON "origin_medical_data_yearly_stats"("year", "care_connect_id");
-- rollback: DROP INDEX idx_data_yearly_stats_year_care_connect_id;

-- changeset angelchang:367
CREATE INDEX IF NOT EXISTS "idx_self_measured_monthly_year_month_user_id" ON "origin_self_measured_monthly_stats"("year", "month", "user_id");
-- rollback: DROP INDEX idx_self_measured_monthly_year_month_user_id;

-- changeset angelchang:368
CREATE INDEX IF NOT EXISTS "idx_self_measured_quarterly_year_quarter_user_id" ON "origin_self_measured_quarterly_stats"("year", "quarter", "user_id");
-- rollback: DROP INDEX idx_self_measured_quarterly_year_quarter_user_id;

-- changeset angelchang:369
ALTER TABLE "partner_nanshan_policy_score" ADD CONSTRAINT "partner_nanshan_policy_score_policy_no_key" UNIQUE ("policy_no");
-- rollback: ALTER TABLE partner_nanshan_policy_score DROP CONSTRAINT partner_nanshan_policy_score_policy_no_key;

-- changeset angelchang:370
ALTER TABLE "partner_quaker_user_info" ADD CONSTRAINT "partner_quaker_user_info_user_id_key" UNIQUE ("user_id");
-- rollback: ALTER TABLE partner_quaker_user_info DROP CONSTRAINT partner_quaker_user_info_user_id_key;

-- changeset angelchang:371
ALTER TABLE "password_reset" ADD CONSTRAINT "password_reset_code_key" UNIQUE ("code");
-- rollback: ALTER TABLE password_reset DROP CONSTRAINT password_reset_code_key;

-- changeset angelchang:372
CREATE INDEX IF NOT EXISTS idx_peer_profile_user_id_enabled ON public.peer_profile USING btree (user_id) WHERE enabled;
-- rollback: DROP INDEX idx_peer_profile_user_id_enabled;

-- changeset angelchang:373
CREATE INDEX IF NOT EXISTS "idx_owner_id" ON "peer_recommend_connect"("owner_id");
-- rollback: DROP INDEX idx_owner_id;

-- changeset angelchang:374
CREATE INDEX IF NOT EXISTS idx_owner_recommended_at ON public.peer_recommend_connect USING btree (owner_id, recommended_at) WHERE (recommended_at IS NOT NULL);
-- rollback: DROP INDEX idx_owner_recommended_at;

-- changeset angelchang:375
CREATE INDEX IF NOT EXISTS "idx_peer_recommend_connect_owner_user_id" ON "peer_recommend_connect"("user_id", "owner_id");
-- rollback: DROP INDEX idx_peer_recommend_connect_owner_user_id;

-- changeset angelchang:376
CREATE INDEX IF NOT EXISTS "idx_peer_recommend_connect_recommended_at" ON "peer_recommend_connect"("recommended_at");
-- rollback: DROP INDEX idx_peer_recommend_connect_recommended_at;

-- changeset angelchang:377
CREATE TABLE IF NOT EXISTS "notification" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "type" TEXT NOT NULL, "receiver_id" INTEGER NOT NULL, "data" TEXT, "model" TEXT NOT NULL, "model_id" INTEGER, "viewed_at" TIMESTAMP WITHOUT TIME ZONE, CONSTRAINT "notification_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE notification;

-- changeset angelchang:378
CREATE INDEX IF NOT EXISTS "idx_peer_status_user_id" ON "peer_status"("user_id");
-- rollback: DROP INDEX idx_peer_status_user_id;

-- changeset angelchang:379
CREATE INDEX IF NOT EXISTS idx_pm_alert_conn_patient_id ON public.pm_alert USING btree (care_connect_id, patient_id) WHERE (status = 'unread'::text);
-- rollback: DROP INDEX idx_pm_alert_conn_patient_id;

-- changeset angelchang:380
CREATE INDEX IF NOT EXISTS "pm_alert_care_connect_scheduled_at_idx" ON "pm_alert"("care_connect_id", "scheduled_at");
-- rollback: DROP INDEX pm_alert_care_connect_scheduled_at_idx;

-- changeset angelchang:381
CREATE INDEX IF NOT EXISTS "pm_alert_created_at_patient_idx_category" ON "pm_alert"("created_at", "patient_id", "category");
-- rollback: DROP INDEX pm_alert_created_at_patient_idx_category;

-- changeset angelchang:382
CREATE INDEX IF NOT EXISTS "idx_premium_subscriptio_user_id" ON "premium_subscription"("user_id");
-- rollback: DROP INDEX idx_premium_subscriptio_user_id;

-- changeset angelchang:383
ALTER TABLE "pseudo_account_history" ADD CONSTRAINT "pseudo_account_history_user_id_key" UNIQUE ("user_id");
-- rollback: ALTER TABLE pseudo_account_history DROP CONSTRAINT pseudo_account_history_user_id_key;

-- changeset angelchang:384
CREATE INDEX IF NOT EXISTS "idx_report_history_owner_id" ON "report_history"("owner_id");
-- rollback: DROP INDEX idx_report_history_owner_id;

-- changeset angelchang:385
CREATE INDEX IF NOT EXISTS "idx_token" ON "si_access_token"("token");
-- rollback: DROP INDEX idx_token;

-- changeset angelchang:386
CREATE INDEX IF NOT EXISTS "idx_slider_event_user_id_expiration_date" ON "slider_event"("user_id", "expiration_date");
-- rollback: DROP INDEX idx_slider_event_user_id_expiration_date;

-- changeset angelchang:387
CREATE INDEX IF NOT EXISTS "idx_slider_record_user_id_expiration_date" ON "slider_record"("user_id", "expiration_date");
-- rollback: DROP INDEX idx_slider_record_user_id_expiration_date;

-- changeset angelchang:388
CREATE INDEX IF NOT EXISTS "idx_step_created_at_user_id" ON "step"("created_at", "user_id");
-- rollback: DROP INDEX idx_step_created_at_user_id;

-- changeset angelchang:389
CREATE INDEX IF NOT EXISTS "idx_step_start_time" ON "step"("start_time");
-- rollback: DROP INDEX idx_step_start_time;

-- changeset angelchang:390
CREATE INDEX IF NOT EXISTS "idx_step_user_id_start_time_end_time" ON "step"("user_id", "start_time", "end_time");
-- rollback: DROP INDEX idx_step_user_id_start_time_end_time;

-- changeset angelchang:391
CREATE INDEX IF NOT EXISTS "idx_step_user_id_sync_time" ON "step"("user_id", "sync_time");
-- rollback: DROP INDEX idx_step_user_id_sync_time;

-- changeset angelchang:392
CREATE INDEX IF NOT EXISTS "idx_client_id" ON "system_integrator"("client_id");
-- rollback: DROP INDEX idx_client_id;

-- changeset angelchang:393
ALTER TABLE "system_integrator" ADD CONSTRAINT "system_integrator_client_id_key" UNIQUE ("client_id");
-- rollback: ALTER TABLE system_integrator DROP CONSTRAINT system_integrator_client_id_key;

-- changeset angelchang:394
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_answer_campaign_user_form_id_key ON public.toolbox_answer USING btree (moshi_campaign_id, toolbox_form_id, user_id) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_answer_campaign_user_form_id_key;

-- changeset angelchang:395
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_answer_program_user_form_id_key ON public.toolbox_answer USING btree (toolbox_program_id, toolbox_form_id, user_id) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_answer_program_user_form_id_key;

-- changeset angelchang:396
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_attachment_producer_id_filename_deleted_at_null_key ON public.toolbox_attachment USING btree (producer_id, filename) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_attachment_producer_id_filename_deleted_at_null_key;

-- changeset angelchang:397
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_form_producer_id_name_deleted_at_null_key ON public.toolbox_form USING btree (producer_id, name) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_form_producer_id_name_deleted_at_null_key;

-- changeset angelchang:398
CREATE INDEX IF NOT EXISTS idx_toolbox_form_connect_form_id_user_connect_id_status ON public.toolbox_form_connect USING btree (user_id, toolbox_form_id, status) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX idx_toolbox_form_connect_form_id_user_connect_id_status;

-- changeset angelchang:399
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_form_connect_campaign_user_form_id_key ON public.toolbox_form_connect USING btree (moshi_campaign_id, user_id, toolbox_form_id) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_form_connect_campaign_user_form_id_key;

-- changeset angelchang:400
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_form_connect_program_user_form_id_key ON public.toolbox_form_connect USING btree (toolbox_program_id, user_id, toolbox_form_id) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_form_connect_program_user_form_id_key;

-- changeset angelchang:401
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_message_group_producer_id_name_deleted_at_null_key ON public.toolbox_message_group USING btree (producer_id, name) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_message_group_producer_id_name_deleted_at_null_key;

-- changeset angelchang:402
CREATE INDEX IF NOT EXISTS "toolbox_message_group_connect_toolbox_message_group_id" ON "toolbox_message_group_connect"("toolbox_message_group_id");
-- rollback: DROP INDEX toolbox_message_group_connect_toolbox_message_group_id;

-- changeset angelchang:403
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_message_group_id_seq_deleted_at_null_key ON public.toolbox_message_group_connect USING btree (toolbox_message_group_id, seq) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_message_group_id_seq_deleted_at_null_key;

-- changeset angelchang:404
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_program_producer_id_internal_name_deleted_at_null_key ON public.toolbox_program USING btree (producer_id, name) WHERE (deleted_at IS NULL);
-- rollback: DROP INDEX toolbox_program_producer_id_internal_name_deleted_at_null_key;

-- changeset angelchang:405
CREATE INDEX IF NOT EXISTS "idx_toolbox_program_article_connect_article_user_status" ON "toolbox_program_article_connect"("toolbox_program_user_connect_id", "toolbox_article_id", "status");
-- rollback: DROP INDEX idx_toolbox_program_article_connect_article_user_status;

-- changeset angelchang:406
CREATE INDEX IF NOT EXISTS "idx_toolbox_program_moshi_connect_moshi_status" ON "toolbox_program_moshi_connect"("moshi_id", "status");
-- rollback: DROP INDEX idx_toolbox_program_moshi_connect_moshi_status;

-- changeset angelchang:407
CREATE INDEX IF NOT EXISTS "idx_toolbox_program_user_connect_clinic_sub_user_status" ON "toolbox_program_user_connect"("clinic_subscription_id", "status");
-- rollback: DROP INDEX idx_toolbox_program_user_connect_clinic_sub_user_status;

-- changeset angelchang:408
CREATE INDEX IF NOT EXISTS "idx_toolbox_program_user_connect_user_status" ON "toolbox_program_user_connect"("user_id", "status");
-- rollback: DROP INDEX idx_toolbox_program_user_connect_user_status;

-- changeset angelchang:409
CREATE INDEX IF NOT EXISTS "toolbox_schedule_toolbox_program_id" ON "toolbox_schedule"("toolbox_program_id");
-- rollback: DROP INDEX toolbox_schedule_toolbox_program_id;

-- changeset angelchang:410
CREATE INDEX IF NOT EXISTS "idx_user_a1c_source_id" ON "user_a1c"("source", "source_id");
-- rollback: DROP INDEX idx_user_a1c_source_id;

-- changeset angelchang:411
CREATE INDEX IF NOT EXISTS "idx_user_a1c_user_id_recorded_at" ON "user_a1c"("user_id", "recorded_at");
-- rollback: DROP INDEX idx_user_a1c_user_id_recorded_at;

-- changeset angelchang:412
CREATE INDEX IF NOT EXISTS "idx_user_analysis_user_id" ON "user_analysis"("user_id");
-- rollback: DROP INDEX idx_user_analysis_user_id;

-- changeset angelchang:413
CREATE INDEX IF NOT EXISTS "idx_user_cache_user_id" ON "user_cache"("user_id");
-- rollback: DROP INDEX idx_user_cache_user_id;

-- changeset angelchang:414
CREATE UNIQUE INDEX IF NOT EXISTS user_consent_document_null_clinic_id_unique_key ON user_consent_document (category, (clinic_id IS NULL), language, fingerprint) WHERE clinic_id is NULL;
-- rollback: DROP INDEX user_consent_document_null_clinic_id_unique_key;

-- changeset angelchang:415
ALTER TABLE "user_consent_document" ADD CONSTRAINT "user_consent_document_unique_key" UNIQUE ("category", "clinic_id", "language", "fingerprint");
-- rollback: ALTER TABLE user_consent_document DROP CONSTRAINT user_consent_document_unique_key;

-- changeset angelchang:416
CREATE INDEX IF NOT EXISTS "idx_user_consent_history_user_id_category" ON "user_consent_history"("user_id", "category");
-- rollback: DROP INDEX idx_user_consent_history_user_id_category;

-- changeset angelchang:417
CREATE INDEX IF NOT EXISTS "idx_user_daily_routine_user_id_status" ON "user_daily_routine"("user_id", "status");
-- rollback: DROP INDEX idx_user_daily_routine_user_id_status;

-- changeset angelchang:418
CREATE INDEX IF NOT EXISTS "idx_user_exam_unit_user_id" ON "user_exam_unit"("user_id");
-- rollback: DROP INDEX idx_user_exam_unit_user_id;

-- changeset angelchang:419
CREATE INDEX IF NOT EXISTS idx_user_measurement_plan_active_user_id ON public.user_measurement_plan USING btree (user_id) WHERE (status = 'active'::text);
-- rollback: DROP INDEX idx_user_measurement_plan_active_user_id;

-- changeset angelchang:420
ALTER TABLE "user_meter" ADD CONSTRAINT "user_meter_unique_key" UNIQUE ("user_id", "meter_id", "user_tag_id", "serial_number", "mac_address");
-- rollback: ALTER TABLE user_meter DROP CONSTRAINT user_meter_unique_key;

-- changeset angelchang:421
CREATE INDEX IF NOT EXISTS "idx_unt_user_token_id_v1" ON "user_notification_token"("user_token_id");
-- rollback: DROP INDEX idx_unt_user_token_id_v1;

-- changeset angelchang:422
CREATE INDEX IF NOT EXISTS idx_user_pref_user_id_with_status_active ON public.user_pref USING btree (user_id) WHERE ((status)::text = 'active'::text);
-- rollback: DROP INDEX idx_user_pref_user_id_with_status_active;

-- changeset angelchang:423
CREATE INDEX IF NOT EXISTS idx_created_at_user_id_category_clinic_id ON public.user_stream USING btree (created_at DESC, user_id, category, clinic_id) WHERE (active = true);
-- rollback: DROP INDEX idx_created_at_user_id_category_clinic_id;

-- changeset angelchang:424
CREATE UNIQUE INDEX IF NOT EXISTS "idx_unique_user_stream_source_id_category" ON "user_stream"("source_id", "category");
-- rollback: DROP INDEX idx_unique_user_stream_source_id_category;

-- changeset angelchang:425
CREATE INDEX IF NOT EXISTS idx_user_id_created_at ON public.user_stream USING btree (user_id, created_at DESC) WHERE (active = true);
-- rollback: DROP INDEX idx_user_id_created_at;

-- changeset angelchang:426
CREATE INDEX IF NOT EXISTS idx_user_stream_clinic_id_active ON public.user_stream USING btree (clinic_id) WHERE (active AND (clinic_id IS NOT NULL));
-- rollback: DROP INDEX idx_user_stream_clinic_id_active;

-- changeset angelchang:427
CREATE INDEX IF NOT EXISTS idx_user_stream_user_id_active ON public.user_stream USING btree (user_id) WHERE active;
-- rollback: DROP INDEX idx_user_stream_user_id_active;

-- changeset angelchang:428
CREATE INDEX IF NOT EXISTS "idx_user_token_device_user_id" ON "user_token"("device_id", "user_id");
-- rollback: DROP INDEX idx_user_token_device_user_id;

-- changeset angelchang:429
CREATE INDEX IF NOT EXISTS idx_user_token_idx ON public.user_token USING btree (device_id, access_token) WHERE (is_valid = true);
-- rollback: DROP INDEX idx_user_token_idx;

-- changeset angelchang:430
CREATE INDEX IF NOT EXISTS idx_user_token_user_id ON public.user_token USING btree (user_id) WHERE is_valid;
-- rollback: DROP INDEX idx_user_token_user_id;

-- changeset angelchang:431
CREATE INDEX IF NOT EXISTS "idx_avatar_id" ON "warp_session"("avatar_id");
-- rollback: DROP INDEX idx_avatar_id;

-- changeset angelchang:432
CREATE INDEX IF NOT EXISTS "idx_avatar_id_uid" ON "warp_session"("avatar_id", "uid");
-- rollback: DROP INDEX idx_avatar_id_uid;

-- changeset angelchang:433
CREATE INDEX IF NOT EXISTS "idx_web_log_created_at" ON "web_log"("created_at" DESC);
-- rollback: DROP INDEX idx_web_log_created_at;

-- changeset angelchang:434
CREATE INDEX IF NOT EXISTS "idx_web_log_endpoint_btree" ON "web_log"("endpoint");
-- rollback: DROP INDEX idx_web_log_endpoint_btree;

-- changeset angelchang:435
CREATE INDEX IF NOT EXISTS "idx_web_log_user_id_created_at" ON "web_log"("user_id", "created_at" DESC);
-- rollback: DROP INDEX idx_web_log_user_id_created_at;

-- changeset angelchang:436
CREATE INDEX IF NOT EXISTS "idx_web_session_touched" ON "web_session"("touched");
-- rollback: DROP INDEX idx_web_session_touched;

-- changeset angelchang:437
CREATE INDEX IF NOT EXISTS "idx_web_session_uid" ON "web_session"("uid");
-- rollback: DROP INDEX idx_web_session_uid;

-- changeset angelchang:438
ALTER TABLE "diary_tag_name" ADD CONSTRAINT "diary_tag_name_tag_value_type_key" UNIQUE ("tag_value", "type");
-- rollback: ALTER TABLE diary_tag_name DROP CONSTRAINT diary_tag_name_tag_value_type_key;

-- changeset angelchang:439
ALTER TABLE "country" ADD CONSTRAINT "country_iso_2_key" UNIQUE ("iso_2");
-- rollback: ALTER TABLE country DROP CONSTRAINT country_iso_2_key;

-- changeset angelchang:440
ALTER TABLE "country" ADD CONSTRAINT "country_name_key" UNIQUE ("name");
-- rollback: ALTER TABLE country DROP CONSTRAINT country_name_key;

-- changeset angelchang:441
ALTER TABLE "warp_avatar" ADD CONSTRAINT "warp_avatar_email_key" UNIQUE ("email");
-- rollback: ALTER TABLE warp_avatar DROP CONSTRAINT warp_avatar_email_key;

-- changeset angelchang:442
ALTER TABLE "warp_avatar" ADD CONSTRAINT "warp_avatar_phone_number_key" UNIQUE ("phone_number");
-- rollback: ALTER TABLE warp_avatar DROP CONSTRAINT warp_avatar_phone_number_key;

-- changeset angelchang:443
CREATE INDEX IF NOT EXISTS "idx_notification_created_at" ON "notification"("created_at");
-- rollback: DROP INDEX idx_notification_created_at;

-- changeset angelchang:444
CREATE TABLE IF NOT EXISTS "alembic_version" ("version_num" VARCHAR(32) NOT NULL, CONSTRAINT "alembic_version_pkc" PRIMARY KEY ("version_num"));
-- rollback: DROP TABLE alembic_version;

-- changeset angelchang:445
CREATE TABLE IF NOT EXISTS "awsdms_ddl_audit" ("c_key" BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, "c_time" TIMESTAMP WITHOUT TIME ZONE, "c_user" VARCHAR(64), "c_txn" VARCHAR(16), "c_tag" VARCHAR(24), "c_oid" INTEGER, "c_name" VARCHAR(64), "c_schema" VARCHAR(64), "c_ddlqry" TEXT, CONSTRAINT "awsdms_ddl_audit_pkey" PRIMARY KEY ("c_key"));
-- rollback: DROP TABLE awsdms_ddl_audit;

-- changeset angelchang:446
CREATE TABLE IF NOT EXISTS "clinic_promotion_profile" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "clinic_id" INTEGER NOT NULL, "area_id" INTEGER, "city_id" INTEGER, "district_id" INTEGER, "address" TEXT, "outpatient_time" TEXT DEFAULT '[]', "phone" TEXT, "registered_url" TEXT, "introduction" TEXT, "lat" numeric, "lon" numeric, "temporary_flag" BOOLEAN DEFAULT TRUE, "usable_flag" BOOLEAN DEFAULT FALSE, "good_clinic_flag" BOOLEAN DEFAULT FALSE, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "deleted_at" TIMESTAMP WITHOUT TIME ZONE, "rating_count" INTEGER DEFAULT 0 NOT NULL, "total_rating" INTEGER DEFAULT 0 NOT NULL, "average_rating" numeric DEFAULT 0 NOT NULL, "geog_point" GEOGRAPHY, CONSTRAINT "clinic_promotion_profile_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE clinic_promotion_profile;

-- changeset angelchang:447
CREATE TABLE IF NOT EXISTS "examination_backup" ("id" INTEGER, "created_at" TIMESTAMP WITHOUT TIME ZONE, "updated_at" TIMESTAMP WITHOUT TIME ZONE, "hba1c" numeric, "total_cholesterol" numeric, "ldl_c" numeric, "hdl_c" numeric, "tg" numeric, "creatinine" numeric, "egfr" numeric, "gpt" VARCHAR(128), "urine_acr" numeric, "urine_pcr" numeric, "ckd_stage" TEXT, "alb" numeric, "bun" numeric, "type" TEXT, "diagnosed_at" date, "care_connect_id" INTEGER, "created_by" INTEGER, "fpg" numeric, "ppg" numeric, "got" numeric, "lab_result_id" INTEGER, "units" TEXT);
-- rollback: DROP TABLE examination_backup;

-- changeset angelchang:448
CREATE TABLE IF NOT EXISTS "user_picture" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "url" TEXT, "user_id" INTEGER NOT NULL, CONSTRAINT "user_picture_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_picture;

-- changeset angelchang:449
ALTER TABLE "admin_role" ADD CONSTRAINT "admin_role_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE admin_role DROP CONSTRAINT admin_role_user_id_fkey;

-- changeset angelchang:450
ALTER TABLE "affiliate_code" ADD CONSTRAINT "affiliate_code_affiliate_id_fkey" FOREIGN KEY ("affiliate_id") REFERENCES "affiliate" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE affiliate_code DROP CONSTRAINT affiliate_code_affiliate_id_fkey;

-- changeset angelchang:451
ALTER TABLE "affiliate_connect" ADD CONSTRAINT "affiliate_connect_affiliate_code_id_fkey" FOREIGN KEY ("affiliate_code_id") REFERENCES "affiliate_code" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE affiliate_connect DROP CONSTRAINT affiliate_connect_affiliate_code_id_fkey;

-- changeset angelchang:452
ALTER TABLE "affiliate_connect" ADD CONSTRAINT "affiliate_connect_affiliate_id_fkey" FOREIGN KEY ("affiliate_id") REFERENCES "affiliate" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE affiliate_connect DROP CONSTRAINT affiliate_connect_affiliate_id_fkey;

-- changeset angelchang:453
ALTER TABLE "affiliate_connect" ADD CONSTRAINT "affiliate_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE affiliate_connect DROP CONSTRAINT affiliate_connect_user_id_fkey;

-- changeset angelchang:454
ALTER TABLE "alert_setting" ADD CONSTRAINT "alert_setting_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE alert_setting DROP CONSTRAINT alert_setting_care_connect_id_fkey;

-- changeset angelchang:455
ALTER TABLE "android_device_pattern" ADD CONSTRAINT "android_device_pattern_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE android_device_pattern DROP CONSTRAINT android_device_pattern_user_id_fkey;

-- changeset angelchang:456
ALTER TABLE "antz" ADD CONSTRAINT "antz_subscribed_id_fkey" FOREIGN KEY ("subscribed_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE antz DROP CONSTRAINT antz_subscribed_id_fkey;

-- changeset angelchang:457
ALTER TABLE "antz" ADD CONSTRAINT "antz_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE antz DROP CONSTRAINT antz_user_id_fkey;

-- changeset angelchang:458
ALTER TABLE "app_alert_setting" ADD CONSTRAINT "app_alert_setting_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE app_alert_setting DROP CONSTRAINT app_alert_setting_user_id_fkey;

-- changeset angelchang:459
ALTER TABLE "app_log" ADD CONSTRAINT "app_log_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE app_log DROP CONSTRAINT app_log_user_id_fkey;

-- changeset angelchang:460
ALTER TABLE "care_connect" ADD CONSTRAINT "care_connect_clinic_code_id_fkey" FOREIGN KEY ("clinic_code_id") REFERENCES "clinic_code" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE care_connect DROP CONSTRAINT care_connect_clinic_code_id_fkey;

-- changeset angelchang:461
ALTER TABLE "care_connect" ADD CONSTRAINT "care_connect_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE care_connect DROP CONSTRAINT care_connect_clinic_id_fkey;

-- changeset angelchang:462
ALTER TABLE "care_connect" ADD CONSTRAINT "care_connect_educator_id_fkey" FOREIGN KEY ("educator_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE care_connect DROP CONSTRAINT care_connect_educator_id_fkey;

-- changeset angelchang:463
ALTER TABLE "care_connect" ADD CONSTRAINT "care_connect_last_viewed_user_id_fkey" FOREIGN KEY ("last_viewed_user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE care_connect DROP CONSTRAINT care_connect_last_viewed_user_id_fkey;

-- changeset angelchang:464
ALTER TABLE "care_connect" ADD CONSTRAINT "care_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE care_connect DROP CONSTRAINT care_connect_user_id_fkey;

-- changeset angelchang:465
ALTER TABLE "care_viewed_connect" ADD CONSTRAINT "care_viewed_connect_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE care_viewed_connect DROP CONSTRAINT care_viewed_connect_care_connect_id_fkey;

-- changeset angelchang:466
ALTER TABLE "care_viewed_connect" ADD CONSTRAINT "care_viewed_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE care_viewed_connect DROP CONSTRAINT care_viewed_connect_user_id_fkey;

-- changeset angelchang:467
ALTER TABLE "cgm_sync_history" ADD CONSTRAINT "cgm_sync_history_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE cgm_sync_history DROP CONSTRAINT cgm_sync_history_clinic_id_fkey;

-- changeset angelchang:468
ALTER TABLE "cgm_sync_history" ADD CONSTRAINT "cgm_sync_history_updated_by_fkey" FOREIGN KEY ("updated_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE cgm_sync_history DROP CONSTRAINT cgm_sync_history_updated_by_fkey;

-- changeset angelchang:469
ALTER TABLE "cgm_sync_history" ADD CONSTRAINT "cgm_sync_history_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE cgm_sync_history DROP CONSTRAINT cgm_sync_history_user_id_fkey;

-- changeset angelchang:470
ALTER TABLE "clinic" ADD CONSTRAINT "clinic_account_manager_id_fkey" FOREIGN KEY ("account_manager_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic DROP CONSTRAINT clinic_account_manager_id_fkey;

-- changeset angelchang:471
ALTER TABLE "clinic_chart" ADD CONSTRAINT "clinic_chart_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_chart DROP CONSTRAINT clinic_chart_care_connect_id_fkey;

-- changeset angelchang:472
ALTER TABLE "clinic_chart" ADD CONSTRAINT "clinic_chart_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_chart DROP CONSTRAINT clinic_chart_clinic_id_fkey;

-- changeset angelchang:473
ALTER TABLE "clinic_chart" ADD CONSTRAINT "clinic_chart_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_chart DROP CONSTRAINT clinic_chart_created_by_fkey;

-- changeset angelchang:474
ALTER TABLE "clinic_chart" ADD CONSTRAINT "clinic_chart_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_chart DROP CONSTRAINT clinic_chart_user_id_fkey;

-- changeset angelchang:475
ALTER TABLE "clinic_code" ADD CONSTRAINT "clinic_code_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_code DROP CONSTRAINT clinic_code_care_connect_id_fkey;

-- changeset angelchang:476
ALTER TABLE "clinic_code" ADD CONSTRAINT "clinic_code_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_code DROP CONSTRAINT clinic_code_clinic_id_fkey;

-- changeset angelchang:477
ALTER TABLE "clinic_config" ADD CONSTRAINT "clinic_config_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_config DROP CONSTRAINT clinic_config_clinic_id_fkey;

-- changeset angelchang:478
ALTER TABLE "clinic" ADD CONSTRAINT "clinic_country_id_fkey" FOREIGN KEY ("country_id") REFERENCES "country" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic DROP CONSTRAINT clinic_country_id_fkey;

-- changeset angelchang:479
ALTER TABLE "clinic_daily_comment" ADD CONSTRAINT "clinic_daily_comment_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_daily_comment DROP CONSTRAINT clinic_daily_comment_clinic_id_fkey;

-- changeset angelchang:480
ALTER TABLE "clinic_daily_comment" ADD CONSTRAINT "clinic_daily_comment_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_daily_comment DROP CONSTRAINT clinic_daily_comment_created_by_fkey;

-- changeset angelchang:481
ALTER TABLE "clinic_daily_comment" ADD CONSTRAINT "clinic_daily_comment_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_daily_comment DROP CONSTRAINT clinic_daily_comment_user_id_fkey;

-- changeset angelchang:482
ALTER TABLE "clinic_discount" ADD CONSTRAINT "clinic_discount_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_discount DROP CONSTRAINT clinic_discount_clinic_id_fkey;

-- changeset angelchang:483
ALTER TABLE "clinic_discount_code" ADD CONSTRAINT "clinic_discount_code_discount_id_fkey" FOREIGN KEY ("discount_id") REFERENCES "clinic_discount" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_discount_code DROP CONSTRAINT clinic_discount_code_discount_id_fkey;

-- changeset angelchang:484
ALTER TABLE "clinic_discount_code" ADD CONSTRAINT "clinic_discount_code_subscription_id_fkey" FOREIGN KEY ("subscription_id") REFERENCES "clinic_subscription" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_discount_code DROP CONSTRAINT clinic_discount_code_subscription_id_fkey;

-- changeset angelchang:485
ALTER TABLE "clinic_discount_code" ADD CONSTRAINT "clinic_discount_code_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_discount_code DROP CONSTRAINT clinic_discount_code_user_id_fkey;

-- changeset angelchang:486
ALTER TABLE "clinic_discount" ADD CONSTRAINT "clinic_discount_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "clinic_plan" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_discount DROP CONSTRAINT clinic_discount_plan_id_fkey;

-- changeset angelchang:487
ALTER TABLE "clinic_exam_chart" ADD CONSTRAINT "clinic_exam_chart_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE clinic_exam_chart DROP CONSTRAINT clinic_exam_chart_clinic_id_fkey;

-- changeset angelchang:488
ALTER TABLE "clinic_exam_unit" ADD CONSTRAINT "clinic_exam_unit_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE clinic_exam_unit DROP CONSTRAINT clinic_exam_unit_clinic_id_fkey;

-- changeset angelchang:489
ALTER TABLE "clinic_feature" ADD CONSTRAINT "clinic_feature_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_feature DROP CONSTRAINT clinic_feature_clinic_id_fkey;

-- changeset angelchang:490
ALTER TABLE "clinic_group" ADD CONSTRAINT "clinic_group_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_group DROP CONSTRAINT clinic_group_clinic_id_fkey;

-- changeset angelchang:491
ALTER TABLE "clinic_group_connect" ADD CONSTRAINT "clinic_group_connect_clinic_group_id_fkey" FOREIGN KEY ("clinic_group_id") REFERENCES "clinic_group" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_group_connect DROP CONSTRAINT clinic_group_connect_clinic_group_id_fkey;

-- changeset angelchang:492
ALTER TABLE "clinic_group_connect" ADD CONSTRAINT "clinic_group_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_group_connect DROP CONSTRAINT clinic_group_connect_user_id_fkey;

-- changeset angelchang:493
ALTER TABLE "clinic_loyalty_rule" ADD CONSTRAINT "clinic_loyalty_rule_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_loyalty_rule DROP CONSTRAINT clinic_loyalty_rule_clinic_id_fkey;

-- changeset angelchang:494
ALTER TABLE "clinic_loyalty_transaction" ADD CONSTRAINT "clinic_loyalty_transaction_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_loyalty_transaction DROP CONSTRAINT clinic_loyalty_transaction_care_connect_id_fkey;

-- changeset angelchang:495
ALTER TABLE "clinic_loyalty_transaction" ADD CONSTRAINT "clinic_loyalty_transaction_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_loyalty_transaction DROP CONSTRAINT clinic_loyalty_transaction_clinic_id_fkey;

-- changeset angelchang:496
ALTER TABLE "clinic_loyalty_transaction" ADD CONSTRAINT "clinic_loyalty_transaction_clinic_loyalty_rule_id_fkey" FOREIGN KEY ("clinic_loyalty_rule_id") REFERENCES "clinic_loyalty_rule" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_loyalty_transaction DROP CONSTRAINT clinic_loyalty_transaction_clinic_loyalty_rule_id_fkey;

-- changeset angelchang:497
ALTER TABLE "clinic_loyalty_transaction" ADD CONSTRAINT "clinic_loyalty_transaction_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_loyalty_transaction DROP CONSTRAINT clinic_loyalty_transaction_diary_id_fkey;

-- changeset angelchang:498
ALTER TABLE "clinic_loyalty_transaction" ADD CONSTRAINT "clinic_loyalty_transaction_redemption_id_fkey" FOREIGN KEY ("redemption_id") REFERENCES "clinic_redemption" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_loyalty_transaction DROP CONSTRAINT clinic_loyalty_transaction_redemption_id_fkey;

-- changeset angelchang:499
ALTER TABLE "clinic_loyalty_transaction" ADD CONSTRAINT "clinic_loyalty_transaction_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_loyalty_transaction DROP CONSTRAINT clinic_loyalty_transaction_user_id_fkey;

-- changeset angelchang:500
ALTER TABLE "clinic_mark" ADD CONSTRAINT "clinic_mark_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_mark DROP CONSTRAINT clinic_mark_clinic_id_fkey;

-- changeset angelchang:501
ALTER TABLE "clinic_mark" ADD CONSTRAINT "clinic_mark_updated_by_id_fkey" FOREIGN KEY ("updated_by_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_mark DROP CONSTRAINT clinic_mark_updated_by_id_fkey;

-- changeset angelchang:502
ALTER TABLE "clinic_mark" ADD CONSTRAINT "clinic_mark_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_mark DROP CONSTRAINT clinic_mark_user_id_fkey;

-- changeset angelchang:503
ALTER TABLE "clinic_medicine" ADD CONSTRAINT "clinic_medicine_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_medicine DROP CONSTRAINT clinic_medicine_clinic_id_fkey;

-- changeset angelchang:504
ALTER TABLE "clinic_medicine" ADD CONSTRAINT "clinic_medicine_emr_record_id_fkey" FOREIGN KEY ("emr_record_id") REFERENCES "emr_record" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_medicine DROP CONSTRAINT clinic_medicine_emr_record_id_fkey;

-- changeset angelchang:505
ALTER TABLE "clinic_medicine" ADD CONSTRAINT "clinic_medicine_insulin_id_fkey" FOREIGN KEY ("insulin_id") REFERENCES "insulin" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_medicine DROP CONSTRAINT clinic_medicine_insulin_id_fkey;

-- changeset angelchang:506
ALTER TABLE "clinic_medicine" ADD CONSTRAINT "clinic_medicine_oral_medicine_id_fkey" FOREIGN KEY ("oral_medicine_id") REFERENCES "oral_medicine" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_medicine DROP CONSTRAINT clinic_medicine_oral_medicine_id_fkey;

-- changeset angelchang:507
ALTER TABLE "clinic_medicine" ADD CONSTRAINT "clinic_medicine_updated_by_fkey" FOREIGN KEY ("updated_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_medicine DROP CONSTRAINT clinic_medicine_updated_by_fkey;

-- changeset angelchang:508
ALTER TABLE "clinic_medicine" ADD CONSTRAINT "clinic_medicine_user_prescription_qr_code_id_fkey" FOREIGN KEY ("user_prescription_qr_code_id") REFERENCES "user_prescription_qr_code" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_medicine DROP CONSTRAINT clinic_medicine_user_prescription_qr_code_id_fkey;

-- changeset angelchang:509
ALTER TABLE "clinic_message_images" ADD CONSTRAINT "clinic_message_images_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_message_images DROP CONSTRAINT clinic_message_images_clinic_id_fkey;

-- changeset angelchang:510
ALTER TABLE "clinic_message_images" ADD CONSTRAINT "clinic_message_images_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_message_images DROP CONSTRAINT clinic_message_images_user_id_fkey;

-- changeset angelchang:511
ALTER TABLE "clinic_message_pdf" ADD CONSTRAINT "clinic_message_pdf_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_message_pdf DROP CONSTRAINT clinic_message_pdf_clinic_id_fkey;

-- changeset angelchang:512
ALTER TABLE "clinic_message_pdf" ADD CONSTRAINT "clinic_message_pdf_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_message_pdf DROP CONSTRAINT clinic_message_pdf_user_id_fkey;

-- changeset angelchang:513
ALTER TABLE "clinic_message_templates" ADD CONSTRAINT "clinic_message_templates_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_message_templates DROP CONSTRAINT clinic_message_templates_clinic_id_fkey;

-- changeset angelchang:514
ALTER TABLE "clinic_message_templates" ADD CONSTRAINT "clinic_message_templates_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_message_templates DROP CONSTRAINT clinic_message_templates_user_id_fkey;

-- changeset angelchang:515
ALTER TABLE "clinic_meter_program" ADD CONSTRAINT "clinic_meter_program_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_meter_program DROP CONSTRAINT clinic_meter_program_clinic_id_fkey;

-- changeset angelchang:516
ALTER TABLE "clinic_meter_program_history" ADD CONSTRAINT "clinic_meter_program_history_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_meter_program_history DROP CONSTRAINT clinic_meter_program_history_clinic_id_fkey;

-- changeset angelchang:517
ALTER TABLE "clinic_meter_program_history" ADD CONSTRAINT "clinic_meter_program_history_clinic_meter_program_id_fkey" FOREIGN KEY ("clinic_meter_program_id") REFERENCES "clinic_meter_program" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_meter_program_history DROP CONSTRAINT clinic_meter_program_history_clinic_meter_program_id_fkey;

-- changeset angelchang:518
ALTER TABLE "clinic_meter_program_transaction" ADD CONSTRAINT "clinic_meter_program_transact_clinic_loyalty_transaction_i_fkey" FOREIGN KEY ("clinic_loyalty_transaction_id") REFERENCES "clinic_loyalty_transaction" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_meter_program_transaction DROP CONSTRAINT clinic_meter_program_transact_clinic_loyalty_transaction_i_fkey;

-- changeset angelchang:519
ALTER TABLE "clinic_meter_program_transaction" ADD CONSTRAINT "clinic_meter_program_transaction_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_meter_program_transaction DROP CONSTRAINT clinic_meter_program_transaction_clinic_id_fkey;

-- changeset angelchang:520
ALTER TABLE "clinic_meter_program_transaction" ADD CONSTRAINT "clinic_meter_program_transaction_clinic_meter_program_id_fkey" FOREIGN KEY ("clinic_meter_program_id") REFERENCES "clinic_meter_program" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_meter_program_transaction DROP CONSTRAINT clinic_meter_program_transaction_clinic_meter_program_id_fkey;

-- changeset angelchang:521
ALTER TABLE "clinic_note" ADD CONSTRAINT "clinic_note_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_note DROP CONSTRAINT clinic_note_clinic_id_fkey;

-- changeset angelchang:522
ALTER TABLE "clinic_note" ADD CONSTRAINT "clinic_note_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_note DROP CONSTRAINT clinic_note_created_by_fkey;

-- changeset angelchang:523
ALTER TABLE "clinic_note_tag" ADD CONSTRAINT "clinic_note_tag_clinic_note_id_fkey" FOREIGN KEY ("clinic_note_id") REFERENCES "clinic_note" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_note_tag DROP CONSTRAINT clinic_note_tag_clinic_note_id_fkey;

-- changeset angelchang:524
ALTER TABLE "clinic_note" ADD CONSTRAINT "clinic_note_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_note DROP CONSTRAINT clinic_note_user_id_fkey;

-- changeset angelchang:525
ALTER TABLE "clinic_notification_setting" ADD CONSTRAINT "clinic_notification_setting_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_notification_setting DROP CONSTRAINT clinic_notification_setting_clinic_id_fkey;

-- changeset angelchang:526
ALTER TABLE "clinic_notification_setting" ADD CONSTRAINT "clinic_notification_setting_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_notification_setting DROP CONSTRAINT clinic_notification_setting_user_id_fkey;

-- changeset angelchang:527
ALTER TABLE "clinic_plan" ADD CONSTRAINT "clinic_plan_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_plan DROP CONSTRAINT clinic_plan_clinic_id_fkey;

-- changeset angelchang:528
ALTER TABLE "clinic_plan_waiting" ADD CONSTRAINT "clinic_plan_waiting_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "clinic_plan" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_plan_waiting DROP CONSTRAINT clinic_plan_waiting_plan_id_fkey;

-- changeset angelchang:529
ALTER TABLE "clinic_plan_waiting" ADD CONSTRAINT "clinic_plan_waiting_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_plan_waiting DROP CONSTRAINT clinic_plan_waiting_user_id_fkey;

-- changeset angelchang:530
ALTER TABLE "clinic_point" ADD CONSTRAINT "clinic_point_a1c_id_fkey" FOREIGN KEY ("a1c_id") REFERENCES "user_a1c" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_point DROP CONSTRAINT clinic_point_a1c_id_fkey;

-- changeset angelchang:531
ALTER TABLE "clinic_point" ADD CONSTRAINT "clinic_point_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_point DROP CONSTRAINT clinic_point_care_connect_id_fkey;

-- changeset angelchang:532
ALTER TABLE "clinic_point" ADD CONSTRAINT "clinic_point_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_point DROP CONSTRAINT clinic_point_clinic_id_fkey;

-- changeset angelchang:533
ALTER TABLE "clinic_point" ADD CONSTRAINT "clinic_point_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_point DROP CONSTRAINT clinic_point_diary_id_fkey;

-- changeset angelchang:534
ALTER TABLE "clinic_point" ADD CONSTRAINT "clinic_point_redemption_id_fkey" FOREIGN KEY ("redemption_id") REFERENCES "clinic_redemption" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_point DROP CONSTRAINT clinic_point_redemption_id_fkey;

-- changeset angelchang:535
ALTER TABLE "clinic_point" ADD CONSTRAINT "clinic_point_reward_id_fkey" FOREIGN KEY ("reward_id") REFERENCES "clinic_reward" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_point DROP CONSTRAINT clinic_point_reward_id_fkey;

-- changeset angelchang:536
ALTER TABLE "clinic_point" ADD CONSTRAINT "clinic_point_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_point DROP CONSTRAINT clinic_point_user_id_fkey;

-- changeset angelchang:537
ALTER TABLE "clinic_prescription" ADD CONSTRAINT "clinic_prescription_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_prescription DROP CONSTRAINT clinic_prescription_clinic_id_fkey;

-- changeset angelchang:538
ALTER TABLE "clinic_prescription" ADD CONSTRAINT "clinic_prescription_clinic_note_id_fkey" FOREIGN KEY ("clinic_note_id") REFERENCES "clinic_note" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_prescription DROP CONSTRAINT clinic_prescription_clinic_note_id_fkey;

-- changeset angelchang:539
ALTER TABLE "clinic_prescription" ADD CONSTRAINT "clinic_prescription_emr_record_id_fkey" FOREIGN KEY ("emr_record_id") REFERENCES "emr_record" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_prescription DROP CONSTRAINT clinic_prescription_emr_record_id_fkey;

-- changeset angelchang:540
ALTER TABLE "clinic_prescription" ADD CONSTRAINT "clinic_prescription_parent_clinic_prescription_id_fkey" FOREIGN KEY ("parent_clinic_prescription_id") REFERENCES "clinic_prescription" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_prescription DROP CONSTRAINT clinic_prescription_parent_clinic_prescription_id_fkey;

-- changeset angelchang:541
ALTER TABLE "clinic_prescription" ADD CONSTRAINT "clinic_prescription_updated_by_fkey" FOREIGN KEY ("updated_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_prescription DROP CONSTRAINT clinic_prescription_updated_by_fkey;

-- changeset angelchang:542
ALTER TABLE "clinic_prescription" ADD CONSTRAINT "clinic_prescription_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_prescription DROP CONSTRAINT clinic_prescription_user_id_fkey;

-- changeset angelchang:543
ALTER TABLE "clinic_prescription" ADD CONSTRAINT "clinic_prescription_user_prescription_qr_code_id_fkey" FOREIGN KEY ("user_prescription_qr_code_id") REFERENCES "user_prescription_qr_code" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_prescription DROP CONSTRAINT clinic_prescription_user_prescription_qr_code_id_fkey;

-- changeset angelchang:544
ALTER TABLE "clinic_program" ADD CONSTRAINT "clinic_program_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_program DROP CONSTRAINT clinic_program_clinic_id_fkey;

-- changeset angelchang:545
ALTER TABLE "clinic_program" ADD CONSTRAINT "clinic_program_sponsor_id_fkey" FOREIGN KEY ("sponsor_id") REFERENCES "clinic_sponsor" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_program DROP CONSTRAINT clinic_program_sponsor_id_fkey;

-- changeset angelchang:546
ALTER TABLE "clinic_program" ADD CONSTRAINT "clinic_program_updated_by_fkey" FOREIGN KEY ("updated_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_program DROP CONSTRAINT clinic_program_updated_by_fkey;

-- changeset angelchang:547
ALTER TABLE "clinic_reminder" ADD CONSTRAINT "clinic_reminder_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_reminder DROP CONSTRAINT clinic_reminder_clinic_id_fkey;

-- changeset angelchang:548
ALTER TABLE "clinic_reminder_config" ADD CONSTRAINT "clinic_reminder_config_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_reminder_config DROP CONSTRAINT clinic_reminder_config_clinic_id_fkey;

-- changeset angelchang:549
ALTER TABLE "clinic_reminder" ADD CONSTRAINT "clinic_reminder_educator_id_fkey" FOREIGN KEY ("educator_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_reminder DROP CONSTRAINT clinic_reminder_educator_id_fkey;

-- changeset angelchang:550
ALTER TABLE "clinic_reminder" ADD CONSTRAINT "clinic_reminder_emr_record_id_fkey" FOREIGN KEY ("emr_record_id") REFERENCES "emr_record" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_reminder DROP CONSTRAINT clinic_reminder_emr_record_id_fkey;

-- changeset angelchang:551
ALTER TABLE "clinic_reminder" ADD CONSTRAINT "clinic_reminder_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_reminder DROP CONSTRAINT clinic_reminder_user_id_fkey;

-- changeset angelchang:552
ALTER TABLE "clinic_reward" ADD CONSTRAINT "clinic_reward_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_reward DROP CONSTRAINT clinic_reward_clinic_id_fkey;

-- changeset angelchang:553
ALTER TABLE "clinic_rich_content_image" ADD CONSTRAINT "clinic_rich_content_image_clinic_rich_content_message_id_fkey" FOREIGN KEY ("clinic_rich_content_message_id") REFERENCES "clinic_rich_content_message" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_rich_content_image DROP CONSTRAINT clinic_rich_content_image_clinic_rich_content_message_id_fkey;

-- changeset angelchang:554
ALTER TABLE "clinic_rich_content_message" ADD CONSTRAINT "clinic_rich_content_message_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_rich_content_message DROP CONSTRAINT clinic_rich_content_message_clinic_id_fkey;

-- changeset angelchang:555
ALTER TABLE "clinic_rich_content_receive" ADD CONSTRAINT "clinic_rich_content_receive_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_rich_content_receive DROP CONSTRAINT clinic_rich_content_receive_clinic_id_fkey;

-- changeset angelchang:556
ALTER TABLE "clinic_rich_content_receive" ADD CONSTRAINT "clinic_rich_content_receive_clinic_rich_content_message_id_fkey" FOREIGN KEY ("clinic_rich_content_message_id") REFERENCES "clinic_rich_content_message" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_rich_content_receive DROP CONSTRAINT clinic_rich_content_receive_clinic_rich_content_message_id_fkey;

-- changeset angelchang:557
ALTER TABLE "clinic_rich_content_receive" ADD CONSTRAINT "clinic_rich_content_receive_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_rich_content_receive DROP CONSTRAINT clinic_rich_content_receive_user_id_fkey;

-- changeset angelchang:558
ALTER TABLE "clinic_sponsor" ADD CONSTRAINT "clinic_sponsor_updated_by_fkey" FOREIGN KEY ("updated_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_sponsor DROP CONSTRAINT clinic_sponsor_updated_by_fkey;

-- changeset angelchang:559
ALTER TABLE "clinic_subscription" ADD CONSTRAINT "clinic_subscription_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_subscription DROP CONSTRAINT clinic_subscription_clinic_id_fkey;

-- changeset angelchang:560
ALTER TABLE "clinic_subscription" ADD CONSTRAINT "clinic_subscription_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "clinic_plan" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_subscription DROP CONSTRAINT clinic_subscription_plan_id_fkey;

-- changeset angelchang:561
ALTER TABLE "clinic_subscription" ADD CONSTRAINT "clinic_subscription_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE clinic_subscription DROP CONSTRAINT clinic_subscription_user_id_fkey;

-- changeset angelchang:562
ALTER TABLE "coach_feedback" ADD CONSTRAINT "coach_feedback_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "clinic_plan" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE coach_feedback DROP CONSTRAINT coach_feedback_plan_id_fkey;

-- changeset angelchang:563
ALTER TABLE "coach_feedback" ADD CONSTRAINT "coach_feedback_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE coach_feedback DROP CONSTRAINT coach_feedback_user_id_fkey;

-- changeset angelchang:564
ALTER TABLE "collaboration_content" ADD CONSTRAINT "collaboration_content_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE collaboration_content DROP CONSTRAINT collaboration_content_clinic_id_fkey;

-- changeset angelchang:565
ALTER TABLE "contacts" ADD CONSTRAINT "contacts_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE contacts DROP CONSTRAINT contacts_user_id_fkey;

-- changeset angelchang:566
ALTER TABLE "custom_diary_tag" ADD CONSTRAINT "custom_diary_tag_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE custom_diary_tag DROP CONSTRAINT custom_diary_tag_user_id_fkey;

-- changeset angelchang:567
ALTER TABLE "custom_medicine" ADD CONSTRAINT "custom_medicine_clinic_medicine_id_fkey" FOREIGN KEY ("clinic_medicine_id") REFERENCES "clinic_medicine" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE custom_medicine DROP CONSTRAINT custom_medicine_clinic_medicine_id_fkey;

-- changeset angelchang:568
ALTER TABLE "custom_medicine" ADD CONSTRAINT "custom_medicine_nhi_record_id_fkey" FOREIGN KEY ("nhi_record_id") REFERENCES "nhi_record" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE custom_medicine DROP CONSTRAINT custom_medicine_nhi_record_id_fkey;

-- changeset angelchang:569
ALTER TABLE "custom_medicine" ADD CONSTRAINT "custom_medicine_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE custom_medicine DROP CONSTRAINT custom_medicine_user_id_fkey;

-- changeset angelchang:570
ALTER TABLE "dashboard_cache" ADD CONSTRAINT "dashboard_cache_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE dashboard_cache DROP CONSTRAINT dashboard_cache_user_id_fkey;

-- changeset angelchang:571
ALTER TABLE "dashboard_setting" ADD CONSTRAINT "dashboard_setting_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE dashboard_setting DROP CONSTRAINT dashboard_setting_care_connect_id_fkey;

-- changeset angelchang:572
ALTER TABLE "dashboard_status" ADD CONSTRAINT "dashboard_status_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE dashboard_status DROP CONSTRAINT dashboard_status_care_connect_id_fkey;

-- changeset angelchang:573
ALTER TABLE "dashboard_status" ADD CONSTRAINT "dashboard_status_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE dashboard_status DROP CONSTRAINT dashboard_status_user_id_fkey;

-- changeset angelchang:574
ALTER TABLE "diary_attachment" ADD CONSTRAINT "diary_attachment_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE diary_attachment DROP CONSTRAINT diary_attachment_diary_id_fkey;

-- changeset angelchang:575
ALTER TABLE "diary" ADD CONSTRAINT "diary_batch_uuid_fkey" FOREIGN KEY ("batch_uuid") REFERENCES "diary_batch_record" ("batch_uuid") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE diary DROP CONSTRAINT diary_batch_uuid_fkey;

-- changeset angelchang:576
ALTER TABLE "diary" ADD CONSTRAINT "diary_meter_id_fkey" FOREIGN KEY ("user_meter_id") REFERENCES "user_meter" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE diary DROP CONSTRAINT diary_meter_id_fkey;

-- changeset angelchang:577
ALTER TABLE "diary_modification" ADD CONSTRAINT "diary_modification_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE diary_modification DROP CONSTRAINT diary_modification_care_connect_id_fkey;

-- changeset angelchang:578
ALTER TABLE "diary_modification" ADD CONSTRAINT "diary_modification_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE diary_modification DROP CONSTRAINT diary_modification_diary_id_fkey;

-- changeset angelchang:579
ALTER TABLE "diary" ADD CONSTRAINT "diary_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "product" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE diary DROP CONSTRAINT diary_product_id_fkey;

-- changeset angelchang:580
ALTER TABLE "diary" ADD CONSTRAINT "diary_setting_id_fkey" FOREIGN KEY ("setting_id") REFERENCES "user_pref" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE diary DROP CONSTRAINT diary_setting_id_fkey;

-- changeset angelchang:581
ALTER TABLE "diary_tag" ADD CONSTRAINT "diary_tag_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE CASCADE ON DELETE CASCADE;
-- rollback: ALTER TABLE diary_tag DROP CONSTRAINT diary_tag_diary_id_fkey;

-- changeset angelchang:582
ALTER TABLE "diary" ADD CONSTRAINT "diary_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE diary DROP CONSTRAINT diary_user_id_fkey;

-- changeset angelchang:583
ALTER TABLE "email_reminder_event" ADD CONSTRAINT "email_reminder_event_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE email_reminder_event DROP CONSTRAINT email_reminder_event_clinic_id_fkey;

-- changeset angelchang:584
ALTER TABLE "email_reminder_event" ADD CONSTRAINT "email_reminder_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE email_reminder_event DROP CONSTRAINT email_reminder_event_user_id_fkey;

-- changeset angelchang:585
ALTER TABLE "email_verify" ADD CONSTRAINT "email_verify_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE email_verify DROP CONSTRAINT email_verify_user_id_fkey;

-- changeset angelchang:586
ALTER TABLE "examination" ADD CONSTRAINT "examination_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE examination DROP CONSTRAINT examination_care_connect_id_fkey;

-- changeset angelchang:587
ALTER TABLE "examination" ADD CONSTRAINT "examination_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE examination DROP CONSTRAINT examination_clinic_id_fkey;

-- changeset angelchang:588
ALTER TABLE "examination" ADD CONSTRAINT "examination_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE examination DROP CONSTRAINT examination_created_by_fkey;

-- changeset angelchang:589
ALTER TABLE "examination" ADD CONSTRAINT "examination_lab_result_id_fkey" FOREIGN KEY ("lab_result_id") REFERENCES "lab_result" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE examination DROP CONSTRAINT examination_lab_result_id_fkey;

-- changeset angelchang:590
ALTER TABLE "examination" ADD CONSTRAINT "examination_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE examination DROP CONSTRAINT examination_user_id_fkey;

-- changeset angelchang:591
ALTER TABLE "feedback" ADD CONSTRAINT "feedback_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE feedback DROP CONSTRAINT feedback_user_id_fkey;

-- changeset angelchang:592
ALTER TABLE "moshi_campaign" ADD CONSTRAINT "fk_clinic" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE moshi_campaign DROP CONSTRAINT fk_clinic;

-- changeset angelchang:593
ALTER TABLE "toolbox_producer_clinic_connect" ADD CONSTRAINT "fk_clinic" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE toolbox_producer_clinic_connect DROP CONSTRAINT fk_clinic;

-- changeset angelchang:594
ALTER TABLE "food_classification" ADD CONSTRAINT "food_classification_diary_attachment_id_fkey" FOREIGN KEY ("diary_attachment_id") REFERENCES "diary_attachment" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_classification DROP CONSTRAINT food_classification_diary_attachment_id_fkey;

-- changeset angelchang:595
ALTER TABLE "food_classification" ADD CONSTRAINT "food_classification_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_classification DROP CONSTRAINT food_classification_user_id_fkey;

-- changeset angelchang:596
ALTER TABLE "food_database_connect" ADD CONSTRAINT "food_database_connect_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_database_connect DROP CONSTRAINT food_database_connect_diary_id_fkey;

-- changeset angelchang:597
ALTER TABLE "food_database_connect" ADD CONSTRAINT "food_database_connect_food_database_id_fkey" FOREIGN KEY ("food_database_id") REFERENCES "food_database" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_database_connect DROP CONSTRAINT food_database_connect_food_database_id_fkey;

-- changeset angelchang:598
ALTER TABLE "food_database_connect" ADD CONSTRAINT "food_database_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_database_connect DROP CONSTRAINT food_database_connect_user_id_fkey;

-- changeset angelchang:599
ALTER TABLE "food_database_favorited" ADD CONSTRAINT "food_database_favorited_food_database_id_fkey" FOREIGN KEY ("food_database_id") REFERENCES "food_database" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_database_favorited DROP CONSTRAINT food_database_favorited_food_database_id_fkey;

-- changeset angelchang:600
ALTER TABLE "food_database_favorited" ADD CONSTRAINT "food_database_favorited_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_database_favorited DROP CONSTRAINT food_database_favorited_user_id_fkey;

-- changeset angelchang:601
ALTER TABLE "food_database" ADD CONSTRAINT "food_database_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_database DROP CONSTRAINT food_database_user_id_fkey;

-- changeset angelchang:602
ALTER TABLE "friend_notification_setting" ADD CONSTRAINT "friend_notification_setting_from_id_fkey" FOREIGN KEY ("from_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE friend_notification_setting DROP CONSTRAINT friend_notification_setting_from_id_fkey;

-- changeset angelchang:603
ALTER TABLE "friend_notification_setting" ADD CONSTRAINT "friend_notification_setting_to_id_fkey" FOREIGN KEY ("to_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE friend_notification_setting DROP CONSTRAINT friend_notification_setting_to_id_fkey;

-- changeset angelchang:604
ALTER TABLE "friends" ADD CONSTRAINT "friends_from_id_fkey" FOREIGN KEY ("from_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE friends DROP CONSTRAINT friends_from_id_fkey;

-- changeset angelchang:605
ALTER TABLE "friends" ADD CONSTRAINT "friends_to_id_fkey" FOREIGN KEY ("to_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE friends DROP CONSTRAINT friends_to_id_fkey;

-- changeset angelchang:606
ALTER TABLE "h2c_activation_code" ADD CONSTRAINT "h2c_activation_code_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE h2c_activation_code DROP CONSTRAINT h2c_activation_code_clinic_id_fkey;

-- changeset angelchang:607
ALTER TABLE "h2c_sync_log" ADD CONSTRAINT "h2c_sync_log_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE h2c_sync_log DROP CONSTRAINT h2c_sync_log_user_id_fkey;

-- changeset angelchang:608
ALTER TABLE "h2c_user_token" ADD CONSTRAINT "h2c_user_token_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE h2c_user_token DROP CONSTRAINT h2c_user_token_user_id_fkey;

-- changeset angelchang:609
ALTER TABLE "health_user" ADD CONSTRAINT "health_user_avatar_id_fkey" FOREIGN KEY ("avatar_id") REFERENCES "warp_avatar" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE health_user DROP CONSTRAINT health_user_avatar_id_fkey;

-- changeset angelchang:610
ALTER TABLE "heartbeat_raw" ADD CONSTRAINT "heartbeat_raw_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE heartbeat_raw DROP CONSTRAINT heartbeat_raw_user_id_fkey;

-- changeset angelchang:611
ALTER TABLE "heartbeat" ADD CONSTRAINT "heartbeat_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE heartbeat DROP CONSTRAINT heartbeat_user_id_fkey;

-- changeset angelchang:612
ALTER TABLE "hl_account_link" ADD CONSTRAINT "hl_account_link_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_account_link DROP CONSTRAINT hl_account_link_user_id_fkey;

-- changeset angelchang:613
ALTER TABLE "hl_cgm_1m_message_event" ADD CONSTRAINT "hl_cgm_1m_message_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_cgm_1m_message_event DROP CONSTRAINT hl_cgm_1m_message_event_user_id_fkey;

-- changeset angelchang:614
ALTER TABLE "hl_cgm_1m_v2_message_event" ADD CONSTRAINT "hl_cgm_1m_v2_message_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_cgm_1m_v2_message_event DROP CONSTRAINT hl_cgm_1m_v2_message_event_user_id_fkey;

-- changeset angelchang:615
ALTER TABLE "hl_cgm_2m_message_event" ADD CONSTRAINT "hl_cgm_2m_message_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_cgm_2m_message_event DROP CONSTRAINT hl_cgm_2m_message_event_user_id_fkey;

-- changeset angelchang:616
ALTER TABLE "hl_cgm_3m_message_event" ADD CONSTRAINT "hl_cgm_3m_message_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_cgm_3m_message_event DROP CONSTRAINT hl_cgm_3m_message_event_user_id_fkey;

-- changeset angelchang:617
ALTER TABLE "hl_cgm_message_event" ADD CONSTRAINT "hl_cgm_message_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_cgm_message_event DROP CONSTRAINT hl_cgm_message_event_user_id_fkey;

-- changeset angelchang:618
ALTER TABLE "hl_cgm_policyholder_account_link" ADD CONSTRAINT "hl_cgm_policyholder_account_link_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_cgm_policyholder_account_link DROP CONSTRAINT hl_cgm_policyholder_account_link_user_id_fkey;

-- changeset angelchang:619
ALTER TABLE "hl_cgm_policyholder_message_event" ADD CONSTRAINT "hl_cgm_policyholder_message_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_cgm_policyholder_message_event DROP CONSTRAINT hl_cgm_policyholder_message_event_user_id_fkey;

-- changeset angelchang:620
ALTER TABLE "hl_distributor_code" ADD CONSTRAINT "hl_distributor_code_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hl_distributor_code DROP CONSTRAINT hl_distributor_code_user_id_fkey;

-- changeset angelchang:621
ALTER TABLE "hourly_steps" ADD CONSTRAINT "hourly_steps_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE hourly_steps DROP CONSTRAINT hourly_steps_user_id_fkey;

-- changeset angelchang:622
ALTER TABLE "hub_role" ADD CONSTRAINT "hub_role_admin_user_id_fkey" FOREIGN KEY ("admin_user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hub_role DROP CONSTRAINT hub_role_admin_user_id_fkey;

-- changeset angelchang:623
ALTER TABLE "hub_role" ADD CONSTRAINT "hub_role_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE hub_role DROP CONSTRAINT hub_role_user_id_fkey;

-- changeset angelchang:624
ALTER TABLE "insulin_connect" ADD CONSTRAINT "insulin_connect_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE insulin_connect DROP CONSTRAINT insulin_connect_diary_id_fkey;

-- changeset angelchang:625
ALTER TABLE "insulin_connect" ADD CONSTRAINT "insulin_connect_insulin_id_fkey" FOREIGN KEY ("insulin_id") REFERENCES "insulin" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE insulin_connect DROP CONSTRAINT insulin_connect_insulin_id_fkey;

-- changeset angelchang:626
ALTER TABLE "insulin_connect" ADD CONSTRAINT "insulin_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE insulin_connect DROP CONSTRAINT insulin_connect_user_id_fkey;

-- changeset angelchang:627
ALTER TABLE "insurance_customer" ADD CONSTRAINT "insurance_customer_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE insurance_customer DROP CONSTRAINT insurance_customer_care_connect_id_fkey;

-- changeset angelchang:628
ALTER TABLE "insurance_form" ADD CONSTRAINT "insurance_form_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE insurance_form DROP CONSTRAINT insurance_form_clinic_id_fkey;

-- changeset angelchang:629
ALTER TABLE "interactive_answer_connect" ADD CONSTRAINT "interactive_answer_connect_interactive_form_connect_id_fkey" FOREIGN KEY ("interactive_form_connect_id") REFERENCES "interactive_form_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_answer_connect DROP CONSTRAINT interactive_answer_connect_interactive_form_connect_id_fkey;

-- changeset angelchang:630
ALTER TABLE "interactive_answer" ADD CONSTRAINT "interactive_answer_interactive_answer_connect_id_fkey" FOREIGN KEY ("interactive_answer_connect_id") REFERENCES "interactive_answer_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_answer DROP CONSTRAINT interactive_answer_interactive_answer_connect_id_fkey;

-- changeset angelchang:631
ALTER TABLE "interactive_answer" ADD CONSTRAINT "interactive_answer_interactive_question_id_fkey" FOREIGN KEY ("interactive_question_id") REFERENCES "interactive_question" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_answer DROP CONSTRAINT interactive_answer_interactive_question_id_fkey;

-- changeset angelchang:632
ALTER TABLE "interactive_article_attachment" ADD CONSTRAINT "interactive_article_attachment_interactive_article_id_fkey" FOREIGN KEY ("interactive_article_id") REFERENCES "interactive_article" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_article_attachment DROP CONSTRAINT interactive_article_attachment_interactive_article_id_fkey;

-- changeset angelchang:633
ALTER TABLE "interactive_article_connect" ADD CONSTRAINT "interactive_article_connect_interactive_article_id_fkey" FOREIGN KEY ("interactive_article_id") REFERENCES "interactive_article" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_article_connect DROP CONSTRAINT interactive_article_connect_interactive_article_id_fkey;

-- changeset angelchang:634
ALTER TABLE "interactive_article_connect" ADD CONSTRAINT "interactive_article_connect_interactive_form_id_fkey" FOREIGN KEY ("interactive_form_id") REFERENCES "interactive_form" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_article_connect DROP CONSTRAINT interactive_article_connect_interactive_form_id_fkey;

-- changeset angelchang:635
ALTER TABLE "interactive_form_analysis" ADD CONSTRAINT "interactive_form_analysis_interactive_form_id_fkey" FOREIGN KEY ("interactive_form_id") REFERENCES "interactive_form" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_form_analysis DROP CONSTRAINT interactive_form_analysis_interactive_form_id_fkey;

-- changeset angelchang:636
ALTER TABLE "interactive_form" ADD CONSTRAINT "interactive_form_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_form DROP CONSTRAINT interactive_form_clinic_id_fkey;

-- changeset angelchang:637
ALTER TABLE "interactive_form_connect" ADD CONSTRAINT "interactive_form_connect_interactive_form_id_fkey" FOREIGN KEY ("interactive_form_id") REFERENCES "interactive_form" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_form_connect DROP CONSTRAINT interactive_form_connect_interactive_form_id_fkey;

-- changeset angelchang:638
ALTER TABLE "interactive_form_connect" ADD CONSTRAINT "interactive_form_connect_send_by_fkey" FOREIGN KEY ("send_by") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_form_connect DROP CONSTRAINT interactive_form_connect_send_by_fkey;

-- changeset angelchang:639
ALTER TABLE "interactive_form_connect" ADD CONSTRAINT "interactive_form_connect_send_to_fkey" FOREIGN KEY ("send_to") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_form_connect DROP CONSTRAINT interactive_form_connect_send_to_fkey;

-- changeset angelchang:640
ALTER TABLE "interactive_form" ADD CONSTRAINT "interactive_form_follow_up_form_id_fkey" FOREIGN KEY ("follow_up_form_id") REFERENCES "interactive_form" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_form DROP CONSTRAINT interactive_form_follow_up_form_id_fkey;

-- changeset angelchang:641
ALTER TABLE "interactive_form" ADD CONSTRAINT "interactive_form_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "clinic_plan" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_form DROP CONSTRAINT interactive_form_plan_id_fkey;

-- changeset angelchang:642
ALTER TABLE "interactive_question" ADD CONSTRAINT "interactive_question_interactive_form_id_fkey" FOREIGN KEY ("interactive_form_id") REFERENCES "interactive_form" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE interactive_question DROP CONSTRAINT interactive_question_interactive_form_id_fkey;

-- changeset angelchang:643
ALTER TABLE "invitation" ADD CONSTRAINT "invitation_invitee_id_fkey" FOREIGN KEY ("invitee_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE invitation DROP CONSTRAINT invitation_invitee_id_fkey;

-- changeset angelchang:644
ALTER TABLE "invitation" ADD CONSTRAINT "invitation_inviter_id_fkey" FOREIGN KEY ("inviter_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE invitation DROP CONSTRAINT invitation_inviter_id_fkey;

-- changeset angelchang:645
ALTER TABLE "lab_clinic_connect" ADD CONSTRAINT "lab_clinic_connect_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_clinic_connect DROP CONSTRAINT lab_clinic_connect_clinic_id_fkey;

-- changeset angelchang:646
ALTER TABLE "lab_clinic_connect" ADD CONSTRAINT "lab_clinic_connect_lab_id_fkey" FOREIGN KEY ("lab_id") REFERENCES "lab" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_clinic_connect DROP CONSTRAINT lab_clinic_connect_lab_id_fkey;

-- changeset angelchang:647
ALTER TABLE "lab_connect" ADD CONSTRAINT "lab_connect_lab_id_fkey" FOREIGN KEY ("lab_id") REFERENCES "lab" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_connect DROP CONSTRAINT lab_connect_lab_id_fkey;

-- changeset angelchang:648
ALTER TABLE "lab_connect" ADD CONSTRAINT "lab_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_connect DROP CONSTRAINT lab_connect_user_id_fkey;

-- changeset angelchang:649
ALTER TABLE "lab_report" ADD CONSTRAINT "lab_report_lab_clinic_connect_id_fkey" FOREIGN KEY ("lab_clinic_connect_id") REFERENCES "lab_clinic_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_report DROP CONSTRAINT lab_report_lab_clinic_connect_id_fkey;

-- changeset angelchang:650
ALTER TABLE "lab_report" ADD CONSTRAINT "lab_report_lab_connect_id_fkey" FOREIGN KEY ("lab_connect_id") REFERENCES "lab_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_report DROP CONSTRAINT lab_report_lab_connect_id_fkey;

-- changeset angelchang:651
ALTER TABLE "lab_report" ADD CONSTRAINT "lab_report_lab_id_fkey" FOREIGN KEY ("lab_id") REFERENCES "lab" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_report DROP CONSTRAINT lab_report_lab_id_fkey;

-- changeset angelchang:652
ALTER TABLE "lab_report" ADD CONSTRAINT "lab_report_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_report DROP CONSTRAINT lab_report_user_id_fkey;

-- changeset angelchang:653
ALTER TABLE "lab_result" ADD CONSTRAINT "lab_result_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_result DROP CONSTRAINT lab_result_clinic_id_fkey;

-- changeset angelchang:654
ALTER TABLE "lab_result" ADD CONSTRAINT "lab_result_lab_report_id_fkey" FOREIGN KEY ("lab_report_id") REFERENCES "lab_report" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE lab_result DROP CONSTRAINT lab_result_lab_report_id_fkey;

-- changeset angelchang:655
ALTER TABLE "libreview_subscription" ADD CONSTRAINT "libreview_subscription_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "libreview_subscription_plan" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE libreview_subscription DROP CONSTRAINT libreview_subscription_plan_id_fkey;

-- changeset angelchang:656
ALTER TABLE "libreview_subscription" ADD CONSTRAINT "libreview_subscription_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE libreview_subscription DROP CONSTRAINT libreview_subscription_user_id_fkey;

-- changeset angelchang:657
ALTER TABLE "magic_qrcode" ADD CONSTRAINT "magic_qrcode_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE magic_qrcode DROP CONSTRAINT magic_qrcode_clinic_id_fkey;

-- changeset angelchang:658
ALTER TABLE "magic_qrcode" ADD CONSTRAINT "magic_qrcode_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE magic_qrcode DROP CONSTRAINT magic_qrcode_user_id_fkey;

-- changeset angelchang:659
ALTER TABLE "measurement_plan" ADD CONSTRAINT "measurement_plan_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE measurement_plan DROP CONSTRAINT measurement_plan_clinic_id_fkey;

-- changeset angelchang:660
ALTER TABLE "measurement_plan" ADD CONSTRAINT "measurement_plan_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE measurement_plan DROP CONSTRAINT measurement_plan_user_id_fkey;

-- changeset angelchang:661
ALTER TABLE "medicine_attachment" ADD CONSTRAINT "medicine_attachment_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE medicine_attachment DROP CONSTRAINT medicine_attachment_user_id_fkey;

-- changeset angelchang:662
ALTER TABLE "medicine_reminder" ADD CONSTRAINT "medicine_reminder_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE medicine_reminder DROP CONSTRAINT medicine_reminder_user_id_fkey;

-- changeset angelchang:663
ALTER TABLE "metlife_customer" ADD CONSTRAINT "metlife_customer_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE metlife_customer DROP CONSTRAINT metlife_customer_care_connect_id_fkey;

-- changeset angelchang:664
ALTER TABLE "moh_log" ADD CONSTRAINT "moh_log_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moh_log DROP CONSTRAINT moh_log_user_id_fkey;

-- changeset angelchang:665
ALTER TABLE "moshi_attachment" ADD CONSTRAINT "moshi_attachment_moshi_id_fkey" FOREIGN KEY ("moshi_id") REFERENCES "moshi" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moshi_attachment DROP CONSTRAINT moshi_attachment_moshi_id_fkey;

-- changeset angelchang:666
ALTER TABLE "moshi_campaign" ADD CONSTRAINT "moshi_campaign_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moshi_campaign DROP CONSTRAINT moshi_campaign_user_id_fkey;

-- changeset angelchang:667
ALTER TABLE "moshi_classification" ADD CONSTRAINT "moshi_classification_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moshi_classification DROP CONSTRAINT moshi_classification_user_id_fkey;

-- changeset angelchang:668
ALTER TABLE "moshi" ADD CONSTRAINT "moshi_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moshi DROP CONSTRAINT moshi_clinic_id_fkey;

-- changeset angelchang:669
ALTER TABLE "moshi" ADD CONSTRAINT "moshi_moshi_campaign_id_fkey" FOREIGN KEY ("moshi_campaign_id") REFERENCES "moshi_campaign" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moshi DROP CONSTRAINT moshi_moshi_campaign_id_fkey;

-- changeset angelchang:670
ALTER TABLE "moshi" ADD CONSTRAINT "moshi_receiver_id_fkey" FOREIGN KEY ("receiver_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moshi DROP CONSTRAINT moshi_receiver_id_fkey;

-- changeset angelchang:671
ALTER TABLE "moshi" ADD CONSTRAINT "moshi_sender_id_fkey" FOREIGN KEY ("sender_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE moshi DROP CONSTRAINT moshi_sender_id_fkey;

-- changeset angelchang:672
ALTER TABLE "nhi_record" ADD CONSTRAINT "nhi_record_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE nhi_record DROP CONSTRAINT nhi_record_user_id_fkey;

-- changeset angelchang:673
ALTER TABLE "niigata_dm_message_event" ADD CONSTRAINT "niigata_dm_message_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE niigata_dm_message_event DROP CONSTRAINT niigata_dm_message_event_user_id_fkey;

-- changeset angelchang:674
ALTER TABLE "notification" ADD CONSTRAINT "notification_receiver_id_fkey" FOREIGN KEY ("receiver_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE notification DROP CONSTRAINT notification_receiver_id_fkey;

-- changeset angelchang:675
ALTER TABLE "oral_medicine_connect" ADD CONSTRAINT "oral_medicine_connect_diary_id_fkey" FOREIGN KEY ("diary_id") REFERENCES "diary" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE oral_medicine_connect DROP CONSTRAINT oral_medicine_connect_diary_id_fkey;

-- changeset angelchang:676
ALTER TABLE "oral_medicine_connect" ADD CONSTRAINT "oral_medicine_connect_oral_medicine_id_fkey" FOREIGN KEY ("oral_medicine_id") REFERENCES "oral_medicine" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE oral_medicine_connect DROP CONSTRAINT oral_medicine_connect_oral_medicine_id_fkey;

-- changeset angelchang:677
ALTER TABLE "oral_medicine_connect" ADD CONSTRAINT "oral_medicine_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE oral_medicine_connect DROP CONSTRAINT oral_medicine_connect_user_id_fkey;

-- changeset angelchang:678
ALTER TABLE "partner_quaker_reward" ADD CONSTRAINT "partner_quaker_reward_user_info_id_fkey" FOREIGN KEY ("user_info_id") REFERENCES "partner_quaker_user_info" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE partner_quaker_reward DROP CONSTRAINT partner_quaker_reward_user_info_id_fkey;

-- changeset angelchang:679
ALTER TABLE "password_reset" ADD CONSTRAINT "password_reset_avatar_id_fkey" FOREIGN KEY ("avatar_id") REFERENCES "warp_avatar" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE password_reset DROP CONSTRAINT password_reset_avatar_id_fkey;

-- changeset angelchang:680
ALTER TABLE "peer_bells" ADD CONSTRAINT "peer_bells_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_bells DROP CONSTRAINT peer_bells_user_id_fkey;

-- changeset angelchang:681
ALTER TABLE "peer_comment" ADD CONSTRAINT "peer_comment_mention_id_fkey" FOREIGN KEY ("mention_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_comment DROP CONSTRAINT peer_comment_mention_id_fkey;

-- changeset angelchang:682
ALTER TABLE "peer_comment" ADD CONSTRAINT "peer_comment_owner_id_fkey" FOREIGN KEY ("owner_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_comment DROP CONSTRAINT peer_comment_owner_id_fkey;

-- changeset angelchang:683
ALTER TABLE "peer_comment" ADD CONSTRAINT "peer_comment_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_comment DROP CONSTRAINT peer_comment_user_id_fkey;

-- changeset angelchang:684
ALTER TABLE "peer_profile" ADD CONSTRAINT "peer_profile_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_profile DROP CONSTRAINT peer_profile_user_id_fkey;

-- changeset angelchang:685
ALTER TABLE "peer_recommend_connect" ADD CONSTRAINT "peer_recommend_connect_owner_id_fkey" FOREIGN KEY ("owner_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_recommend_connect DROP CONSTRAINT peer_recommend_connect_owner_id_fkey;

-- changeset angelchang:686
ALTER TABLE "peer_recommend_connect" ADD CONSTRAINT "peer_recommend_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_recommend_connect DROP CONSTRAINT peer_recommend_connect_user_id_fkey;

-- changeset angelchang:687
ALTER TABLE "peer_recommend" ADD CONSTRAINT "peer_recommend_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_recommend DROP CONSTRAINT peer_recommend_user_id_fkey;

-- changeset angelchang:688
ALTER TABLE "peer_relationship" ADD CONSTRAINT "peer_relationship_followed_id_fkey" FOREIGN KEY ("followed_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_relationship DROP CONSTRAINT peer_relationship_followed_id_fkey;

-- changeset angelchang:689
ALTER TABLE "peer_relationship" ADD CONSTRAINT "peer_relationship_follower_id_fkey" FOREIGN KEY ("follower_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_relationship DROP CONSTRAINT peer_relationship_follower_id_fkey;

-- changeset angelchang:690
ALTER TABLE "peer_setting" ADD CONSTRAINT "peer_setting_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_setting DROP CONSTRAINT peer_setting_user_id_fkey;

-- changeset angelchang:691
ALTER TABLE "peer_status" ADD CONSTRAINT "peer_status_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE peer_status DROP CONSTRAINT peer_status_user_id_fkey;

-- changeset angelchang:692
ALTER TABLE "photo_classification" ADD CONSTRAINT "photo_classification_diary_attachment_id_fkey" FOREIGN KEY ("diary_attachment_id") REFERENCES "diary_attachment" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE photo_classification DROP CONSTRAINT photo_classification_diary_attachment_id_fkey;

-- changeset angelchang:693
ALTER TABLE "photo_classification" ADD CONSTRAINT "photo_classification_moshi_attachment_id_fkey" FOREIGN KEY ("moshi_attachment_id") REFERENCES "moshi_attachment" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE photo_classification DROP CONSTRAINT photo_classification_moshi_attachment_id_fkey;

-- changeset angelchang:694
ALTER TABLE "photo_classification_tag" ADD CONSTRAINT "photo_classification_tag_photo_classification_id_fkey" FOREIGN KEY ("photo_classification_id") REFERENCES "photo_classification" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE photo_classification_tag DROP CONSTRAINT photo_classification_tag_photo_classification_id_fkey;

-- changeset angelchang:695
ALTER TABLE "photo_classification_tag" ADD CONSTRAINT "photo_classification_tag_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE photo_classification_tag DROP CONSTRAINT photo_classification_tag_user_id_fkey;

-- changeset angelchang:696
ALTER TABLE "photo_classification" ADD CONSTRAINT "photo_classification_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE photo_classification DROP CONSTRAINT photo_classification_user_id_fkey;

-- changeset angelchang:697
ALTER TABLE "pm_alert" ADD CONSTRAINT "pm_alert_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE pm_alert DROP CONSTRAINT pm_alert_care_connect_id_fkey;

-- changeset angelchang:698
ALTER TABLE "pm_alert" ADD CONSTRAINT "pm_alert_patient_id_fkey" FOREIGN KEY ("patient_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE pm_alert DROP CONSTRAINT pm_alert_patient_id_fkey;

-- changeset angelchang:699
ALTER TABLE "pm_broadcast" ADD CONSTRAINT "pm_broadcast_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE pm_broadcast DROP CONSTRAINT pm_broadcast_clinic_id_fkey;

-- changeset angelchang:700
ALTER TABLE "pm_broadcast" ADD CONSTRAINT "pm_broadcast_group_id_fkey" FOREIGN KEY ("group_id") REFERENCES "clinic_group" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE pm_broadcast DROP CONSTRAINT pm_broadcast_group_id_fkey;

-- changeset angelchang:701
ALTER TABLE "pm_broadcast" ADD CONSTRAINT "pm_broadcast_sender_id_fkey" FOREIGN KEY ("sender_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE pm_broadcast DROP CONSTRAINT pm_broadcast_sender_id_fkey;

-- changeset angelchang:702
ALTER TABLE "premium_record" ADD CONSTRAINT "premium_record_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE premium_record DROP CONSTRAINT premium_record_user_id_fkey;

-- changeset angelchang:703
ALTER TABLE "premium_report_history" ADD CONSTRAINT "premium_report_history_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE premium_report_history DROP CONSTRAINT premium_report_history_user_id_fkey;

-- changeset angelchang:704
ALTER TABLE "premium_subscription" ADD CONSTRAINT "premium_subscription_affiliate_id_fkey" FOREIGN KEY ("affiliate_id") REFERENCES "affiliate" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE premium_subscription DROP CONSTRAINT premium_subscription_affiliate_id_fkey;

-- changeset angelchang:705
ALTER TABLE "premium_subscription" ADD CONSTRAINT "premium_subscription_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE premium_subscription DROP CONSTRAINT premium_subscription_clinic_id_fkey;

-- changeset angelchang:706
ALTER TABLE "premium_subscription" ADD CONSTRAINT "premium_subscription_clinic_subscription_id_fkey" FOREIGN KEY ("clinic_subscription_id") REFERENCES "clinic_subscription" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE premium_subscription DROP CONSTRAINT premium_subscription_clinic_subscription_id_fkey;

-- changeset angelchang:707
ALTER TABLE "premium_subscription" ADD CONSTRAINT "premium_subscription_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "premium_plan" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE premium_subscription DROP CONSTRAINT premium_subscription_plan_id_fkey;

-- changeset angelchang:708
ALTER TABLE "premium_subscription" ADD CONSTRAINT "premium_subscription_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE premium_subscription DROP CONSTRAINT premium_subscription_user_id_fkey;

-- changeset angelchang:709
ALTER TABLE "prescription_attachment" ADD CONSTRAINT "prescription_attachment_user_prescription_id_fkey" FOREIGN KEY ("user_prescription_id") REFERENCES "user_prescription" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE prescription_attachment DROP CONSTRAINT prescription_attachment_user_prescription_id_fkey;

-- changeset angelchang:710
ALTER TABLE "product" ADD CONSTRAINT "product_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE product DROP CONSTRAINT product_user_id_fkey;

-- changeset angelchang:711
ALTER TABLE "program_lifecycle_event" ADD CONSTRAINT "program_lifecycle_event_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE program_lifecycle_event DROP CONSTRAINT program_lifecycle_event_clinic_id_fkey;

-- changeset angelchang:712
ALTER TABLE "program_lifecycle_event" ADD CONSTRAINT "program_lifecycle_event_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE program_lifecycle_event DROP CONSTRAINT program_lifecycle_event_user_id_fkey;

-- changeset angelchang:713
ALTER TABLE "report_history" ADD CONSTRAINT "report_history_owner_id_fkey" FOREIGN KEY ("owner_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE report_history DROP CONSTRAINT report_history_owner_id_fkey;

-- changeset angelchang:714
ALTER TABLE "sdm_report" ADD CONSTRAINT "sdm_report_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE sdm_report DROP CONSTRAINT sdm_report_care_connect_id_fkey;

-- changeset angelchang:715
ALTER TABLE "sdm_report" ADD CONSTRAINT "sdm_report_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE sdm_report DROP CONSTRAINT sdm_report_user_id_fkey;

-- changeset angelchang:716
ALTER TABLE "si_access_token" ADD CONSTRAINT "si_access_token_system_integrator_id_fkey" FOREIGN KEY ("system_integrator_id") REFERENCES "system_integrator" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE si_access_token DROP CONSTRAINT si_access_token_system_integrator_id_fkey;

-- changeset angelchang:717
ALTER TABLE "si_clinic_assignment" ADD CONSTRAINT "si_clinic_assignment_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE si_clinic_assignment DROP CONSTRAINT si_clinic_assignment_clinic_id_fkey;

-- changeset angelchang:718
ALTER TABLE "si_clinic_assignment" ADD CONSTRAINT "si_clinic_assignment_system_integrator_id_fkey" FOREIGN KEY ("system_integrator_id") REFERENCES "system_integrator" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE si_clinic_assignment DROP CONSTRAINT si_clinic_assignment_system_integrator_id_fkey;

-- changeset angelchang:719
ALTER TABLE "soap_sync" ADD CONSTRAINT "soap_sync_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE soap_sync DROP CONSTRAINT soap_sync_care_connect_id_fkey;

-- changeset angelchang:720
ALTER TABLE "social_connect" ADD CONSTRAINT "social_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE social_connect DROP CONSTRAINT social_connect_user_id_fkey;

-- changeset angelchang:721
ALTER TABLE "step" ADD CONSTRAINT "step_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE step DROP CONSTRAINT step_user_id_fkey;

-- changeset angelchang:722
ALTER TABLE "toolbox_answer" ADD CONSTRAINT "toolbox_answer_moshi_campaign_id_fkey" FOREIGN KEY ("moshi_campaign_id") REFERENCES "moshi_campaign" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_answer DROP CONSTRAINT toolbox_answer_moshi_campaign_id_fkey;

-- changeset angelchang:723
ALTER TABLE "toolbox_answer" ADD CONSTRAINT "toolbox_answer_toolbox_form_id_fkey" FOREIGN KEY ("toolbox_form_id") REFERENCES "toolbox_form" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_answer DROP CONSTRAINT toolbox_answer_toolbox_form_id_fkey;

-- changeset angelchang:724
ALTER TABLE "toolbox_answer" ADD CONSTRAINT "toolbox_answer_toolbox_program_id_fkey" FOREIGN KEY ("toolbox_program_id") REFERENCES "toolbox_program" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_answer DROP CONSTRAINT toolbox_answer_toolbox_program_id_fkey;

-- changeset angelchang:725
ALTER TABLE "toolbox_answer" ADD CONSTRAINT "toolbox_answer_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_answer DROP CONSTRAINT toolbox_answer_user_id_fkey;

-- changeset angelchang:726
ALTER TABLE "toolbox_attachment" ADD CONSTRAINT "toolbox_attachment_producer_id_fkey" FOREIGN KEY ("producer_id") REFERENCES "toolbox_producer" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_attachment DROP CONSTRAINT toolbox_attachment_producer_id_fkey;

-- changeset angelchang:727
ALTER TABLE "toolbox_form_connect" ADD CONSTRAINT "toolbox_form_connect_moshi_campaign_id_fkey" FOREIGN KEY ("moshi_campaign_id") REFERENCES "moshi_campaign" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_form_connect DROP CONSTRAINT toolbox_form_connect_moshi_campaign_id_fkey;

-- changeset angelchang:728
ALTER TABLE "toolbox_form_connect" ADD CONSTRAINT "toolbox_form_connect_toolbox_form_id_fkey" FOREIGN KEY ("toolbox_form_id") REFERENCES "toolbox_form" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_form_connect DROP CONSTRAINT toolbox_form_connect_toolbox_form_id_fkey;

-- changeset angelchang:729
ALTER TABLE "toolbox_form_connect" ADD CONSTRAINT "toolbox_form_connect_toolbox_program_id_fkey" FOREIGN KEY ("toolbox_program_id") REFERENCES "toolbox_program" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_form_connect DROP CONSTRAINT toolbox_form_connect_toolbox_program_id_fkey;

-- changeset angelchang:730
ALTER TABLE "toolbox_form_connect" ADD CONSTRAINT "toolbox_form_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_form_connect DROP CONSTRAINT toolbox_form_connect_user_id_fkey;

-- changeset angelchang:731
ALTER TABLE "toolbox_form" ADD CONSTRAINT "toolbox_form_producer_id_fkey" FOREIGN KEY ("producer_id") REFERENCES "toolbox_producer" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_form DROP CONSTRAINT toolbox_form_producer_id_fkey;

-- changeset angelchang:732
ALTER TABLE "toolbox_message" ADD CONSTRAINT "toolbox_message_article_id_fkey" FOREIGN KEY ("article_id") REFERENCES "toolbox_article" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE toolbox_message DROP CONSTRAINT toolbox_message_article_id_fkey;

-- changeset angelchang:733
ALTER TABLE "toolbox_message" ADD CONSTRAINT "toolbox_message_form_id_fkey" FOREIGN KEY ("form_id") REFERENCES "toolbox_form" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE toolbox_message DROP CONSTRAINT toolbox_message_form_id_fkey;

-- changeset angelchang:734
ALTER TABLE "toolbox_message_group_connect" ADD CONSTRAINT "toolbox_message_group_connect_toolbox_message_group_id_fkey" FOREIGN KEY ("toolbox_message_group_id") REFERENCES "toolbox_message_group" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_message_group_connect DROP CONSTRAINT toolbox_message_group_connect_toolbox_message_group_id_fkey;

-- changeset angelchang:735
ALTER TABLE "toolbox_message_group_connect" ADD CONSTRAINT "toolbox_message_group_connect_toolbox_message_id_fkey" FOREIGN KEY ("toolbox_message_id") REFERENCES "toolbox_message" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_message_group_connect DROP CONSTRAINT toolbox_message_group_connect_toolbox_message_id_fkey;

-- changeset angelchang:736
ALTER TABLE "toolbox_message_group" ADD CONSTRAINT "toolbox_message_group_producer_id_fkey" FOREIGN KEY ("producer_id") REFERENCES "toolbox_producer" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_message_group DROP CONSTRAINT toolbox_message_group_producer_id_fkey;

-- changeset angelchang:737
ALTER TABLE "toolbox_program_article_connect" ADD CONSTRAINT "toolbox_program_article_conne_toolbox_program_user_connect_fkey" FOREIGN KEY ("toolbox_program_user_connect_id") REFERENCES "toolbox_program_user_connect" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_article_connect DROP CONSTRAINT toolbox_program_article_conne_toolbox_program_user_connect_fkey;

-- changeset angelchang:738
ALTER TABLE "toolbox_program_article_connect" ADD CONSTRAINT "toolbox_program_article_connect_toolbox_article_id_fkey" FOREIGN KEY ("toolbox_article_id") REFERENCES "toolbox_article" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_article_connect DROP CONSTRAINT toolbox_program_article_connect_toolbox_article_id_fkey;

-- changeset angelchang:739
ALTER TABLE "toolbox_program" ADD CONSTRAINT "toolbox_program_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program DROP CONSTRAINT toolbox_program_clinic_id_fkey;

-- changeset angelchang:740
ALTER TABLE "toolbox_program_moshi_connect" ADD CONSTRAINT "toolbox_program_moshi_connect_moshi_id_fkey" FOREIGN KEY ("moshi_id") REFERENCES "moshi" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_moshi_connect DROP CONSTRAINT toolbox_program_moshi_connect_moshi_id_fkey;

-- changeset angelchang:741
ALTER TABLE "toolbox_program_moshi_connect" ADD CONSTRAINT "toolbox_program_moshi_connect_toolbox_message_group_id_fkey" FOREIGN KEY ("toolbox_message_group_id") REFERENCES "toolbox_message_group" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_moshi_connect DROP CONSTRAINT toolbox_program_moshi_connect_toolbox_message_group_id_fkey;

-- changeset angelchang:742
ALTER TABLE "toolbox_program_moshi_connect" ADD CONSTRAINT "toolbox_program_moshi_connect_toolbox_message_id_fkey" FOREIGN KEY ("toolbox_message_id") REFERENCES "toolbox_message" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_moshi_connect DROP CONSTRAINT toolbox_program_moshi_connect_toolbox_message_id_fkey;

-- changeset angelchang:743
ALTER TABLE "toolbox_program_moshi_connect" ADD CONSTRAINT "toolbox_program_moshi_connect_toolbox_program_user_connect_fkey" FOREIGN KEY ("toolbox_program_user_connect_id") REFERENCES "toolbox_program_user_connect" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_moshi_connect DROP CONSTRAINT toolbox_program_moshi_connect_toolbox_program_user_connect_fkey;

-- changeset angelchang:744
ALTER TABLE "toolbox_program" ADD CONSTRAINT "toolbox_program_plan_id_fkey" FOREIGN KEY ("plan_id") REFERENCES "clinic_plan" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program DROP CONSTRAINT toolbox_program_plan_id_fkey;

-- changeset angelchang:745
ALTER TABLE "toolbox_program" ADD CONSTRAINT "toolbox_program_producer_id_fkey" FOREIGN KEY ("producer_id") REFERENCES "toolbox_producer" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program DROP CONSTRAINT toolbox_program_producer_id_fkey;

-- changeset angelchang:746
ALTER TABLE "toolbox_program_user_connect" ADD CONSTRAINT "toolbox_program_user_connect_clinic_subscription_id_fkey" FOREIGN KEY ("clinic_subscription_id") REFERENCES "clinic_subscription" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_user_connect DROP CONSTRAINT toolbox_program_user_connect_clinic_subscription_id_fkey;

-- changeset angelchang:747
ALTER TABLE "toolbox_program_user_connect" ADD CONSTRAINT "toolbox_program_user_connect_toolbox_program_id_fkey" FOREIGN KEY ("toolbox_program_id") REFERENCES "toolbox_program" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_user_connect DROP CONSTRAINT toolbox_program_user_connect_toolbox_program_id_fkey;

-- changeset angelchang:748
ALTER TABLE "toolbox_program_user_connect" ADD CONSTRAINT "toolbox_program_user_connect_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_program_user_connect DROP CONSTRAINT toolbox_program_user_connect_user_id_fkey;

-- changeset angelchang:749
ALTER TABLE "toolbox_schedule" ADD CONSTRAINT "toolbox_schedule_toolbox_message_group_id_fkey" FOREIGN KEY ("toolbox_message_group_id") REFERENCES "toolbox_message_group" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_schedule DROP CONSTRAINT toolbox_schedule_toolbox_message_group_id_fkey;

-- changeset angelchang:750
ALTER TABLE "toolbox_schedule" ADD CONSTRAINT "toolbox_schedule_toolbox_message_id_fkey" FOREIGN KEY ("toolbox_message_id") REFERENCES "toolbox_message" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_schedule DROP CONSTRAINT toolbox_schedule_toolbox_message_id_fkey;

-- changeset angelchang:751
ALTER TABLE "toolbox_schedule" ADD CONSTRAINT "toolbox_schedule_toolbox_program_id_fkey" FOREIGN KEY ("toolbox_program_id") REFERENCES "toolbox_program" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE toolbox_schedule DROP CONSTRAINT toolbox_schedule_toolbox_program_id_fkey;

-- changeset angelchang:752
ALTER TABLE "toolbox_toolbars_permission" ADD CONSTRAINT "toolbox_toolbars_permission_toolbox_producer_id_fk" FOREIGN KEY ("producer_id") REFERENCES "toolbox_producer" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE toolbox_toolbars_permission DROP CONSTRAINT toolbox_toolbars_permission_toolbox_producer_id_fk;

-- changeset angelchang:753
ALTER TABLE "toolbox_toolbars_permission" ADD CONSTRAINT "toolbox_toolbars_permission_toolbox_toolbars_id_fk" FOREIGN KEY ("toolbar_id") REFERENCES "toolbox_toolbars" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- rollback: ALTER TABLE toolbox_toolbars_permission DROP CONSTRAINT toolbox_toolbars_permission_toolbox_toolbars_id_fk;

-- changeset angelchang:754
ALTER TABLE "user_a1c" ADD CONSTRAINT "user_a1c_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_a1c DROP CONSTRAINT user_a1c_user_id_fkey;

-- changeset angelchang:755
ALTER TABLE "user_analysis" ADD CONSTRAINT "user_analysis_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_analysis DROP CONSTRAINT user_analysis_user_id_fkey;

-- changeset angelchang:756
ALTER TABLE "user_cache" ADD CONSTRAINT "user_cache_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_cache DROP CONSTRAINT user_cache_user_id_fkey;

-- changeset angelchang:757
ALTER TABLE "user_consent_document" ADD CONSTRAINT "user_consent_document_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_consent_document DROP CONSTRAINT user_consent_document_clinic_id_fkey;

-- changeset angelchang:758
ALTER TABLE "user_consent_document" ADD CONSTRAINT "user_consent_document_country_id_fkey" FOREIGN KEY ("country_id") REFERENCES "country" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_consent_document DROP CONSTRAINT user_consent_document_country_id_fkey;

-- changeset angelchang:759
ALTER TABLE "user_consent_history" ADD CONSTRAINT "user_consent_history_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_consent_history DROP CONSTRAINT user_consent_history_user_id_fkey;

-- changeset angelchang:760
ALTER TABLE "user_daily_routine" ADD CONSTRAINT "user_daily_routine_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_daily_routine DROP CONSTRAINT user_daily_routine_care_connect_id_fkey;

-- changeset angelchang:761
ALTER TABLE "user_daily_routine" ADD CONSTRAINT "user_daily_routine_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_daily_routine DROP CONSTRAINT user_daily_routine_created_by_fkey;

-- changeset angelchang:762
ALTER TABLE "user_daily_routine" ADD CONSTRAINT "user_daily_routine_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_daily_routine DROP CONSTRAINT user_daily_routine_user_id_fkey;

-- changeset angelchang:763
ALTER TABLE "user_exam_unit" ADD CONSTRAINT "user_exam_unit_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE user_exam_unit DROP CONSTRAINT user_exam_unit_user_id_fkey;

-- changeset angelchang:764
ALTER TABLE "user_icd_code" ADD CONSTRAINT "user_icd_code_emr_record_id_fkey" FOREIGN KEY ("emr_record_id") REFERENCES "emr_record" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_icd_code DROP CONSTRAINT user_icd_code_emr_record_id_fkey;

-- changeset angelchang:765
ALTER TABLE "user_measurement_plan" ADD CONSTRAINT "user_measurement_plan_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_measurement_plan DROP CONSTRAINT user_measurement_plan_care_connect_id_fkey;

-- changeset angelchang:766
ALTER TABLE "user_measurement_plan" ADD CONSTRAINT "user_measurement_plan_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_measurement_plan DROP CONSTRAINT user_measurement_plan_created_by_fkey;

-- changeset angelchang:767
ALTER TABLE "user_measurement_plan" ADD CONSTRAINT "user_measurement_plan_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_measurement_plan DROP CONSTRAINT user_measurement_plan_user_id_fkey;

-- changeset angelchang:768
ALTER TABLE "user_meter" ADD CONSTRAINT "user_meter_meter_id_fkey" FOREIGN KEY ("meter_id") REFERENCES "meter" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_meter DROP CONSTRAINT user_meter_meter_id_fkey;

-- changeset angelchang:769
ALTER TABLE "user_meter" ADD CONSTRAINT "user_meter_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_meter DROP CONSTRAINT user_meter_user_id_fkey;

-- changeset angelchang:770
ALTER TABLE "user_nhi_p_code" ADD CONSTRAINT "user_nhi_p_code_emr_record_id_fkey" FOREIGN KEY ("emr_record_id") REFERENCES "emr_record" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_nhi_p_code DROP CONSTRAINT user_nhi_p_code_emr_record_id_fkey;

-- changeset angelchang:771
ALTER TABLE "user_notification_token" ADD CONSTRAINT "user_notification_token_user_token_id_fkey" FOREIGN KEY ("user_token_id") REFERENCES "user_token" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- rollback: ALTER TABLE user_notification_token DROP CONSTRAINT user_notification_token_user_token_id_fkey;

-- changeset angelchang:772
ALTER TABLE "user_picture" ADD CONSTRAINT "user_picture_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_picture DROP CONSTRAINT user_picture_user_id_fkey;

-- changeset angelchang:773
ALTER TABLE "user_pref" ADD CONSTRAINT "user_pref_care_connect_id_fkey" FOREIGN KEY ("care_connect_id") REFERENCES "care_connect" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_pref DROP CONSTRAINT user_pref_care_connect_id_fkey;

-- changeset angelchang:774
ALTER TABLE "user_pref" ADD CONSTRAINT "user_pref_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_pref DROP CONSTRAINT user_pref_created_by_fkey;

-- changeset angelchang:775
ALTER TABLE "user_pref" ADD CONSTRAINT "user_pref_meter_id_fkey" FOREIGN KEY ("meter_id") REFERENCES "meter" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_pref DROP CONSTRAINT user_pref_meter_id_fkey;

-- changeset angelchang:776
ALTER TABLE "user_pref" ADD CONSTRAINT "user_pref_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_pref DROP CONSTRAINT user_pref_user_id_fkey;

-- changeset angelchang:777
ALTER TABLE "user_prescription" ADD CONSTRAINT "user_prescription_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_prescription DROP CONSTRAINT user_prescription_clinic_id_fkey;

-- changeset angelchang:778
ALTER TABLE "user_prescription" ADD CONSTRAINT "user_prescription_clinic_prescription_id_fkey" FOREIGN KEY ("clinic_prescription_id") REFERENCES "clinic_prescription" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_prescription DROP CONSTRAINT user_prescription_clinic_prescription_id_fkey;

-- changeset angelchang:779
ALTER TABLE "user_prescription" ADD CONSTRAINT "user_prescription_nhi_record_id_fkey" FOREIGN KEY ("nhi_record_id") REFERENCES "nhi_record" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_prescription DROP CONSTRAINT user_prescription_nhi_record_id_fkey;

-- changeset angelchang:780
ALTER TABLE "user_prescription_qr_code" ADD CONSTRAINT "user_prescription_qr_code_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_prescription_qr_code DROP CONSTRAINT user_prescription_qr_code_user_id_fkey;

-- changeset angelchang:781
ALTER TABLE "user_prescription" ADD CONSTRAINT "user_prescription_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_prescription DROP CONSTRAINT user_prescription_user_id_fkey;

-- changeset angelchang:782
ALTER TABLE "user_prescription" ADD CONSTRAINT "user_prescription_user_prescription_qr_code_id_fkey" FOREIGN KEY ("user_prescription_qr_code_id") REFERENCES "user_prescription_qr_code" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_prescription DROP CONSTRAINT user_prescription_user_prescription_qr_code_id_fkey;

-- changeset angelchang:783
ALTER TABLE "user_stream" ADD CONSTRAINT "user_stream_clinic_id_fkey" FOREIGN KEY ("clinic_id") REFERENCES "clinic" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_stream DROP CONSTRAINT user_stream_clinic_id_fkey;

-- changeset angelchang:784
ALTER TABLE "user_stream" ADD CONSTRAINT "user_stream_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_stream DROP CONSTRAINT user_stream_user_id_fkey;

-- changeset angelchang:785
ALTER TABLE "user_stripe" ADD CONSTRAINT "user_stripe_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_stripe DROP CONSTRAINT user_stripe_user_id_fkey;

-- changeset angelchang:786
ALTER TABLE "user_token" ADD CONSTRAINT "user_token_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_token DROP CONSTRAINT user_token_user_id_fkey;

-- changeset angelchang:787
ALTER TABLE "warp_session" ADD CONSTRAINT "warp_session_avatar_id_fkey" FOREIGN KEY ("avatar_id") REFERENCES "warp_avatar" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE warp_session DROP CONSTRAINT warp_session_avatar_id_fkey;

-- changeset angelchang:788
ALTER TABLE "web_session" ADD CONSTRAINT "web_session_avatar_id_fkey" FOREIGN KEY ("avatar_id") REFERENCES "warp_avatar" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- rollback: ALTER TABLE web_session DROP CONSTRAINT web_session_avatar_id_fkey;

-- changeset angelchang:789
CREATE INDEX IF NOT EXISTS "idx_diary_user_id_recorded_at_with_weight" ON "diary" USING btree (user_id, recorded_at) WHERE (weight >= '0'::numeric);
-- rollback: DROP INDEX idx_diary_user_id_recorded_at_with_weight;

-- changeset angelchang:790
CREATE INDEX IF NOT EXISTS "idx_diary_batch_record_batch_uuid" ON "diary_batch_record" USING btree (batch_uuid);
-- rollback: DROP INDEX idx_diary_batch_record_batch_uuid;

-- changeset angelchang:791
CREATE INDEX IF NOT EXISTS "idx_program_lifecycle_event_user_id" ON "hl_cgm_message_event" USING btree (user_id);
-- rollback: DROP INDEX idx_program_lifecycle_event_user_id;

-- changeset angelchang:792
CREATE INDEX IF NOT EXISTS "idx_user_pref_user_id" ON "user_pref" USING btree (user_id);
-- rollback: DROP INDEX idx_user_pref_user_id;

-- changeset hankchou:793
CREATE TABLE IF NOT EXISTS "user_change_history" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "created_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "updated_at" TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), "origin_data" TEXT, "changed_data" TEXT, "change_type" TEXT, "user_id" INTEGER, CONSTRAINT "user_change_history_pkey" PRIMARY KEY ("id"));
-- rollback: DROP TABLE user_change_history;

-- changeset hankchou:794
ALTER TABLE "user_change_history" ADD CONSTRAINT "user_change_history_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE user_change_history DROP CONSTRAINT user_change_history_user_id_fkey;

-- changeset tonyko:795
CREATE TABLE IF NOT EXISTS "toolbox_analysis_base"( id SERIAL NOT NULL PRIMARY KEY, producer_id INTEGER NOT NULL REFERENCES toolbox_producer(id), toolbox_schedule_id INTEGER REFERENCES toolbox_schedule(id) ON DELETE CASCADE, name TEXT NOT NULL, fields JSONB[] NOT NULL DEFAULT '{}', end_repeat bool NOT NULL DEFAULT false, created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), deleted_at TIMESTAMP WITHOUT TIME ZONE);
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_analysis_base_producer_id_name_key ON toolbox_analysis_base(producer_id, name) WHERE deleted_at IS NULL;
-- rollback: DROP INDEX IF EXISTS toolbox_analysis_base_producer_id_name_key; DROP TABLE IF EXISTS toolbox_analysis_base;

-- changeset tonyko:796
CREATE TABLE IF NOT EXISTS "toolbox_analysis"( id SERIAL NOT NULL PRIMARY KEY, toolbox_analysis_base_id INTEGER REFERENCES toolbox_analysis_base(id) ON DELETE CASCADE, toolbox_message_id INTEGER REFERENCES toolbox_message(id) ON DELETE RESTRICT, toolbox_message_group_id INTEGER REFERENCES toolbox_message_group(id), conditions JSONB[] NOT NULL DEFAULT '{}', seq INTEGER NOT NULL DEFAULT 0, created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), deleted_at TIMESTAMP WITHOUT TIME ZONE);
CREATE UNIQUE INDEX IF NOT EXISTS toolbox_analysis_base_id_seq_key ON toolbox_analysis(toolbox_analysis_base_id, seq ASC) WHERE deleted_at IS NULL;
-- rollback: DROP INDEX IF EXISTS toolbox_analysis_base_id_seq_key; DROP TABLE IF EXISTS toolbox_analysis;

-- changeset tonyko:797
ALTER TABLE IF EXISTS toolbox_analysis_base DROP COLUMN fields, ADD COLUMN fields JSONB NOT NULL DEFAULT '[]';
ALTER TABLE IF EXISTS toolbox_analysis DROP COLUMN conditions, ADD COLUMN conditions JSONB NOT NULL DEFAULT '[]';
-- rollback: DROP INDEX IF EXISTS toolbox_analysis_base_id_seq_key; DROP TABLE IF EXISTS toolbox_analysis;

-- changeset anguswang:798
ALTER TABLE country ADD COLUMN IF NOT EXISTS default_identifier TEXT;
ALTER TABLE country RENAME COLUMN is_admin TO allow_create_clinic;
-- rollback: ALTER TABLE country DROP COLUMN IF EXISTS default_identifier;

-- changeset tonyko:799
DROP INDEX IF EXISTS toolbox_analysis_base_producer_id_name_key;
-- rollback: CREATE UNIQUE INDEX IF NOT EXISTS toolbox_analysis_base_producer_id_name_key ON toolbox_analysis_base(producer_id, name) WHERE deleted_at IS NULL;

-- changeset angelchang:800
CREATE TABLE IF NOT EXISTS "food_ai_record" (id SERIAL NOT NULL PRIMARY KEY,user_id INTEGER NOT NULL,satisfaction_review BOOLEAN DEFAULT NULL,has_results BOOLEAN DEFAULT FALSE,url TEXT DEFAULT NULL,results TEXT DEFAULT '[]',created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW());
ALTER TABLE "food_ai_record" ADD CONSTRAINT "food_ai_record_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "health_user" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
-- rollback: ALTER TABLE food_ai_record DROP CONSTRAINT food_ai_record_user_id_fkey; DROP TABLE food_ai_record;

--changeset angelchang:801
alter table food_ai_record alter column has_results set not null;
alter table food_ai_record alter column results drop default;
alter table food_ai_record alter column results type jsonb using results::jsonb;
alter table food_ai_record alter column results set not null;
alter table food_ai_record alter column results set default '[]'::jsonb;

-- changeset tonyko:802
ALTER TABLE toolbox_analysis ADD COLUMN IF NOT EXISTS end_repeat bool NOT NULL DEFAULT false, ADD COLUMN IF NOT EXISTS is_default bool NOT NULL DEFAULT false;
-- rollback: ALTER TABLE toolbox_analysis DROP COLUMN IF EXISTS end_repeat, DROP COLUMN IF EXISTS is_default;

--changeset anguswang:803
CREATE TABLE IF NOT EXISTS "sanofi_survey" (id SERIAL NOT NULL PRIMARY KEY, user_id INTEGER NOT NULL,
clinic_id INTEGER NOT NULL,governorate INTEGER NOT NULL, city VARCHAR NOT NULL, district VARCHAR NOT NULL,
created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW());
-- rollback: DROP TABLE sanofi_survey;

--changeset schneeruan:804
ALTER TABLE premium_report_history ADD COLUMN IF NOT EXISTS status_code INTEGER;
-- rollback: ALTER TABLE premium_report_history DROP COLUMN IF EXISTS status_code;

--changeset tonyko:805
  ALTER TABLE toolbox_message ADD COLUMN IF NOT EXISTS m_type TEXT NOT NULL DEFAULT 'static', ADD COLUMN IF NOT EXISTS d_types TEXT[] NOT NULL DEFAULT '{}'; CREATE INDEX IF NOT EXISTS ix_toolbox_message_producer_m_type on toolbox_message(producer_id, m_type);
-- rollback: DROP INDEX IF EXISTS ix_toolbox_message_producer_m_type; ALTER TABLE toolbox_message DROP COLUMN IF EXISTS m_type, DROP COLUMN IF EXISTS d_types;

-- changeset angelchang:806
CREATE UNIQUE INDEX IF NOT EXISTS "idx_unique_clinic_mark_clinic_id_user_id" ON "clinic_mark" ("clinic_id", "user_id");
-- rollback: DROP INDEX IF EXISTS idx_unique_clinic_mark_clinic_id_user_id;

-- changeset anguswang:807
ALTER Table user_exam_unit ALTER COLUMN cortisol SET DEFAULT 'μg/dL', ALTER COLUMN tsh SET DEFAULT 'μIU/mL', ALTER COLUMN iron SET DEFAULT 'μg/dL', ALTER COLUMN tibc SET DEFAULT 'μg/dL', ALTER COLUMN t4_thyroxine SET DEFAULT 'μg/dL'; ALTER Table clinic_exam_unit ALTER COLUMN cortisol SET DEFAULT 'μg/dL', ALTER COLUMN tsh SET DEFAULT 'μIU/mL', ALTER COLUMN iron SET DEFAULT 'μg/dL', ALTER COLUMN tibc SET DEFAULT 'μg/dL', ALTER COLUMN t4_thyroxine SET DEFAULT 'μg/dL';
-- rollback: ALTER Table user_exam_unit ALTER COLUMN cortisol SET DEFAULT 'µg/dL', ALTER COLUMN tsh SET DEFAULT 'µIU/mL', ALTER COLUMN iron SET DEFAULT 'µg/dL', ALTER COLUMN tibc SET DEFAULT 'µg/dL', ALTER COLUMN t4_thyroxine SET DEFAULT 'µg/dL'; ALTER Table clinic_exam_unit ALTER COLUMN cortisol SET DEFAULT 'µg/dL', ALTER COLUMN tsh SET DEFAULT 'µIU/mL', ALTER COLUMN iron SET DEFAULT 'µg/dL', ALTER COLUMN tibc SET DEFAULT 'µg/dL', ALTER COLUMN t4_thyroxine SET DEFAULT 'µg/dL';

-- changeset angelchang:808
DROP INDEX IF EXISTS idx_user_exam_unit_user_id;
CREATE UNIQUE INDEX IF NOT EXISTS idx_unique_user_exam_unit_user_id ON user_exam_unit(user_id);
-- rollback: DROP INDEX IF EXISTS idx_unique_user_exam_unit_user_id; CREATE INDEX IF NOT EXISTS "idx_user_exam_unit_user_id" ON "user_exam_unit"("user_id");

-- changeset hankchou:809
CREATE TABLE IF NOT EXISTS "region"(id SERIAL NOT NULL PRIMARY KEY, iso_code TEXT);
-- rollback: DROP TABLE region;

-- changeset hankchou:810
CREATE TABLE IF NOT EXISTS "account"(id SERIAL NOT NULL PRIMARY KEY, phone_number TEXT, email TEXT, identity TEXT, region_id integer, created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),password text);
ALTER TABLE "account" ADD CONSTRAINT "account_region_id_fkey" FOREIGN KEY ("region_id") REFERENCES "region" ("id") ON UPDATE NO ACTION ON DELETE RESTRICT;
CREATE UNIQUE INDEX IF NOT EXISTS account_email_unique_key ON account(email);
CREATE UNIQUE INDEX IF NOT EXISTS account_identity_unique_key ON account(identity);
CREATE UNIQUE INDEX IF NOT EXISTS account_phone_number_unique_key ON account(phone_number);
-- rollback: DROP INDEX IF EXISTS account_phone_number_unique_key; DROP INDEX IF EXISTS account_identity_unique_key; DROP INDEX IF EXISTS account_email_unique_key; ALTER TABLE account DROP CONSTRAINT account_region_id_fkey; DROP TABLE account;

-- changeset hankchou:811
CREATE TABLE IF NOT EXISTS "auth_token"(id SERIAL NOT NULL PRIMARY KEY,created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),device_id TEXT,access_token TEXT, is_valid BOOLEAN DEFAULT TRUE NOT NULL, identity TEXT NOT NULL);
CREATE INDEX IF NOT EXISTS auth_token_device_id_access_token_key ON auth_token(device_id, access_token) WHERE is_valid IS TRUE;
CREATE INDEX IF NOT EXISTS auth_token_identity_key ON auth_token(identity);
-- rollback: DROP INDEX IF EXISTS auth_token_identity_key; DROP INDEX IF EXISTS auth_token_device_id_access_token_key; DROP TABLE auth_token;

-- changeset hankchou:812
CREATE TABLE IF NOT EXISTS "auth_social_login"(id SERIAL NOT NULL PRIMARY KEY, user_identifier TEXT, identity TEXT, extra_info JSONB, type TEXT,created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW());
CREATE UNIQUE INDEX IF NOT EXISTS auth_social_login_user_identifier_key ON auth_social_login(user_identifier, type);
-- rollback: DROP INDEX IF EXISTS auth_social_login_user_identifier_key; DROP TABLE auth_social_login;

-- changeset hankchou:813
CREATE TABLE IF NOT EXISTS "auth_session"(id SERIAL NOT NULL PRIMARY KEY,identity TEXT, is_persistent BOOLEAN, created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(), updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),uid BYTEA);
CREATE INDEX IF NOT EXISTS auth_session_uid_key ON auth_session(uid);
-- rollback: DROP INDEX IF EXISTS auth_session_uid_key; DROP TABLE auth_session;
